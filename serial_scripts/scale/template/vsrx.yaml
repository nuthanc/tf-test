description: vSRX-Scale
heat_template_version: 'rocky'

outputs:
  vsrx_id:
    description: vsrx handle
    value:
      get_attr: [VSRX-scale, show, id]

resources:
  My_IPAM:
    type: OS::ContrailV2::NetworkIpam
    properties:
      name: my-scale-ipam

  My_VN:
    depends_on: [My_IPAM]
    properties:
      name: sub-scale-vn
      network_ipam_refs: [{ get_resource: My_IPAM }]
      network_ipam_refs_data:
        [{
          network_ipam_refs_data_ipam_subnets:
            [{
              network_ipam_refs_data_ipam_subnets_subnet:
                {
                  network_ipam_refs_data_ipam_subnets_subnet_ip_prefix: 27.7.57.0,
                  network_ipam_refs_data_ipam_subnets_subnet_ip_prefix_len: 29,
                },
                network_ipam_refs_data_ipam_subnets_addr_from_start: 'true',
         }]
         },
        ]
    type: OS::ContrailV2::VirtualNetwork
  
  ParentPort:
    depends_on: [My_VN]
    properties:
      name: parent-port-1
      virtual_network_refs: [{ list_join: [':', { get_attr: [ My_VN, fq_name ] } ] }]
    type: OS::ContrailV2::VirtualMachineInterface

  VMI_parent_IP :
    type: OS::ContrailV2::InstanceIp
    depends_on : [ ParentPort, My_VN ]
    properties :
      virtual_machine_interface_refs : [{ get_resource : ParentPort }]
      virtual_network_refs : [{ list_join : [':', { get_attr : [ My_VN , fq_name ] } ] }]


  Sub_VN-1:
    depends_on: [My_IPAM]
    properties:
      name: sub-scale-vn
      network_ipam_refs: [{ get_resource: My_IPAM }]
      network_ipam_refs_data:
        [{
          network_ipam_refs_data_ipam_subnets:
            [{
              network_ipam_refs_data_ipam_subnets_subnet:
                {
                  network_ipam_refs_data_ipam_subnets_subnet_ip_prefix: 17.97.0.0,
                  network_ipam_refs_data_ipam_subnets_subnet_ip_prefix_len: 20,
                },
                network_ipam_refs_data_ipam_subnets_addr_from_start: 'true',
         }]
         },
        ]
    type: OS::ContrailV2::VirtualNetwork

  SubInterface-1:
    depends_on: [Sub_VN-1]
    properties:
      name: sub-interface-1
      virtual_machine_interface_properties: {virtual_machine_interface_properties_sub_interface_vlan_tag: 2}
      virtual_machine_interface_refs:
      - {get_resource: ParentPort}
      virtual_network_refs: [{ list_join: [':', { get_attr: [ Sub_VN-1, fq_name ] } ] }]
    type: OS::ContrailV2::VirtualMachineInterface

  VMI_sub_IP-1 :
    type: OS::ContrailV2::InstanceIp
    depends_on : [ SubInterface-1, My_VN ]
    properties :
      virtual_machine_interface_refs : [{ get_resource : SubInterface-1 }]
      virtual_network_refs : [{ list_join : [':', { get_attr : [ Sub_VN-1 , fq_name ] } ] }]
      instance_ip_address: 17.97.0.3

  Sub_VN-2:
    depends_on: [My_IPAM]
    properties:
      name: sub-scale-vn
      network_ipam_refs: [{ get_resource: My_IPAM }]
      network_ipam_refs_data:
        [{
          network_ipam_refs_data_ipam_subnets:
            [{
              network_ipam_refs_data_ipam_subnets_subnet:
                {
                  network_ipam_refs_data_ipam_subnets_subnet_ip_prefix: 17.97.16.0,
                  network_ipam_refs_data_ipam_subnets_subnet_ip_prefix_len: 20,
                },
                network_ipam_refs_data_ipam_subnets_addr_from_start: 'true',
         }]
         },
        ]
    type: OS::ContrailV2::VirtualNetwork

  SubInterface-2:
    depends_on: [Sub_VN-2]
    properties:
      name: sub-interface-2
      virtual_machine_interface_properties: {virtual_machine_interface_properties_sub_interface_vlan_tag: 3}
      virtual_machine_interface_refs:
      - {get_resource: ParentPort}
      virtual_network_refs: [{ list_join: [':', { get_attr: [ Sub_VN-2, fq_name ] } ] }]
    type: OS::ContrailV2::VirtualMachineInterface

  VMI_sub_IP-2 :
    type: OS::ContrailV2::InstanceIp
    depends_on : [ SubInterface-2, My_VN ]
    properties :
      virtual_machine_interface_refs : [{ get_resource : SubInterface-2 }]
      virtual_network_refs : [{ list_join : [':', { get_attr : [ Sub_VN-2 , fq_name ] } ] }]
      instance_ip_address: 17.97.16.3

  Sub_VN-3:
    depends_on: [My_IPAM]
    properties:
      name: sub-scale-vn
      network_ipam_refs: [{ get_resource: My_IPAM }]
      network_ipam_refs_data:
        [{
          network_ipam_refs_data_ipam_subnets:
            [{
              network_ipam_refs_data_ipam_subnets_subnet:
                {
                  network_ipam_refs_data_ipam_subnets_subnet_ip_prefix: 17.97.32.0,
                  network_ipam_refs_data_ipam_subnets_subnet_ip_prefix_len: 20,
                },
                network_ipam_refs_data_ipam_subnets_addr_from_start: 'true',
         }]
         },
        ]
    type: OS::ContrailV2::VirtualNetwork

  SubInterface-3:
    depends_on: [Sub_VN-3]
    properties:
      name: sub-interface-3
      virtual_machine_interface_properties: {virtual_machine_interface_properties_sub_interface_vlan_tag: 4}
      virtual_machine_interface_refs:
      - {get_resource: ParentPort}
      virtual_network_refs: [{ list_join: [':', { get_attr: [ Sub_VN-3, fq_name ] } ] }]
    type: OS::ContrailV2::VirtualMachineInterface

  VMI_sub_IP-3 :
    type: OS::ContrailV2::InstanceIp
    depends_on : [ SubInterface-3, My_VN ]
    properties :
      virtual_machine_interface_refs : [{ get_resource : SubInterface-3 }]
      virtual_network_refs : [{ list_join : [':', { get_attr : [ Sub_VN-3 , fq_name ] } ] }]
      instance_ip_address: 17.97.32.3

  Sub_VN-4:
    depends_on: [My_IPAM]
    properties:
      name: sub-scale-vn
      network_ipam_refs: [{ get_resource: My_IPAM }]
      network_ipam_refs_data:
        [{
          network_ipam_refs_data_ipam_subnets:
            [{
              network_ipam_refs_data_ipam_subnets_subnet:
                {
                  network_ipam_refs_data_ipam_subnets_subnet_ip_prefix: 17.97.48.0,
                  network_ipam_refs_data_ipam_subnets_subnet_ip_prefix_len: 20,
                },
                network_ipam_refs_data_ipam_subnets_addr_from_start: 'true',
         }]
         },
        ]
    type: OS::ContrailV2::VirtualNetwork

  SubInterface-4:
    depends_on: [Sub_VN-4]
    properties:
      name: sub-interface-4
      virtual_machine_interface_properties: {virtual_machine_interface_properties_sub_interface_vlan_tag: 5}
      virtual_machine_interface_refs:
      - {get_resource: ParentPort}
      virtual_network_refs: [{ list_join: [':', { get_attr: [ Sub_VN-4, fq_name ] } ] }]
    type: OS::ContrailV2::VirtualMachineInterface

  VMI_sub_IP-4 :
    type: OS::ContrailV2::InstanceIp
    depends_on : [ SubInterface-4, My_VN ]
    properties :
      virtual_machine_interface_refs : [{ get_resource : SubInterface-4 }]
      virtual_network_refs : [{ list_join : [':', { get_attr : [ Sub_VN-4 , fq_name ] } ] }]
      instance_ip_address: 17.97.48.3

  Sub_VN-5:
    depends_on: [My_IPAM]
    properties:
      name: sub-scale-vn
      network_ipam_refs: [{ get_resource: My_IPAM }]
      network_ipam_refs_data:
        [{
          network_ipam_refs_data_ipam_subnets:
            [{
              network_ipam_refs_data_ipam_subnets_subnet:
                {
                  network_ipam_refs_data_ipam_subnets_subnet_ip_prefix: 17.97.64.0,
                  network_ipam_refs_data_ipam_subnets_subnet_ip_prefix_len: 20,
                },
                network_ipam_refs_data_ipam_subnets_addr_from_start: 'true',
         }]
         },
        ]
    type: OS::ContrailV2::VirtualNetwork

  SubInterface-5:
    depends_on: [Sub_VN-5]
    properties:
      name: sub-interface-5
      virtual_machine_interface_properties: {virtual_machine_interface_properties_sub_interface_vlan_tag: 6}
      virtual_machine_interface_refs:
      - {get_resource: ParentPort}
      virtual_network_refs: [{ list_join: [':', { get_attr: [ Sub_VN-5, fq_name ] } ] }]
    type: OS::ContrailV2::VirtualMachineInterface

  VMI_sub_IP-5 :
    type: OS::ContrailV2::InstanceIp
    depends_on : [ SubInterface-5, My_VN ]
    properties :
      virtual_machine_interface_refs : [{ get_resource : SubInterface-5 }]
      virtual_network_refs : [{ list_join : [':', { get_attr : [ Sub_VN-5 , fq_name ] } ] }]
      instance_ip_address: 17.97.64.3

  Sub_VN-6:
    depends_on: [My_IPAM]
    properties:
      name: sub-scale-vn
      network_ipam_refs: [{ get_resource: My_IPAM }]
      network_ipam_refs_data:
        [{
          network_ipam_refs_data_ipam_subnets:
            [{
              network_ipam_refs_data_ipam_subnets_subnet:
                {
                  network_ipam_refs_data_ipam_subnets_subnet_ip_prefix: 17.97.80.0,
                  network_ipam_refs_data_ipam_subnets_subnet_ip_prefix_len: 20,
                },
                network_ipam_refs_data_ipam_subnets_addr_from_start: 'true',
         }]
         },
        ]
    type: OS::ContrailV2::VirtualNetwork

  SubInterface-6:
    depends_on: [Sub_VN-6]
    properties:
      name: sub-interface-6
      virtual_machine_interface_properties: {virtual_machine_interface_properties_sub_interface_vlan_tag: 7}
      virtual_machine_interface_refs:
      - {get_resource: ParentPort}
      virtual_network_refs: [{ list_join: [':', { get_attr: [ Sub_VN-6, fq_name ] } ] }]
    type: OS::ContrailV2::VirtualMachineInterface

  VMI_sub_IP-6 :
    type: OS::ContrailV2::InstanceIp
    depends_on : [ SubInterface-6, My_VN ]
    properties :
      virtual_machine_interface_refs : [{ get_resource : SubInterface-6 }]
      virtual_network_refs : [{ list_join : [':', { get_attr : [ Sub_VN-6 , fq_name ] } ] }]
      instance_ip_address: 17.97.80.3

  Sub_VN-7:
    depends_on: [My_IPAM]
    properties:
      name: sub-scale-vn
      network_ipam_refs: [{ get_resource: My_IPAM }]
      network_ipam_refs_data:
        [{
          network_ipam_refs_data_ipam_subnets:
            [{
              network_ipam_refs_data_ipam_subnets_subnet:
                {
                  network_ipam_refs_data_ipam_subnets_subnet_ip_prefix: 17.97.96.0,
                  network_ipam_refs_data_ipam_subnets_subnet_ip_prefix_len: 20,
                },
                network_ipam_refs_data_ipam_subnets_addr_from_start: 'true',
         }]
         },
        ]
    type: OS::ContrailV2::VirtualNetwork

  SubInterface-7:
    depends_on: [Sub_VN-7]
    properties:
      name: sub-interface-7
      virtual_machine_interface_properties: {virtual_machine_interface_properties_sub_interface_vlan_tag: 8}
      virtual_machine_interface_refs:
      - {get_resource: ParentPort}
      virtual_network_refs: [{ list_join: [':', { get_attr: [ Sub_VN-7, fq_name ] } ] }]
    type: OS::ContrailV2::VirtualMachineInterface

  VMI_sub_IP-7 :
    type: OS::ContrailV2::InstanceIp
    depends_on : [ SubInterface-7, My_VN ]
    properties :
      virtual_machine_interface_refs : [{ get_resource : SubInterface-7 }]
      virtual_network_refs : [{ list_join : [':', { get_attr : [ Sub_VN-7 , fq_name ] } ] }]
      instance_ip_address: 17.97.96.3

  Sub_VN-8:
    depends_on: [My_IPAM]
    properties:
      name: sub-scale-vn
      network_ipam_refs: [{ get_resource: My_IPAM }]
      network_ipam_refs_data:
        [{
          network_ipam_refs_data_ipam_subnets:
            [{
              network_ipam_refs_data_ipam_subnets_subnet:
                {
                  network_ipam_refs_data_ipam_subnets_subnet_ip_prefix: 17.97.112.0,
                  network_ipam_refs_data_ipam_subnets_subnet_ip_prefix_len: 20,
                },
                network_ipam_refs_data_ipam_subnets_addr_from_start: 'true',
         }]
         },
        ]
    type: OS::ContrailV2::VirtualNetwork

  SubInterface-8:
    depends_on: [Sub_VN-8]
    properties:
      name: sub-interface-8
      virtual_machine_interface_properties: {virtual_machine_interface_properties_sub_interface_vlan_tag: 9}
      virtual_machine_interface_refs:
      - {get_resource: ParentPort}
      virtual_network_refs: [{ list_join: [':', { get_attr: [ Sub_VN-8, fq_name ] } ] }]
    type: OS::ContrailV2::VirtualMachineInterface

  VMI_sub_IP-8 :
    type: OS::ContrailV2::InstanceIp
    depends_on : [ SubInterface-8, My_VN ]
    properties :
      virtual_machine_interface_refs : [{ get_resource : SubInterface-8 }]
      virtual_network_refs : [{ list_join : [':', { get_attr : [ Sub_VN-8 , fq_name ] } ] }]
      instance_ip_address: 17.97.112.3

  Sub_VN-9:
    depends_on: [My_IPAM]
    properties:
      name: sub-scale-vn
      network_ipam_refs: [{ get_resource: My_IPAM }]
      network_ipam_refs_data:
        [{
          network_ipam_refs_data_ipam_subnets:
            [{
              network_ipam_refs_data_ipam_subnets_subnet:
                {
                  network_ipam_refs_data_ipam_subnets_subnet_ip_prefix: 17.97.128.0,
                  network_ipam_refs_data_ipam_subnets_subnet_ip_prefix_len: 20,
                },
                network_ipam_refs_data_ipam_subnets_addr_from_start: 'true',
         }]
         },
        ]
    type: OS::ContrailV2::VirtualNetwork

  SubInterface-9:
    depends_on: [Sub_VN-9]
    properties:
      name: sub-interface-9
      virtual_machine_interface_properties: {virtual_machine_interface_properties_sub_interface_vlan_tag: 10}
      virtual_machine_interface_refs:
      - {get_resource: ParentPort}
      virtual_network_refs: [{ list_join: [':', { get_attr: [ Sub_VN-9, fq_name ] } ] }]
    type: OS::ContrailV2::VirtualMachineInterface

  VMI_sub_IP-9 :
    type: OS::ContrailV2::InstanceIp
    depends_on : [ SubInterface-9, My_VN ]
    properties :
      virtual_machine_interface_refs : [{ get_resource : SubInterface-9 }]
      virtual_network_refs : [{ list_join : [':', { get_attr : [ Sub_VN-9 , fq_name ] } ] }]
      instance_ip_address: 17.97.128.3

  Sub_VN-10:
    depends_on: [My_IPAM]
    properties:
      name: sub-scale-vn
      network_ipam_refs: [{ get_resource: My_IPAM }]
      network_ipam_refs_data:
        [{
          network_ipam_refs_data_ipam_subnets:
            [{
              network_ipam_refs_data_ipam_subnets_subnet:
                {
                  network_ipam_refs_data_ipam_subnets_subnet_ip_prefix: 17.97.144.0,
                  network_ipam_refs_data_ipam_subnets_subnet_ip_prefix_len: 20,
                },
                network_ipam_refs_data_ipam_subnets_addr_from_start: 'true',
         }]
         },
        ]
    type: OS::ContrailV2::VirtualNetwork

  SubInterface-10:
    depends_on: [Sub_VN-10]
    properties:
      name: sub-interface-10
      virtual_machine_interface_properties: {virtual_machine_interface_properties_sub_interface_vlan_tag: 11}
      virtual_machine_interface_refs:
      - {get_resource: ParentPort}
      virtual_network_refs: [{ list_join: [':', { get_attr: [ Sub_VN-10, fq_name ] } ] }]
    type: OS::ContrailV2::VirtualMachineInterface

  VMI_sub_IP-10 :
    type: OS::ContrailV2::InstanceIp
    depends_on : [ SubInterface-10, My_VN ]
    properties :
      virtual_machine_interface_refs : [{ get_resource : SubInterface-10 }]
      virtual_network_refs : [{ list_join : [':', { get_attr : [ Sub_VN-10 , fq_name ] } ] }]
      instance_ip_address: 17.97.144.3

  Sub_VN-11:
    depends_on: [My_IPAM]
    properties:
      name: sub-scale-vn
      network_ipam_refs: [{ get_resource: My_IPAM }]
      network_ipam_refs_data:
        [{
          network_ipam_refs_data_ipam_subnets:
            [{
              network_ipam_refs_data_ipam_subnets_subnet:
                {
                  network_ipam_refs_data_ipam_subnets_subnet_ip_prefix: 17.97.160.0,
                  network_ipam_refs_data_ipam_subnets_subnet_ip_prefix_len: 20,
                },
                network_ipam_refs_data_ipam_subnets_addr_from_start: 'true',
         }]
         },
        ]
    type: OS::ContrailV2::VirtualNetwork

  SubInterface-11:
    depends_on: [Sub_VN-11]
    properties:
      name: sub-interface-11
      virtual_machine_interface_properties: {virtual_machine_interface_properties_sub_interface_vlan_tag: 12}
      virtual_machine_interface_refs:
      - {get_resource: ParentPort}
      virtual_network_refs: [{ list_join: [':', { get_attr: [ Sub_VN-11, fq_name ] } ] }]
    type: OS::ContrailV2::VirtualMachineInterface

  VMI_sub_IP-11 :
    type: OS::ContrailV2::InstanceIp
    depends_on : [ SubInterface-11, My_VN ]
    properties :
      virtual_machine_interface_refs : [{ get_resource : SubInterface-11 }]
      virtual_network_refs : [{ list_join : [':', { get_attr : [ Sub_VN-11 , fq_name ] } ] }]
      instance_ip_address: 17.97.160.3

  Sub_VN-12:
    depends_on: [My_IPAM]
    properties:
      name: sub-scale-vn
      network_ipam_refs: [{ get_resource: My_IPAM }]
      network_ipam_refs_data:
        [{
          network_ipam_refs_data_ipam_subnets:
            [{
              network_ipam_refs_data_ipam_subnets_subnet:
                {
                  network_ipam_refs_data_ipam_subnets_subnet_ip_prefix: 17.97.176.0,
                  network_ipam_refs_data_ipam_subnets_subnet_ip_prefix_len: 20,
                },
                network_ipam_refs_data_ipam_subnets_addr_from_start: 'true',
         }]
         },
        ]
    type: OS::ContrailV2::VirtualNetwork

  SubInterface-12:
    depends_on: [Sub_VN-12]
    properties:
      name: sub-interface-12
      virtual_machine_interface_properties: {virtual_machine_interface_properties_sub_interface_vlan_tag: 13}
      virtual_machine_interface_refs:
      - {get_resource: ParentPort}
      virtual_network_refs: [{ list_join: [':', { get_attr: [ Sub_VN-12, fq_name ] } ] }]
    type: OS::ContrailV2::VirtualMachineInterface

  VMI_sub_IP-12 :
    type: OS::ContrailV2::InstanceIp
    depends_on : [ SubInterface-12, My_VN ]
    properties :
      virtual_machine_interface_refs : [{ get_resource : SubInterface-12 }]
      virtual_network_refs : [{ list_join : [':', { get_attr : [ Sub_VN-12 , fq_name ] } ] }]
      instance_ip_address: 17.97.176.3

  Sub_VN-13:
    depends_on: [My_IPAM]
    properties:
      name: sub-scale-vn
      network_ipam_refs: [{ get_resource: My_IPAM }]
      network_ipam_refs_data:
        [{
          network_ipam_refs_data_ipam_subnets:
            [{
              network_ipam_refs_data_ipam_subnets_subnet:
                {
                  network_ipam_refs_data_ipam_subnets_subnet_ip_prefix: 17.97.192.0,
                  network_ipam_refs_data_ipam_subnets_subnet_ip_prefix_len: 20,
                },
                network_ipam_refs_data_ipam_subnets_addr_from_start: 'true',
         }]
         },
        ]
    type: OS::ContrailV2::VirtualNetwork

  SubInterface-13:
    depends_on: [Sub_VN-13]
    properties:
      name: sub-interface-13
      virtual_machine_interface_properties: {virtual_machine_interface_properties_sub_interface_vlan_tag: 14}
      virtual_machine_interface_refs:
      - {get_resource: ParentPort}
      virtual_network_refs: [{ list_join: [':', { get_attr: [ Sub_VN-13, fq_name ] } ] }]
    type: OS::ContrailV2::VirtualMachineInterface

  VMI_sub_IP-13 :
    type: OS::ContrailV2::InstanceIp
    depends_on : [ SubInterface-13, My_VN ]
    properties :
      virtual_machine_interface_refs : [{ get_resource : SubInterface-13 }]
      virtual_network_refs : [{ list_join : [':', { get_attr : [ Sub_VN-13 , fq_name ] } ] }]
      instance_ip_address: 17.97.192.3

  Sub_VN-14:
    depends_on: [My_IPAM]
    properties:
      name: sub-scale-vn
      network_ipam_refs: [{ get_resource: My_IPAM }]
      network_ipam_refs_data:
        [{
          network_ipam_refs_data_ipam_subnets:
            [{
              network_ipam_refs_data_ipam_subnets_subnet:
                {
                  network_ipam_refs_data_ipam_subnets_subnet_ip_prefix: 17.97.208.0,
                  network_ipam_refs_data_ipam_subnets_subnet_ip_prefix_len: 20,
                },
                network_ipam_refs_data_ipam_subnets_addr_from_start: 'true',
         }]
         },
        ]
    type: OS::ContrailV2::VirtualNetwork

  SubInterface-14:
    depends_on: [Sub_VN-14]
    properties:
      name: sub-interface-14
      virtual_machine_interface_properties: {virtual_machine_interface_properties_sub_interface_vlan_tag: 15}
      virtual_machine_interface_refs:
      - {get_resource: ParentPort}
      virtual_network_refs: [{ list_join: [':', { get_attr: [ Sub_VN-14, fq_name ] } ] }]
    type: OS::ContrailV2::VirtualMachineInterface

  VMI_sub_IP-14 :
    type: OS::ContrailV2::InstanceIp
    depends_on : [ SubInterface-14, My_VN ]
    properties :
      virtual_machine_interface_refs : [{ get_resource : SubInterface-14 }]
      virtual_network_refs : [{ list_join : [':', { get_attr : [ Sub_VN-14 , fq_name ] } ] }]
      instance_ip_address: 17.97.208.3

  Sub_VN-15:
    depends_on: [My_IPAM]
    properties:
      name: sub-scale-vn
      network_ipam_refs: [{ get_resource: My_IPAM }]
      network_ipam_refs_data:
        [{
          network_ipam_refs_data_ipam_subnets:
            [{
              network_ipam_refs_data_ipam_subnets_subnet:
                {
                  network_ipam_refs_data_ipam_subnets_subnet_ip_prefix: 17.97.224.0,
                  network_ipam_refs_data_ipam_subnets_subnet_ip_prefix_len: 20,
                },
                network_ipam_refs_data_ipam_subnets_addr_from_start: 'true',
         }]
         },
        ]
    type: OS::ContrailV2::VirtualNetwork

  SubInterface-15:
    depends_on: [Sub_VN-15]
    properties:
      name: sub-interface-15
      virtual_machine_interface_properties: {virtual_machine_interface_properties_sub_interface_vlan_tag: 16}
      virtual_machine_interface_refs:
      - {get_resource: ParentPort}
      virtual_network_refs: [{ list_join: [':', { get_attr: [ Sub_VN-15, fq_name ] } ] }]
    type: OS::ContrailV2::VirtualMachineInterface

  VMI_sub_IP-15 :
    type: OS::ContrailV2::InstanceIp
    depends_on : [ SubInterface-15, My_VN ]
    properties :
      virtual_machine_interface_refs : [{ get_resource : SubInterface-15 }]
      virtual_network_refs : [{ list_join : [':', { get_attr : [ Sub_VN-15 , fq_name ] } ] }]
      instance_ip_address: 17.97.224.3

  Sub_VN-16:
    depends_on: [My_IPAM]
    properties:
      name: sub-scale-vn
      network_ipam_refs: [{ get_resource: My_IPAM }]
      network_ipam_refs_data:
        [{
          network_ipam_refs_data_ipam_subnets:
            [{
              network_ipam_refs_data_ipam_subnets_subnet:
                {
                  network_ipam_refs_data_ipam_subnets_subnet_ip_prefix: 17.97.240.0,
                  network_ipam_refs_data_ipam_subnets_subnet_ip_prefix_len: 20,
                },
                network_ipam_refs_data_ipam_subnets_addr_from_start: 'true',
         }]
         },
        ]
    type: OS::ContrailV2::VirtualNetwork

  SubInterface-16:
    depends_on: [Sub_VN-16]
    properties:
      name: sub-interface-16
      virtual_machine_interface_properties: {virtual_machine_interface_properties_sub_interface_vlan_tag: 17}
      virtual_machine_interface_refs:
      - {get_resource: ParentPort}
      virtual_network_refs: [{ list_join: [':', { get_attr: [ Sub_VN-16, fq_name ] } ] }]
    type: OS::ContrailV2::VirtualMachineInterface

  VMI_sub_IP-16 :
    type: OS::ContrailV2::InstanceIp
    depends_on : [ SubInterface-16, My_VN ]
    properties :
      virtual_machine_interface_refs : [{ get_resource : SubInterface-16 }]
      virtual_network_refs : [{ list_join : [':', { get_attr : [ Sub_VN-16 , fq_name ] } ] }]
      instance_ip_address: 17.97.240.3


  VSRX-scale:
    depends_on: [My_VN, ParentPort, SubInterface-1, SubInterface-2, SubInterface-3, SubInterface-4, SubInterface-5, SubInterface-6, SubInterface-7, SubInterface-8, SubInterface-9, SubInterface-10, SubInterface-11, SubInterface-12, SubInterface-13, SubInterface-14, SubInterface-15, SubInterface-16, ]
    properties:
      config_drive: 'true'
      user_data_format: RAW
      # personality: { /config/junos-config/configuration.txt: { get_file: /contrail-test/serial_scripts/solution/topology/mini_deployment/vsrx_config/bgpaas_config.txt } }
      flavor: contrail_flavor_2cpu
      image: vsrx
      name: VSRX-scale
      networks:
      - port: {get_resource: ParentPort}
    type: OS::Nova::Server


  BGP_TAGGED-1:
    depends_on: [SubInterface-1, SubInterface-2, SubInterface-3, SubInterface-4, SubInterface-5, SubInterface-6, SubInterface-7, SubInterface-8, SubInterface-9, SubInterface-10, SubInterface-11, SubInterface-12, SubInterface-13, SubInterface-14, SubInterface-15, SubInterface-16, ]
    properties:
      autonomous_system: 64500
      bgpaas_ip_address: 17.97.0.3
      bgpaas_session_attributes:
        bgpaas_session_attributes_address_families:
          bgpaas_session_attributes_address_families_family: [inet]
        bgpaas_session_attributes_as_override: true
      name: BGPAAS-1
      virtual_machine_interface_refs:
      - {get_resource: SubInterface-1}
    type: OS::ContrailV2::BgpAsAService

  BGP_TAGGED-2:
    depends_on: [SubInterface-1, SubInterface-2, SubInterface-3, SubInterface-4, SubInterface-5, SubInterface-6, SubInterface-7, SubInterface-8, SubInterface-9, SubInterface-10, SubInterface-11, SubInterface-12, SubInterface-13, SubInterface-14, SubInterface-15, SubInterface-16, ]
    properties:
      autonomous_system: 64500
      bgpaas_ip_address: 17.97.16.3
      bgpaas_session_attributes:
        bgpaas_session_attributes_address_families:
          bgpaas_session_attributes_address_families_family: [inet]
        bgpaas_session_attributes_as_override: true
      name: BGPAAS-2
      virtual_machine_interface_refs:
      - {get_resource: SubInterface-2}
    type: OS::ContrailV2::BgpAsAService

  BGP_TAGGED-3:
    depends_on: [SubInterface-1, SubInterface-2, SubInterface-3, SubInterface-4, SubInterface-5, SubInterface-6, SubInterface-7, SubInterface-8, SubInterface-9, SubInterface-10, SubInterface-11, SubInterface-12, SubInterface-13, SubInterface-14, SubInterface-15, SubInterface-16, ]
    properties:
      autonomous_system: 64500
      bgpaas_ip_address: 17.97.32.3
      bgpaas_session_attributes:
        bgpaas_session_attributes_address_families:
          bgpaas_session_attributes_address_families_family: [inet]
        bgpaas_session_attributes_as_override: true
      name: BGPAAS-3
      virtual_machine_interface_refs:
      - {get_resource: SubInterface-3}
    type: OS::ContrailV2::BgpAsAService

  BGP_TAGGED-4:
    depends_on: [SubInterface-1, SubInterface-2, SubInterface-3, SubInterface-4, SubInterface-5, SubInterface-6, SubInterface-7, SubInterface-8, SubInterface-9, SubInterface-10, SubInterface-11, SubInterface-12, SubInterface-13, SubInterface-14, SubInterface-15, SubInterface-16, ]
    properties:
      autonomous_system: 64500
      bgpaas_ip_address: 17.97.48.3
      bgpaas_session_attributes:
        bgpaas_session_attributes_address_families:
          bgpaas_session_attributes_address_families_family: [inet]
        bgpaas_session_attributes_as_override: true
      name: BGPAAS-4
      virtual_machine_interface_refs:
      - {get_resource: SubInterface-4}
    type: OS::ContrailV2::BgpAsAService

  BGP_TAGGED-5:
    depends_on: [SubInterface-1, SubInterface-2, SubInterface-3, SubInterface-4, SubInterface-5, SubInterface-6, SubInterface-7, SubInterface-8, SubInterface-9, SubInterface-10, SubInterface-11, SubInterface-12, SubInterface-13, SubInterface-14, SubInterface-15, SubInterface-16, ]
    properties:
      autonomous_system: 64500
      bgpaas_ip_address: 17.97.64.3
      bgpaas_session_attributes:
        bgpaas_session_attributes_address_families:
          bgpaas_session_attributes_address_families_family: [inet]
        bgpaas_session_attributes_as_override: true
      name: BGPAAS-5
      virtual_machine_interface_refs:
      - {get_resource: SubInterface-5}
    type: OS::ContrailV2::BgpAsAService

  BGP_TAGGED-6:
    depends_on: [SubInterface-1, SubInterface-2, SubInterface-3, SubInterface-4, SubInterface-5, SubInterface-6, SubInterface-7, SubInterface-8, SubInterface-9, SubInterface-10, SubInterface-11, SubInterface-12, SubInterface-13, SubInterface-14, SubInterface-15, SubInterface-16, ]
    properties:
      autonomous_system: 64500
      bgpaas_ip_address: 17.97.80.3
      bgpaas_session_attributes:
        bgpaas_session_attributes_address_families:
          bgpaas_session_attributes_address_families_family: [inet]
        bgpaas_session_attributes_as_override: true
      name: BGPAAS-6
      virtual_machine_interface_refs:
      - {get_resource: SubInterface-6}
    type: OS::ContrailV2::BgpAsAService

  BGP_TAGGED-7:
    depends_on: [SubInterface-1, SubInterface-2, SubInterface-3, SubInterface-4, SubInterface-5, SubInterface-6, SubInterface-7, SubInterface-8, SubInterface-9, SubInterface-10, SubInterface-11, SubInterface-12, SubInterface-13, SubInterface-14, SubInterface-15, SubInterface-16, ]
    properties:
      autonomous_system: 64500
      bgpaas_ip_address: 17.97.96.3
      bgpaas_session_attributes:
        bgpaas_session_attributes_address_families:
          bgpaas_session_attributes_address_families_family: [inet]
        bgpaas_session_attributes_as_override: true
      name: BGPAAS-7
      virtual_machine_interface_refs:
      - {get_resource: SubInterface-7}
    type: OS::ContrailV2::BgpAsAService

  BGP_TAGGED-8:
    depends_on: [SubInterface-1, SubInterface-2, SubInterface-3, SubInterface-4, SubInterface-5, SubInterface-6, SubInterface-7, SubInterface-8, SubInterface-9, SubInterface-10, SubInterface-11, SubInterface-12, SubInterface-13, SubInterface-14, SubInterface-15, SubInterface-16, ]
    properties:
      autonomous_system: 64500
      bgpaas_ip_address: 17.97.112.3
      bgpaas_session_attributes:
        bgpaas_session_attributes_address_families:
          bgpaas_session_attributes_address_families_family: [inet]
        bgpaas_session_attributes_as_override: true
      name: BGPAAS-8
      virtual_machine_interface_refs:
      - {get_resource: SubInterface-8}
    type: OS::ContrailV2::BgpAsAService

  BGP_TAGGED-9:
    depends_on: [SubInterface-1, SubInterface-2, SubInterface-3, SubInterface-4, SubInterface-5, SubInterface-6, SubInterface-7, SubInterface-8, SubInterface-9, SubInterface-10, SubInterface-11, SubInterface-12, SubInterface-13, SubInterface-14, SubInterface-15, SubInterface-16, ]
    properties:
      autonomous_system: 64500
      bgpaas_ip_address: 17.97.128.3
      bgpaas_session_attributes:
        bgpaas_session_attributes_address_families:
          bgpaas_session_attributes_address_families_family: [inet]
        bgpaas_session_attributes_as_override: true
      name: BGPAAS-9
      virtual_machine_interface_refs:
      - {get_resource: SubInterface-9}
    type: OS::ContrailV2::BgpAsAService

  BGP_TAGGED-10:
    depends_on: [SubInterface-1, SubInterface-2, SubInterface-3, SubInterface-4, SubInterface-5, SubInterface-6, SubInterface-7, SubInterface-8, SubInterface-9, SubInterface-10, SubInterface-11, SubInterface-12, SubInterface-13, SubInterface-14, SubInterface-15, SubInterface-16, ]
    properties:
      autonomous_system: 64500
      bgpaas_ip_address: 17.97.144.3
      bgpaas_session_attributes:
        bgpaas_session_attributes_address_families:
          bgpaas_session_attributes_address_families_family: [inet]
        bgpaas_session_attributes_as_override: true
      name: BGPAAS-10
      virtual_machine_interface_refs:
      - {get_resource: SubInterface-10}
    type: OS::ContrailV2::BgpAsAService

  BGP_TAGGED-11:
    depends_on: [SubInterface-1, SubInterface-2, SubInterface-3, SubInterface-4, SubInterface-5, SubInterface-6, SubInterface-7, SubInterface-8, SubInterface-9, SubInterface-10, SubInterface-11, SubInterface-12, SubInterface-13, SubInterface-14, SubInterface-15, SubInterface-16, ]
    properties:
      autonomous_system: 64500
      bgpaas_ip_address: 17.97.160.3
      bgpaas_session_attributes:
        bgpaas_session_attributes_address_families:
          bgpaas_session_attributes_address_families_family: [inet]
        bgpaas_session_attributes_as_override: true
      name: BGPAAS-11
      virtual_machine_interface_refs:
      - {get_resource: SubInterface-11}
    type: OS::ContrailV2::BgpAsAService

  BGP_TAGGED-12:
    depends_on: [SubInterface-1, SubInterface-2, SubInterface-3, SubInterface-4, SubInterface-5, SubInterface-6, SubInterface-7, SubInterface-8, SubInterface-9, SubInterface-10, SubInterface-11, SubInterface-12, SubInterface-13, SubInterface-14, SubInterface-15, SubInterface-16, ]
    properties:
      autonomous_system: 64500
      bgpaas_ip_address: 17.97.176.3
      bgpaas_session_attributes:
        bgpaas_session_attributes_address_families:
          bgpaas_session_attributes_address_families_family: [inet]
        bgpaas_session_attributes_as_override: true
      name: BGPAAS-12
      virtual_machine_interface_refs:
      - {get_resource: SubInterface-12}
    type: OS::ContrailV2::BgpAsAService

  BGP_TAGGED-13:
    depends_on: [SubInterface-1, SubInterface-2, SubInterface-3, SubInterface-4, SubInterface-5, SubInterface-6, SubInterface-7, SubInterface-8, SubInterface-9, SubInterface-10, SubInterface-11, SubInterface-12, SubInterface-13, SubInterface-14, SubInterface-15, SubInterface-16, ]
    properties:
      autonomous_system: 64500
      bgpaas_ip_address: 17.97.192.3
      bgpaas_session_attributes:
        bgpaas_session_attributes_address_families:
          bgpaas_session_attributes_address_families_family: [inet]
        bgpaas_session_attributes_as_override: true
      name: BGPAAS-13
      virtual_machine_interface_refs:
      - {get_resource: SubInterface-13}
    type: OS::ContrailV2::BgpAsAService

  BGP_TAGGED-14:
    depends_on: [SubInterface-1, SubInterface-2, SubInterface-3, SubInterface-4, SubInterface-5, SubInterface-6, SubInterface-7, SubInterface-8, SubInterface-9, SubInterface-10, SubInterface-11, SubInterface-12, SubInterface-13, SubInterface-14, SubInterface-15, SubInterface-16, ]
    properties:
      autonomous_system: 64500
      bgpaas_ip_address: 17.97.208.3
      bgpaas_session_attributes:
        bgpaas_session_attributes_address_families:
          bgpaas_session_attributes_address_families_family: [inet]
        bgpaas_session_attributes_as_override: true
      name: BGPAAS-14
      virtual_machine_interface_refs:
      - {get_resource: SubInterface-14}
    type: OS::ContrailV2::BgpAsAService

  BGP_TAGGED-15:
    depends_on: [SubInterface-1, SubInterface-2, SubInterface-3, SubInterface-4, SubInterface-5, SubInterface-6, SubInterface-7, SubInterface-8, SubInterface-9, SubInterface-10, SubInterface-11, SubInterface-12, SubInterface-13, SubInterface-14, SubInterface-15, SubInterface-16, ]
    properties:
      autonomous_system: 64500
      bgpaas_ip_address: 17.97.224.3
      bgpaas_session_attributes:
        bgpaas_session_attributes_address_families:
          bgpaas_session_attributes_address_families_family: [inet]
        bgpaas_session_attributes_as_override: true
      name: BGPAAS-15
      virtual_machine_interface_refs:
      - {get_resource: SubInterface-15}
    type: OS::ContrailV2::BgpAsAService

  BGP_TAGGED-16:
    depends_on: [SubInterface-1, SubInterface-2, SubInterface-3, SubInterface-4, SubInterface-5, SubInterface-6, SubInterface-7, SubInterface-8, SubInterface-9, SubInterface-10, SubInterface-11, SubInterface-12, SubInterface-13, SubInterface-14, SubInterface-15, SubInterface-16, ]
    properties:
      autonomous_system: 64500
      bgpaas_ip_address: 17.97.240.3
      bgpaas_session_attributes:
        bgpaas_session_attributes_address_families:
          bgpaas_session_attributes_address_families_family: [inet]
        bgpaas_session_attributes_as_override: true
      name: BGPAAS-16
      virtual_machine_interface_refs:
      - {get_resource: SubInterface-16}
    type: OS::ContrailV2::BgpAsAService
