2021-03-31 07:41:23,037 - DEBUG - Not creating keypair since it exists
2021-03-31 07:41:23,137 - INFO - Domain Default found not creating
2021-03-31 07:41:24,074 - INFO - Project ctest-TestFlowScale-02872984 not found, creating it
2021-03-31 07:41:24,976 - INFO - Created Project:ctest-TestFlowScale-02872984, ID : 9d29df50-c017-48aa-8929-d46279e2a0ca 
2021-03-31 07:41:28,428 - INFO - Reloading vrouter module on 10.204.216.98
2021-03-31 07:41:32,477 - INFO - Cmd output info: vrouter_vrouter-agent_1
rmmod: ERROR: Module vrouter is in use
              total        used        free      shared  buff/cache   available
Mem:      263855792    10169028   253277356       11044      409408   252865376
Swap:             0           0           0
              total        used        free      shared  buff/cache   available
Mem:      263855792    10168352   253471800       11044      215640   252916140
Swap:             0           0           0
vrouter_vrouter-agent_1
2021-03-31 07:41:32,774 - INFO - 10.204.216.98
2021-03-31 07:41:32,774 - INFO -   vrouter
2021-03-31 07:41:32,789 - INFO -     vrouter-nodemgr:active
2021-03-31 07:41:32,798 - INFO -     agent:initializing
2021-03-31 07:41:43,037 - INFO - 10.204.216.98
2021-03-31 07:41:43,037 - INFO -   vrouter
2021-03-31 07:41:43,047 - INFO -     vrouter-nodemgr:active
2021-03-31 07:41:43,057 - INFO -     agent:active
2021-03-31 07:41:43,057 - INFO - All the contrail services are up on nodes ['10.204.216.98']
2021-03-31 07:41:43,775 - INFO - Flow Table limit                     6291456
2021-03-31 07:41:43,776 - INFO - Running docker cp vrouter_vrouter-agent_1:/actions.sh . on 10.204.216.98
2021-03-31 07:41:44,106 - INFO - Running awk 'BEGIN { section=0; doprint=1 } /\[DEFAULT\]/ { section=1 } /flow_cache_timeout/ { if (section) {doprint=0; section=0} } { if (doprint) {print} else {doprint=1} }'  actions.sh > actions.sh.modified on 10.204.216.98
2021-03-31 07:41:44,243 - INFO - Running mv actions.sh.modified actions.sh; chmod +x actions.sh on 10.204.216.98
2021-03-31 07:41:44,372 - INFO - Running grep -q -F 'flow_cache_timeout=120' actions.sh ||sed -i  '/\[DEFAULT\]/a flow_cache_timeout=120' actions.sh on 10.204.216.98
2021-03-31 07:41:44,502 - INFO - Running docker cp actions.sh vrouter_vrouter-agent_1:/actions.sh on 10.204.216.98
2021-03-31 07:41:45,335 - INFO - Running docker restart vrouter_vrouter-agent_1 -t 60 on 10.204.216.98
2021-03-31 07:41:54,430 - INFO - Flow_cache_timeout set to 120 on 10.204.216.98
2021-03-31 07:41:56,068 - INFO - Created VN ctest-vn-44369398
2021-03-31 07:41:59,688 - INFO - VM ([<Server: ctest-TestFlowScale-02872984-19822257>]) created on node: (nodem9), Zone: (nova:nodem9)
2021-03-31 07:41:59,689 - INFO - Waiting for VM ctest-TestFlowScale-02872984-19822257 to be up..
2021-03-31 07:42:05,126 - INFO - VM name : ctest-TestFlowScale-02872984-19822257
2021-03-31 07:42:11,437 - INFO - Ping to Metadata IP 169.254.0.3 of VM ctest-TestFlowScale-02872984-19822257 passed
2021-03-31 07:42:38,130 - INFO - ================================================================================
2021-03-31 07:42:38,130 - INFO - STARTING TEST    : test_flow_scale
2021-03-31 07:42:38,132 - INFO - TEST DESCRIPTION : 
        Description: Test to scale 1 million flows
         Test steps:
                1. Add PHYSICAL_INTERFACE in vrouter env if absent
                2. Set flow entries to 1 million in vrouter module
                3. Increase flow timeout to high value like 9999
                4. Send traffic through hping3 changing the source port with each iteration
                5. Check for flow count in flow table
         Pass criteria: Flow count greater than 1 million
         Maintainer : nuthanc@juniper.net 
        
2021-03-31 07:42:39,359 - WARNING - Test is running with cores: {'10.204.216.96': ['core.contrail-collec.1.nodem7.1617040979']}
2021-03-31 07:42:39,360 - INFO - Initial checks done. Running the testcase now
2021-03-31 07:42:39,360 - INFO - 
2021-03-31 07:42:39,361 - INFO - Starting hping3  on ctest-TestFlowScale-02872984-19822257, args:  --udp   --keep   --destport ++1000  --baseport 5001  --count 1048576  --interval u1 
2021-03-31 07:42:50,186 - INFO - Running command for 5s
2021-03-31 07:42:57,175 - INFO - Flow count: 131102
2021-03-31 07:42:57,602 - INFO - vrouter agent memory usage: top - 13:12:57 up 1 day, 23:14,  2 users,  load average: 0.67, 0.54, 0.60
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.3 us,  0.3 sy,  0.0 ni, 99.3 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385579+total, 25195843+free, 11511604 used,   385752 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 25152251+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
36210 root      20   0 3197100   1.6g 595452 S  31.2  0.6   0:38.59 contrail-vroute
1670052
              total        used        free      shared  buff/cache   available
Mem:           251G         10G        240G         10M        377M        239G
Swap:            0B          0B          0B
2021-03-31 07:42:57,603 - INFO - Starting hping3  on ctest-TestFlowScale-02872984-19822257, args:  --udp   --keep   --destport ++1000  --baseport 5002  --count 1048576  --interval u1 
2021-03-31 07:42:57,697 - INFO - Running command for 5s
2021-03-31 07:43:04,522 - INFO - Flow count: 262178
2021-03-31 07:43:04,907 - INFO - vrouter agent memory usage: top - 13:13:04 up 1 day, 23:14,  2 users,  load average: 1.08, 0.63, 0.63
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.5 us,  0.2 sy,  0.0 ni, 99.3 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385579+total, 25136321+free, 12107564 used,   385008 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 25092656+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
36210 root      20   0 3792044   2.4g 890608 S  20.0  1.0   1:09.92 contrail-vroute
2552736
              total        used        free      shared  buff/cache   available
Mem:           251G         11G        239G         10M        375M        239G
Swap:            0B          0B          0B
2021-03-31 07:43:04,908 - INFO - Starting hping3  on ctest-TestFlowScale-02872984-19822257, args:  --udp   --keep   --destport ++1000  --baseport 5003  --count 1048576  --interval u1 
2021-03-31 07:43:05,009 - INFO - Running command for 5s
2021-03-31 07:43:11,885 - INFO - Flow count: 389142
2021-03-31 07:43:12,253 - INFO - vrouter agent memory usage: top - 13:13:12 up 1 day, 23:14,  2 users,  load average: 1.72, 0.77, 0.68
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.5 us,  0.5 sy,  0.0 ni, 99.0 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385579+total, 25079094+free, 12679072 used,   385776 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 25035507+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
36210 root      20   0 4355244   3.0g 926428 S  40.0  1.2   1:40.56 contrail-vroute
3158284
              total        used        free      shared  buff/cache   available
Mem:           251G         12G        239G         10M        376M        238G
Swap:            0B          0B          0B
2021-03-31 07:43:12,254 - INFO - Starting hping3  on ctest-TestFlowScale-02872984-19822257, args:  --udp   --keep   --destport ++1000  --baseport 5004  --count 1048576  --interval u1 
2021-03-31 07:43:12,357 - INFO - Running command for 5s
2021-03-31 07:43:19,256 - INFO - Flow count: 513254
2021-03-31 07:43:19,627 - INFO - vrouter agent memory usage: top - 13:13:19 up 1 day, 23:14,  2 users,  load average: 1.74, 0.79, 0.69
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.5 us,  0.3 sy,  0.0 ni, 99.2 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385579+total, 25023404+free, 13234720 used,   387020 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24979942+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
36210 root      20   0 4915380   3.8g   1.1g S  26.7  1.5   2:10.97 contrail-vroute
3966304
              total        used        free      shared  buff/cache   available
Mem:           251G         12G        238G         10M        377M        238G
Swap:            0B          0B          0B
2021-03-31 07:43:19,628 - INFO - Starting hping3  on ctest-TestFlowScale-02872984-19822257, args:  --udp   --keep   --destport ++1000  --baseport 5005  --count 1048576  --interval u1 
2021-03-31 07:43:19,743 - INFO - Running command for 5s
2021-03-31 07:43:26,619 - INFO - Flow count: 634270
2021-03-31 07:43:26,996 - INFO - vrouter agent memory usage: top - 13:13:26 up 1 day, 23:14,  2 users,  load average: 2.40, 0.96, 0.74
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.5 us,  0.2 sy,  0.0 ni, 99.2 id,  0.2 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385579+total, 24969049+free, 13778544 used,   386748 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24925556+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
36210 root      20   0 5464244   4.5g   1.3g S  33.3  1.8   2:41.55 contrail-vroute
4667044
              total        used        free      shared  buff/cache   available
Mem:           251G         13G        238G         10M        377M        237G
Swap:            0B          0B          0B
2021-03-31 07:43:26,997 - INFO - Starting hping3  on ctest-TestFlowScale-02872984-19822257, args:  --udp   --keep   --destport ++1000  --baseport 5006  --count 1048576  --interval u1 
2021-03-31 07:43:27,099 - INFO - Running command for 5s
2021-03-31 07:43:33,952 - INFO - Flow count: 765344
2021-03-31 07:43:34,326 - INFO - vrouter agent memory usage: top - 13:13:34 up 1 day, 23:14,  2 users,  load average: 2.93, 1.10, 0.79
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.2 us,  0.2 sy,  0.0 ni, 99.7 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385579+total, 24910052+free, 14367812 used,   387452 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24866630+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
36210 root      20   0 6048948   5.0g   1.3g S  26.7  2.0   3:13.02 contrail-vroute
5272524
              total        used        free      shared  buff/cache   available
Mem:           251G         13G        237G         10M        378M        237G
Swap:            0B          0B          0B
2021-03-31 07:43:34,327 - INFO - Starting hping3  on ctest-TestFlowScale-02872984-19822257, args:  --udp   --keep   --destport ++1000  --baseport 5007  --count 1048576  --interval u1 
2021-03-31 07:43:34,430 - INFO - Running command for 5s
2021-03-31 07:43:41,307 - INFO - Flow count: 896422
2021-03-31 07:43:41,680 - INFO - vrouter agent memory usage: top - 13:13:41 up 1 day, 23:15,  2 users,  load average: 3.15, 1.21, 0.83
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  1.0 us,  0.3 sy,  0.0 ni, 98.7 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385579+total, 24851366+free, 14955740 used,   386392 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24807838+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
36210 root      20   0 6640820   5.6g   1.3g S  40.0  2.2   3:43.64 contrail-vroute
5893344
              total        used        free      shared  buff/cache   available
Mem:           251G         14G        237G         10M        377M        236G
Swap:            0B          0B          0B
2021-03-31 07:43:41,681 - INFO - Starting hping3  on ctest-TestFlowScale-02872984-19822257, args:  --udp   --keep   --destport ++1000  --baseport 5008  --count 1048576  --interval u1 
2021-03-31 07:43:41,783 - INFO - Running command for 5s
2021-03-31 07:43:48,627 - INFO - Flow count: 1025406
2021-03-31 07:43:49,000 - INFO - vrouter agent memory usage: top - 13:13:48 up 1 day, 23:15,  2 users,  load average: 3.22, 1.26, 0.84
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  1.0 us,  0.7 sy,  0.0 ni, 98.3 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385579+total, 24793176+free, 15537472 used,   386556 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24749651+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
36210 root      20   0 7217332   6.2g   1.4g S  53.3  2.5   4:14.95 contrail-vroute
6532324
              total        used        free      shared  buff/cache   available
Mem:           251G         14G        236G         10M        377M        236G
Swap:            0B          0B          0B
2021-03-31 07:43:49,001 - INFO - Starting hping3  on ctest-TestFlowScale-02872984-19822257, args:  --udp   --keep   --destport ++1000  --baseport 5009  --count 1048576  --interval u1 
2021-03-31 07:43:49,096 - INFO - Running command for 5s
2021-03-31 07:43:55,931 - INFO - Flow count: 1155412
2021-03-31 07:43:56,312 - INFO - vrouter agent memory usage: top - 13:13:56 up 1 day, 23:15,  2 users,  load average: 3.97, 1.48, 0.92
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  1.0 us,  0.3 sy,  0.0 ni, 98.7 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385579+total, 24734652+free, 16121832 used,   387432 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24691230+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
36210 root      20   0 7802036   6.8g   1.4g S  56.2  2.7   4:46.85 contrail-vroute
7180708
              total        used        free      shared  buff/cache   available
Mem:           251G         15G        235G         10M        378M        235G
Swap:            0B          0B          0B
2021-03-31 07:43:56,313 - INFO - Starting hping3  on ctest-TestFlowScale-02872984-19822257, args:  --udp   --keep   --destport ++1000  --baseport 5010  --count 1048576  --interval u1 
2021-03-31 07:43:56,415 - INFO - Running command for 5s
2021-03-31 07:44:03,222 - INFO - Flow count: 1283466
2021-03-31 07:44:03,596 - INFO - vrouter agent memory usage: top - 13:14:03 up 1 day, 23:15,  2 users,  load average: 4.13, 1.55, 0.95
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.7 us,  0.7 sy,  0.0 ni, 98.7 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385579+total, 24677108+free, 16697372 used,   387328 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24633670+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
36210 root      20   0 8374452   7.4g   1.5g S  46.7  3.0   5:19.41 contrail-vroute
7800600
              total        used        free      shared  buff/cache   available
Mem:           251G         15G        235G         10M        378M        234G
Swap:            0B          0B          0B
2021-03-31 07:44:03,596 - INFO - Starting hping3  on ctest-TestFlowScale-02872984-19822257, args:  --udp   --keep   --destport ++1000  --baseport 5011  --count 1048576  --interval u1 
2021-03-31 07:44:03,695 - INFO - Running command for 5s
2021-03-31 07:44:10,512 - INFO - Flow count: 1412396
2021-03-31 07:44:10,884 - INFO - vrouter agent memory usage: top - 13:14:10 up 1 day, 23:15,  2 users,  load average: 4.02, 1.62, 0.97
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  1.3 us,  0.8 sy,  0.0 ni, 97.9 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385579+total, 24618544+free, 17283004 used,   387348 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24575108+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
36210 root      20   0 8958132   8.0g   1.5g S  66.7  3.2   5:51.56 contrail-vroute
8386692
              total        used        free      shared  buff/cache   available
Mem:           251G         16G        234G         10M        378M        234G
Swap:            0B          0B          0B
2021-03-31 07:44:12,522 - INFO - Flow count: 1412396
2021-03-31 07:44:12,522 - INFO - Wait 120s for flows to get cleared
2021-03-31 07:46:12,523 - INFO - Checking flow_count and memory usage of vrouter: Taking 3 readings
2021-03-31 07:46:12,524 - INFO - Reading 1 after waiting is done
2021-03-31 07:46:14,127 - INFO - Flow count: 191368
2021-03-31 07:46:14,512 - INFO - vrouter agent memory usage: top - 13:16:14 up 1 day, 23:17,  2 users,  load average: 1.59, 1.37, 0.96
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.3 us,  0.2 sy,  0.0 ni, 99.5 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385579+total, 24618409+free, 17283796 used,   387908 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24575032+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
36210 root      20   0 8961204   8.0g   1.5g S  20.0  3.2   9:30.76 contrail-vroute
8410136
              total        used        free      shared  buff/cache   available
Mem:           251G         16G        234G         10M        378M        234G
Swap:            0B          0B          0B
2021-03-31 07:46:16,514 - INFO - Reading 2 after waiting is done
2021-03-31 07:46:18,104 - INFO - Flow count: 191368
2021-03-31 07:46:18,480 - INFO - vrouter agent memory usage: top - 13:16:18 up 1 day, 23:17,  2 users,  load average: 1.63, 1.38, 0.96
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.8 us,  0.5 sy,  0.0 ni, 98.7 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385579+total, 24618564+free, 17282204 used,   387940 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24575190+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
36210 root      20   0 8961204   8.0g   1.5g S  33.3  3.2   9:32.26 contrail-vroute
8410052
              total        used        free      shared  buff/cache   available
Mem:           251G         16G        234G         10M        378M        234G
Swap:            0B          0B          0B
2021-03-31 07:46:20,481 - INFO - Reading 3 after waiting is done
2021-03-31 07:46:22,072 - INFO - Flow count: 191366
2021-03-31 07:46:22,439 - INFO - vrouter agent memory usage: top - 13:16:22 up 1 day, 23:17,  2 users,  load average: 1.50, 1.36, 0.96
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.5 us,  0.5 sy,  0.0 ni, 99.0 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385579+total, 24618331+free, 17284512 used,   387964 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24574961+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
36210 root      20   0 8961204   8.0g   1.5g S  37.5  3.2   9:33.80 contrail-vroute
8410424
              total        used        free      shared  buff/cache   available
Mem:           251G         16G        234G         10M        378M        234G
Swap:            0B          0B          0B
2021-03-31 07:46:24,440 - INFO - Adding 100000 flows
2021-03-31 07:46:24,441 - INFO - Starting hping3  on ctest-TestFlowScale-02872984-19822257, args:  --udp   --destport ++1000  --baseport 1000  --count 100000  --interval u1 
2021-03-31 07:46:24,508 - INFO - Running hping command for 5s
2021-03-31 07:46:31,349 - INFO - Checking flow_count and memory usage of vrouter: Taking 3 readings
2021-03-31 07:46:31,349 - INFO - Reading 1 after add
2021-03-31 07:46:32,929 - INFO - Flow count: 93232
2021-03-31 07:46:33,282 - INFO - vrouter agent memory usage: top - 13:16:33 up 1 day, 23:17,  2 users,  load average: 1.34, 1.33, 0.95
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  7.7 us,  3.5 sy,  0.0 ni, 88.8 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385579+total, 24618723+free, 17279252 used,   389312 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24575323+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
36210 root      20   0 8961204   8.0g   1.5g S 453.3  3.2  10:09.14 contrail-vroute
8412788
              total        used        free      shared  buff/cache   available
Mem:           251G         16G        234G         10M        380M        234G
Swap:            0B          0B          0B
2021-03-31 07:46:35,284 - INFO - Reading 2 after add
2021-03-31 07:46:36,841 - INFO - Flow count: 44592
2021-03-31 07:46:37,212 - INFO - vrouter agent memory usage: top - 13:16:37 up 1 day, 23:18,  2 users,  load average: 1.31, 1.33, 0.95
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.2 us,  0.3 sy,  0.0 ni, 99.5 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385579+total, 24618286+free, 17283756 used,   389168 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24575020+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
36210 root      20   0 8961204   8.0g   1.5g S  20.0  3.2  10:13.15 contrail-vroute
8412988
              total        used        free      shared  buff/cache   available
Mem:           251G         16G        234G         10M        380M        234G
Swap:            0B          0B          0B
2021-03-31 07:46:39,213 - INFO - Reading 3 after add
2021-03-31 07:46:40,800 - INFO - Flow count: 44592
2021-03-31 07:46:41,180 - INFO - vrouter agent memory usage: top - 13:16:41 up 1 day, 23:18,  2 users,  load average: 1.21, 1.31, 0.95
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.5 us,  0.2 sy,  0.0 ni, 99.3 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385579+total, 24618329+free, 17283308 used,   389192 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24575078+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
36210 root      20   0 8961204   8.0g   1.5g S  33.3  3.2  10:14.25 contrail-vroute
8413168
              total        used        free      shared  buff/cache   available
Mem:           251G         16G        234G         10M        380M        234G
Swap:            0B          0B          0B
2021-03-31 07:46:43,181 - INFO - Wait 120s for flows to get cleared
2021-03-31 07:48:43,181 - INFO - Checking flow_count and memory usage of vrouter: Taking 3 readings
2021-03-31 07:48:43,182 - INFO - Reading 1 after waiting is done
2021-03-31 07:48:44,789 - INFO - Flow count: 0
2021-03-31 07:48:45,159 - INFO - vrouter agent memory usage: top - 13:18:45 up 1 day, 23:20,  2 users,  load average: 0.37, 0.97, 0.87
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.7 us,  0.3 sy,  0.0 ni, 99.0 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385579+total, 24619476+free, 17272036 used,   388984 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24576206+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
36210 root      20   0 8961204   8.0g   1.5g S  13.3  3.2  10:50.65 contrail-vroute
8420052
              total        used        free      shared  buff/cache   available
Mem:           251G         16G        234G         10M        379M        234G
Swap:            0B          0B          0B
2021-03-31 07:48:47,160 - INFO - Reading 2 after waiting is done
2021-03-31 07:48:48,765 - INFO - Flow count: 0
2021-03-31 07:48:49,141 - INFO - vrouter agent memory usage: top - 13:18:49 up 1 day, 23:20,  2 users,  load average: 0.37, 0.97, 0.87
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.0 us,  0.0 sy,  0.0 ni,100.0 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385579+total, 24619340+free, 17273368 used,   389016 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24576073+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
36210 root      20   0 8961204   8.0g   1.5g S   6.2  3.2  10:50.94 contrail-vroute
8420392
              total        used        free      shared  buff/cache   available
Mem:           251G         16G        234G         10M        379M        234G
Swap:            0B          0B          0B
2021-03-31 07:48:51,143 - INFO - Reading 3 after waiting is done
2021-03-31 07:48:52,738 - INFO - Flow count: 0
2021-03-31 07:48:53,112 - INFO - vrouter agent memory usage: top - 13:18:53 up 1 day, 23:20,  2 users,  load average: 0.34, 0.96, 0.87
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.2 us,  0.0 sy,  0.0 ni, 99.8 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385579+total, 24619129+free, 17275436 used,   389052 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24575865+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
36210 root      20   0 8961204   8.0g   1.5g S  13.3  3.2  10:51.28 contrail-vroute
8421012
              total        used        free      shared  buff/cache   available
Mem:           251G         16G        234G         10M        379M        234G
Swap:            0B          0B          0B
2021-03-31 07:48:55,113 - INFO - Adding 100000 flows
2021-03-31 07:48:55,113 - INFO - Starting hping3  on ctest-TestFlowScale-02872984-19822257, args:  --udp   --destport ++1000  --baseport 1000  --count 100000  --interval u1 
2021-03-31 07:48:55,180 - INFO - Running hping command for 5s
2021-03-31 07:49:02,092 - INFO - Checking flow_count and memory usage of vrouter: Taking 3 readings
2021-03-31 07:49:02,092 - INFO - Reading 1 after add
2021-03-31 07:49:03,731 - INFO - Flow count: 44854
2021-03-31 07:49:04,114 - INFO - vrouter agent memory usage: top - 13:19:04 up 1 day, 23:20,  2 users,  load average: 0.29, 0.93, 0.86
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.3 us,  0.3 sy,  0.0 ni, 99.3 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385579+total, 24619137+free, 17275684 used,   388732 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24575832+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
36210 root      20   0 8961204   8.0g   1.5g S  13.3  3.2  11:02.42 contrail-vroute
8422588
              total        used        free      shared  buff/cache   available
Mem:           251G         16G        234G         10M        379M        234G
Swap:            0B          0B          0B
2021-03-31 07:49:06,115 - INFO - Reading 2 after add
2021-03-31 07:49:07,688 - INFO - Flow count: 44854
2021-03-31 07:49:08,060 - INFO - vrouter agent memory usage: top - 13:19:08 up 1 day, 23:20,  2 users,  load average: 0.26, 0.91, 0.85
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  2.0 us,  1.3 sy,  0.0 ni, 96.5 id,  0.0 wa,  0.0 hi,  0.2 si,  0.0 st
KiB Mem : 26385579+total, 24618899+free, 17278016 used,   388780 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24575604+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
36210 root      20   0 8961204   8.0g   1.5g S  33.3  3.2  11:03.46 contrail-vroute
8422908
              total        used        free      shared  buff/cache   available
Mem:           251G         16G        234G         10M        379M        234G
Swap:            0B          0B          0B
2021-03-31 07:49:10,062 - INFO - Reading 3 after add
2021-03-31 07:49:11,674 - INFO - Flow count: 44854
2021-03-31 07:49:12,052 - INFO - vrouter agent memory usage: top - 13:19:12 up 1 day, 23:20,  2 users,  load average: 0.24, 0.90, 0.85
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.5 us,  0.2 sy,  0.0 ni, 99.3 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385579+total, 24618744+free, 17279560 used,   388796 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24575449+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
36210 root      20   0 8961204   8.0g   1.5g S  20.0  3.2  11:04.55 contrail-vroute
8423200
              total        used        free      shared  buff/cache   available
Mem:           251G         16G        234G         10M        379M        234G
Swap:            0B          0B          0B
2021-03-31 07:49:14,053 - INFO - Wait 120s for flows to get cleared
2021-03-31 07:51:14,055 - INFO - Checking flow_count and memory usage of vrouter: Taking 3 readings
2021-03-31 07:51:14,055 - INFO - Reading 1 after waiting is done
2021-03-31 07:51:15,671 - INFO - Flow count: 0
2021-03-31 07:51:16,047 - INFO - vrouter agent memory usage: top - 13:21:15 up 1 day, 23:22,  2 users,  load average: 0.08, 0.62, 0.75
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.2 us,  0.2 sy,  0.0 ni, 99.7 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385579+total, 24619406+free, 17273144 used,   388588 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24576096+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
36210 root      20   0 8961204   8.0g   1.5g S   6.7  3.2  11:40.61 contrail-vroute
8430304
              total        used        free      shared  buff/cache   available
Mem:           251G         16G        234G         10M        379M        234G
Swap:            0B          0B          0B
2021-03-31 07:51:18,049 - INFO - Reading 2 after waiting is done
2021-03-31 07:51:19,648 - INFO - Flow count: 0
2021-03-31 07:51:20,024 - INFO - vrouter agent memory usage: top - 13:21:19 up 1 day, 23:22,  2 users,  load average: 0.08, 0.60, 0.75
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.2 us,  0.2 sy,  0.0 ni, 99.7 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385579+total, 24619452+free, 17272644 used,   388616 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24576147+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
36210 root      20   0 8961204   8.0g   1.5g S   0.0  3.2  11:40.92 contrail-vroute
8430448
              total        used        free      shared  buff/cache   available
Mem:           251G         16G        234G         10M        379M        234G
Swap:            0B          0B          0B
2021-03-31 07:51:22,025 - INFO - Reading 3 after waiting is done
2021-03-31 07:51:23,630 - INFO - Flow count: 0
2021-03-31 07:51:24,006 - INFO - vrouter agent memory usage: top - 13:21:23 up 1 day, 23:22,  2 users,  load average: 0.08, 0.60, 0.75
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.2 us,  0.0 sy,  0.0 ni, 99.8 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385579+total, 24619443+free, 17272700 used,   388664 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24576142+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
36210 root      20   0 8961204   8.0g   1.5g S   6.7  3.2  11:41.22 contrail-vroute
8431004
              total        used        free      shared  buff/cache   available
Mem:           251G         16G        234G         10M        379M        234G
Swap:            0B          0B          0B
2021-03-31 07:51:26,008 - INFO - Adding 100000 flows
2021-03-31 07:51:26,009 - INFO - Starting hping3  on ctest-TestFlowScale-02872984-19822257, args:  --udp   --destport ++1000  --baseport 1000  --count 100000  --interval u1 
2021-03-31 07:51:26,077 - INFO - Running hping command for 5s
2021-03-31 07:51:32,961 - INFO - Checking flow_count and memory usage of vrouter: Taking 3 readings
2021-03-31 07:51:32,962 - INFO - Reading 1 after add
2021-03-31 07:51:34,595 - INFO - Flow count: 42998
2021-03-31 07:51:34,964 - INFO - vrouter agent memory usage: top - 13:21:34 up 1 day, 23:22,  2 users,  load average: 0.14, 0.60, 0.75
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.3 us,  0.3 sy,  0.0 ni, 99.3 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385579+total, 24619227+free, 17274096 used,   389424 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24576004+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
36210 root      20   0 8961204   8.0g   1.5g S  33.3  3.2  11:52.04 contrail-vroute
8431728
              total        used        free      shared  buff/cache   available
Mem:           251G         16G        234G         10M        380M        234G
Swap:            0B          0B          0B
2021-03-31 07:51:36,965 - INFO - Reading 2 after add
2021-03-31 07:51:38,591 - INFO - Flow count: 42998
2021-03-31 07:51:38,966 - INFO - vrouter agent memory usage: top - 13:21:38 up 1 day, 23:23,  2 users,  load average: 0.21, 0.61, 0.75
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.5 us,  0.2 sy,  0.0 ni, 99.3 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385579+total, 24618811+free, 17278212 used,   389464 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24575590+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
36210 root      20   0 8961204   8.0g   1.5g S  33.3  3.2  11:53.11 contrail-vroute
8431976
              total        used        free      shared  buff/cache   available
Mem:           251G         16G        234G         10M        380M        234G
Swap:            0B          0B          0B
2021-03-31 07:51:40,968 - INFO - Reading 3 after add
2021-03-31 07:51:42,551 - INFO - Flow count: 42998
2021-03-31 07:51:42,926 - INFO - vrouter agent memory usage: top - 13:21:42 up 1 day, 23:23,  2 users,  load average: 0.20, 0.60, 0.74
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.2 us,  0.2 sy,  0.0 ni, 99.7 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385579+total, 24618988+free, 17276408 used,   389500 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24575772+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
36210 root      20   0 8961204   8.0g   1.5g S  13.3  3.2  11:54.11 contrail-vroute
8432084
              total        used        free      shared  buff/cache   available
Mem:           251G         16G        234G         10M        380M        234G
Swap:            0B          0B          0B
2021-03-31 07:51:44,926 - INFO - Wait 120s for flows to get cleared
2021-03-31 07:53:44,927 - INFO - Checking flow_count and memory usage of vrouter: Taking 3 readings
2021-03-31 07:53:44,928 - INFO - Reading 1 after waiting is done
2021-03-31 07:53:46,539 - INFO - Flow count: 0
2021-03-31 07:53:46,916 - INFO - vrouter agent memory usage: top - 13:23:46 up 1 day, 23:25,  2 users,  load average: 0.42, 0.55, 0.71
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.0 us,  0.2 sy,  0.0 ni, 99.8 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385579+total, 24619312+free, 17271756 used,   390908 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24576233+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
36210 root      20   0 8961204   8.3g   1.8g S   6.7  3.3  12:31.27 contrail-vroute
8689332
              total        used        free      shared  buff/cache   available
Mem:           251G         16G        234G         10M        381M        234G
Swap:            0B          0B          0B
2021-03-31 07:53:48,918 - INFO - Reading 2 after waiting is done
2021-03-31 07:53:50,508 - INFO - Flow count: 0
2021-03-31 07:53:50,882 - INFO - vrouter agent memory usage: top - 13:23:50 up 1 day, 23:25,  2 users,  load average: 0.47, 0.55, 0.71
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.0 us,  0.2 sy,  0.0 ni, 99.8 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385579+total, 24619134+free, 17273524 used,   390924 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24576056+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
36210 root      20   0 8961204   8.3g   1.8g S  12.5  3.3  12:31.64 contrail-vroute
8699396
              total        used        free      shared  buff/cache   available
Mem:           251G         16G        234G         10M        381M        234G
Swap:            0B          0B          0B
2021-03-31 07:53:52,883 - INFO - Reading 3 after waiting is done
2021-03-31 07:53:54,476 - INFO - Flow count: 0
2021-03-31 07:53:54,851 - INFO - vrouter agent memory usage: top - 13:23:54 up 1 day, 23:25,  2 users,  load average: 0.47, 0.55, 0.71
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.3 us,  0.2 sy,  0.0 ni, 99.5 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385579+total, 24619289+free, 17271916 used,   390980 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24576220+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
36210 root      20   0 8961204   8.3g   1.8g S  13.3  3.3  12:31.95 contrail-vroute
8709104
              total        used        free      shared  buff/cache   available
Mem:           251G         16G        234G         10M        381M        234G
Swap:            0B          0B          0B
2021-03-31 07:53:56,853 - INFO - Adding 100000 flows
2021-03-31 07:53:56,853 - INFO - Starting hping3  on ctest-TestFlowScale-02872984-19822257, args:  --udp   --destport ++1000  --baseport 1000  --count 100000  --interval u1 
2021-03-31 07:53:56,921 - INFO - Running hping command for 5s
2021-03-31 07:54:03,834 - INFO - Checking flow_count and memory usage of vrouter: Taking 3 readings
2021-03-31 07:54:03,834 - INFO - Reading 1 after add
2021-03-31 07:54:05,455 - INFO - Flow count: 42842
2021-03-31 07:54:05,834 - INFO - vrouter agent memory usage: top - 13:24:05 up 1 day, 23:25,  2 users,  load average: 0.37, 0.53, 0.70
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.5 us,  0.2 sy,  0.0 ni, 99.3 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385579+total, 24618972+free, 17276576 used,   389488 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24575753+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
36210 root      20   0 8961204   8.3g   1.8g S  26.7  3.3  12:43.11 contrail-vroute
8736880
              total        used        free      shared  buff/cache   available
Mem:           251G         16G        234G         10M        380M        234G
Swap:            0B          0B          0B
2021-03-31 07:54:07,835 - INFO - Reading 2 after add
2021-03-31 07:54:09,425 - INFO - Flow count: 42842
2021-03-31 07:54:09,802 - INFO - vrouter agent memory usage: top - 13:24:09 up 1 day, 23:25,  2 users,  load average: 0.37, 0.53, 0.70
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.7 us,  0.7 sy,  0.0 ni, 98.7 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385579+total, 24619084+free, 17275424 used,   389524 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24575867+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
36210 root      20   0 8961204   8.3g   1.8g S  40.0  3.3  12:44.21 contrail-vroute
8747432
              total        used        free      shared  buff/cache   available
Mem:           251G         16G        234G         10M        380M        234G
Swap:            0B          0B          0B
2021-03-31 07:54:11,803 - INFO - Reading 3 after add
2021-03-31 07:54:13,392 - INFO - Flow count: 42842
2021-03-31 07:54:13,763 - INFO - vrouter agent memory usage: top - 13:24:13 up 1 day, 23:25,  2 users,  load average: 0.34, 0.52, 0.69
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  2.2 us,  1.2 sy,  0.0 ni, 96.5 id,  0.0 wa,  0.0 hi,  0.2 si,  0.0 st
KiB Mem : 26385579+total, 24618944+free, 17276780 used,   389580 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24575734+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
36210 root      20   0 8961204   8.3g   1.8g S  20.0  3.3  12:45.22 contrail-vroute
8748584
              total        used        free      shared  buff/cache   available
Mem:           251G         16G        234G         10M        380M        234G
Swap:            0B          0B          0B
2021-03-31 07:54:15,764 - INFO - Wait 120s for flows to get cleared
2021-03-31 07:56:15,765 - INFO - Checking flow_count and memory usage of vrouter: Taking 3 readings
2021-03-31 07:56:15,766 - INFO - Reading 1 after waiting is done
2021-03-31 07:56:17,345 - INFO - Flow count: 0
2021-03-31 07:56:17,722 - INFO - vrouter agent memory usage: top - 13:26:17 up 1 day, 23:27,  2 users,  load average: 0.40, 0.46, 0.65
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.2 us,  0.0 sy,  0.0 ni, 99.8 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385579+total, 24619270+free, 17272184 used,   390900 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24576192+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
36210 root      20   0 8961204   8.3g   1.8g S   0.0  3.3  13:20.52 contrail-vroute
8748796
              total        used        free      shared  buff/cache   available
Mem:           251G         16G        234G         10M        381M        234G
Swap:            0B          0B          0B
2021-03-31 07:56:19,723 - INFO - Reading 2 after waiting is done
2021-03-31 07:56:21,326 - INFO - Flow count: 0
2021-03-31 07:56:21,711 - INFO - vrouter agent memory usage: top - 13:26:21 up 1 day, 23:27,  2 users,  load average: 0.44, 0.47, 0.65
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.0 us,  0.2 sy,  0.0 ni, 99.8 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385579+total, 24619046+free, 17274404 used,   390924 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24575972+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
36210 root      20   0 8961204   8.3g   1.8g S   0.0  3.3  13:20.77 contrail-vroute
8748796
              total        used        free      shared  buff/cache   available
Mem:           251G         16G        234G         10M        381M        234G
Swap:            0B          0B          0B
2021-03-31 07:56:23,712 - INFO - Reading 3 after waiting is done
2021-03-31 07:56:25,314 - INFO - Flow count: 0
2021-03-31 07:56:25,703 - INFO - vrouter agent memory usage: top - 13:26:25 up 1 day, 23:27,  2 users,  load average: 0.41, 0.46, 0.65
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.2 us,  0.0 sy,  0.0 ni, 99.8 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385579+total, 24619148+free, 17273320 used,   390980 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24576080+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
36210 root      20   0 8961204   8.3g   1.8g S   0.0  3.3  13:20.97 contrail-vroute
8748796
              total        used        free      shared  buff/cache   available
Mem:           251G         16G        234G         10M        381M        234G
Swap:            0B          0B          0B
2021-03-31 07:56:27,704 - INFO - Adding 100000 flows
2021-03-31 07:56:27,705 - INFO - Starting hping3  on ctest-TestFlowScale-02872984-19822257, args:  --udp   --destport ++1000  --baseport 1000  --count 100000  --interval u1 
2021-03-31 07:56:27,772 - INFO - Running hping command for 5s
2021-03-31 07:56:34,699 - INFO - Checking flow_count and memory usage of vrouter: Taking 3 readings
2021-03-31 07:56:34,700 - INFO - Reading 1 after add
2021-03-31 07:56:36,310 - INFO - Flow count: 45180
2021-03-31 07:56:36,689 - INFO - vrouter agent memory usage: top - 13:26:36 up 1 day, 23:28,  2 users,  load average: 0.50, 0.48, 0.65
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.5 us,  0.3 sy,  0.0 ni, 99.2 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385579+total, 24618931+free, 17275672 used,   390816 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24575838+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
36210 root      20   0 8961204   8.3g   1.8g S  33.3  3.3  13:32.12 contrail-vroute
8748796
              total        used        free      shared  buff/cache   available
Mem:           251G         16G        234G         10M        381M        234G
Swap:            0B          0B          0B
2021-03-31 07:56:38,690 - INFO - Reading 2 after add
2021-03-31 07:56:40,283 - INFO - Flow count: 45180
2021-03-31 07:56:40,657 - INFO - vrouter agent memory usage: top - 13:26:40 up 1 day, 23:28,  2 users,  load average: 0.54, 0.48, 0.65
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.5 us,  0.3 sy,  0.0 ni, 99.2 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385579+total, 24618732+free, 17277604 used,   390860 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24575646+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
36210 root      20   0 8961204   8.3g   1.8g S  26.7  3.3  13:33.19 contrail-vroute
8748796
              total        used        free      shared  buff/cache   available
Mem:           251G         16G        234G         10M        381M        234G
Swap:            0B          0B          0B
2021-03-31 07:56:42,657 - INFO - Reading 3 after add
2021-03-31 07:56:44,258 - INFO - Flow count: 45180
2021-03-31 07:56:44,632 - INFO - vrouter agent memory usage: top - 13:26:44 up 1 day, 23:28,  2 users,  load average: 0.54, 0.48, 0.65
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.3 us,  0.2 sy,  0.0 ni, 99.5 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385579+total, 24618736+free, 17277528 used,   390896 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24575654+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
36210 root      20   0 8961204   8.3g   1.8g S  20.0  3.3  13:34.30 contrail-vroute
8748796
              total        used        free      shared  buff/cache   available
Mem:           251G         16G        234G         10M        381M        234G
Swap:            0B          0B          0B
2021-03-31 08:00:41,246 - INFO - Flows greater than 1 Million
2021-03-31 08:00:41,247 - INFO - Deleting VM ctest-TestFlowScale-02872984-19822257
2021-03-31 08:00:43,493 - INFO - END TEST : test_flow_scale : PASSED[0:18:05]
2021-03-31 08:00:43,494 - INFO - --------------------------------------------------------------------------------
2021-03-31 08:00:43,745 - WARNING - Project ctest-TestFlowScale-02872984 still has VNs [{'to': ['default-domain', 'ctest-TestFlowScale-02872984', 'ctest-vn-44369398'], 'href': 'http://10.204.216.103:8082/virtual-network/ed2ffa33-329b-4673-b16f-90f53a8d8061', 'uuid': 'ed2ffa33-329b-4673-b16f-90f53a8d8061'}] before deletion
2021-03-31 08:00:45,834 - WARNING - Project ctest-TestFlowScale-02872984 still has VNs [{'to': ['default-domain', 'ctest-TestFlowScale-02872984', 'ctest-vn-44369398'], 'href': 'http://10.204.216.103:8082/virtual-network/ed2ffa33-329b-4673-b16f-90f53a8d8061', 'uuid': 'ed2ffa33-329b-4673-b16f-90f53a8d8061'}] before deletion
2021-03-31 08:00:47,924 - WARNING - Project ctest-TestFlowScale-02872984 still has VNs [{'to': ['default-domain', 'ctest-TestFlowScale-02872984', 'ctest-vn-44369398'], 'href': 'http://10.204.216.103:8082/virtual-network/ed2ffa33-329b-4673-b16f-90f53a8d8061', 'uuid': 'ed2ffa33-329b-4673-b16f-90f53a8d8061'}] before deletion
2021-03-31 08:00:50,011 - WARNING - Project ctest-TestFlowScale-02872984 still has VNs [{'to': ['default-domain', 'ctest-TestFlowScale-02872984', 'ctest-vn-44369398'], 'href': 'http://10.204.216.103:8082/virtual-network/ed2ffa33-329b-4673-b16f-90f53a8d8061', 'uuid': 'ed2ffa33-329b-4673-b16f-90f53a8d8061'}] before deletion
2021-03-31 08:00:52,105 - WARNING - Project ctest-TestFlowScale-02872984 still has VNs [{'to': ['default-domain', 'ctest-TestFlowScale-02872984', 'ctest-vn-44369398'], 'href': 'http://10.204.216.103:8082/virtual-network/ed2ffa33-329b-4673-b16f-90f53a8d8061', 'uuid': 'ed2ffa33-329b-4673-b16f-90f53a8d8061'}] before deletion
2021-03-31 08:00:54,187 - WARNING - Project ctest-TestFlowScale-02872984 still has VNs [{'to': ['default-domain', 'ctest-TestFlowScale-02872984', 'ctest-vn-44369398'], 'href': 'http://10.204.216.103:8082/virtual-network/ed2ffa33-329b-4673-b16f-90f53a8d8061', 'uuid': 'ed2ffa33-329b-4673-b16f-90f53a8d8061'}] before deletion
2021-03-31 08:00:56,272 - WARNING - Project ctest-TestFlowScale-02872984 still has VNs [{'to': ['default-domain', 'ctest-TestFlowScale-02872984', 'ctest-vn-44369398'], 'href': 'http://10.204.216.103:8082/virtual-network/ed2ffa33-329b-4673-b16f-90f53a8d8061', 'uuid': 'ed2ffa33-329b-4673-b16f-90f53a8d8061'}] before deletion
2021-03-31 08:00:58,361 - WARNING - Project ctest-TestFlowScale-02872984 still has VNs [{'to': ['default-domain', 'ctest-TestFlowScale-02872984', 'ctest-vn-44369398'], 'href': 'http://10.204.216.103:8082/virtual-network/ed2ffa33-329b-4673-b16f-90f53a8d8061', 'uuid': 'ed2ffa33-329b-4673-b16f-90f53a8d8061'}] before deletion
2021-03-31 08:01:00,435 - WARNING - Project ctest-TestFlowScale-02872984 still has VNs [{'to': ['default-domain', 'ctest-TestFlowScale-02872984', 'ctest-vn-44369398'], 'href': 'http://10.204.216.103:8082/virtual-network/ed2ffa33-329b-4673-b16f-90f53a8d8061', 'uuid': 'ed2ffa33-329b-4673-b16f-90f53a8d8061'}] before deletion
2021-03-31 08:01:02,516 - WARNING - Project ctest-TestFlowScale-02872984 still has VNs [{'to': ['default-domain', 'ctest-TestFlowScale-02872984', 'ctest-vn-44369398'], 'href': 'http://10.204.216.103:8082/virtual-network/ed2ffa33-329b-4673-b16f-90f53a8d8061', 'uuid': 'ed2ffa33-329b-4673-b16f-90f53a8d8061'}] before deletion
2021-03-31 08:01:04,598 - WARNING - Project ctest-TestFlowScale-02872984 still has VNs [{'to': ['default-domain', 'ctest-TestFlowScale-02872984', 'ctest-vn-44369398'], 'href': 'http://10.204.216.103:8082/virtual-network/ed2ffa33-329b-4673-b16f-90f53a8d8061', 'uuid': 'ed2ffa33-329b-4673-b16f-90f53a8d8061'}] before deletion
2021-03-31 08:01:06,677 - WARNING - Project ctest-TestFlowScale-02872984 still has VNs [{'to': ['default-domain', 'ctest-TestFlowScale-02872984', 'ctest-vn-44369398'], 'href': 'http://10.204.216.103:8082/virtual-network/ed2ffa33-329b-4673-b16f-90f53a8d8061', 'uuid': 'ed2ffa33-329b-4673-b16f-90f53a8d8061'}] before deletion
2021-03-31 08:01:08,751 - WARNING - Project ctest-TestFlowScale-02872984 still has VNs [{'to': ['default-domain', 'ctest-TestFlowScale-02872984', 'ctest-vn-44369398'], 'href': 'http://10.204.216.103:8082/virtual-network/ed2ffa33-329b-4673-b16f-90f53a8d8061', 'uuid': 'ed2ffa33-329b-4673-b16f-90f53a8d8061'}] before deletion
2021-03-31 08:01:10,838 - WARNING - Project ctest-TestFlowScale-02872984 still has VNs [{'to': ['default-domain', 'ctest-TestFlowScale-02872984', 'ctest-vn-44369398'], 'href': 'http://10.204.216.103:8082/virtual-network/ed2ffa33-329b-4673-b16f-90f53a8d8061', 'uuid': 'ed2ffa33-329b-4673-b16f-90f53a8d8061'}] before deletion
2021-03-31 08:01:12,924 - WARNING - Project ctest-TestFlowScale-02872984 still has VNs [{'to': ['default-domain', 'ctest-TestFlowScale-02872984', 'ctest-vn-44369398'], 'href': 'http://10.204.216.103:8082/virtual-network/ed2ffa33-329b-4673-b16f-90f53a8d8061', 'uuid': 'ed2ffa33-329b-4673-b16f-90f53a8d8061'}] before deletion
2021-03-31 08:01:15,016 - WARNING - Project ctest-TestFlowScale-02872984 still has VNs [{'to': ['default-domain', 'ctest-TestFlowScale-02872984', 'ctest-vn-44369398'], 'href': 'http://10.204.216.103:8082/virtual-network/ed2ffa33-329b-4673-b16f-90f53a8d8061', 'uuid': 'ed2ffa33-329b-4673-b16f-90f53a8d8061'}] before deletion
2021-03-31 08:01:17,102 - WARNING - Project ctest-TestFlowScale-02872984 still has VNs [{'to': ['default-domain', 'ctest-TestFlowScale-02872984', 'ctest-vn-44369398'], 'href': 'http://10.204.216.103:8082/virtual-network/ed2ffa33-329b-4673-b16f-90f53a8d8061', 'uuid': 'ed2ffa33-329b-4673-b16f-90f53a8d8061'}] before deletion
2021-03-31 08:01:19,181 - WARNING - Project ctest-TestFlowScale-02872984 still has VNs [{'to': ['default-domain', 'ctest-TestFlowScale-02872984', 'ctest-vn-44369398'], 'href': 'http://10.204.216.103:8082/virtual-network/ed2ffa33-329b-4673-b16f-90f53a8d8061', 'uuid': 'ed2ffa33-329b-4673-b16f-90f53a8d8061'}] before deletion
2021-03-31 08:01:21,250 - WARNING - Project ctest-TestFlowScale-02872984 still has VNs [{'to': ['default-domain', 'ctest-TestFlowScale-02872984', 'ctest-vn-44369398'], 'href': 'http://10.204.216.103:8082/virtual-network/ed2ffa33-329b-4673-b16f-90f53a8d8061', 'uuid': 'ed2ffa33-329b-4673-b16f-90f53a8d8061'}] before deletion
2021-03-31 08:01:23,318 - WARNING - Project ctest-TestFlowScale-02872984 still has VNs [{'to': ['default-domain', 'ctest-TestFlowScale-02872984', 'ctest-vn-44369398'], 'href': 'http://10.204.216.103:8082/virtual-network/ed2ffa33-329b-4673-b16f-90f53a8d8061', 'uuid': 'ed2ffa33-329b-4673-b16f-90f53a8d8061'}] before deletion
2021-03-31 08:01:25,402 - WARNING - Project ctest-TestFlowScale-02872984 still has VNs [{'to': ['default-domain', 'ctest-TestFlowScale-02872984', 'ctest-vn-44369398'], 'href': 'http://10.204.216.103:8082/virtual-network/ed2ffa33-329b-4673-b16f-90f53a8d8061', 'uuid': 'ed2ffa33-329b-4673-b16f-90f53a8d8061'}] before deletion
2021-03-31 08:01:27,489 - WARNING - Project ctest-TestFlowScale-02872984 still has VNs [{'to': ['default-domain', 'ctest-TestFlowScale-02872984', 'ctest-vn-44369398'], 'href': 'http://10.204.216.103:8082/virtual-network/ed2ffa33-329b-4673-b16f-90f53a8d8061', 'uuid': 'ed2ffa33-329b-4673-b16f-90f53a8d8061'}] before deletion
2021-03-31 08:01:29,576 - WARNING - Project ctest-TestFlowScale-02872984 still has VNs [{'to': ['default-domain', 'ctest-TestFlowScale-02872984', 'ctest-vn-44369398'], 'href': 'http://10.204.216.103:8082/virtual-network/ed2ffa33-329b-4673-b16f-90f53a8d8061', 'uuid': 'ed2ffa33-329b-4673-b16f-90f53a8d8061'}] before deletion
2021-03-31 08:01:31,668 - WARNING - Project ctest-TestFlowScale-02872984 still has VNs [{'to': ['default-domain', 'ctest-TestFlowScale-02872984', 'ctest-vn-44369398'], 'href': 'http://10.204.216.103:8082/virtual-network/ed2ffa33-329b-4673-b16f-90f53a8d8061', 'uuid': 'ed2ffa33-329b-4673-b16f-90f53a8d8061'}] before deletion
2021-03-31 08:01:33,748 - WARNING - Project ctest-TestFlowScale-02872984 still has VNs [{'to': ['default-domain', 'ctest-TestFlowScale-02872984', 'ctest-vn-44369398'], 'href': 'http://10.204.216.103:8082/virtual-network/ed2ffa33-329b-4673-b16f-90f53a8d8061', 'uuid': 'ed2ffa33-329b-4673-b16f-90f53a8d8061'}] before deletion
2021-03-31 08:01:35,835 - WARNING - Project ctest-TestFlowScale-02872984 still has VNs [{'to': ['default-domain', 'ctest-TestFlowScale-02872984', 'ctest-vn-44369398'], 'href': 'http://10.204.216.103:8082/virtual-network/ed2ffa33-329b-4673-b16f-90f53a8d8061', 'uuid': 'ed2ffa33-329b-4673-b16f-90f53a8d8061'}] before deletion
2021-03-31 08:01:37,920 - WARNING - Project ctest-TestFlowScale-02872984 still has VNs [{'to': ['default-domain', 'ctest-TestFlowScale-02872984', 'ctest-vn-44369398'], 'href': 'http://10.204.216.103:8082/virtual-network/ed2ffa33-329b-4673-b16f-90f53a8d8061', 'uuid': 'ed2ffa33-329b-4673-b16f-90f53a8d8061'}] before deletion
2021-03-31 08:01:40,016 - WARNING - Project ctest-TestFlowScale-02872984 still has VNs [{'to': ['default-domain', 'ctest-TestFlowScale-02872984', 'ctest-vn-44369398'], 'href': 'http://10.204.216.103:8082/virtual-network/ed2ffa33-329b-4673-b16f-90f53a8d8061', 'uuid': 'ed2ffa33-329b-4673-b16f-90f53a8d8061'}] before deletion
2021-03-31 08:01:42,095 - WARNING - Project ctest-TestFlowScale-02872984 still has VNs [{'to': ['default-domain', 'ctest-TestFlowScale-02872984', 'ctest-vn-44369398'], 'href': 'http://10.204.216.103:8082/virtual-network/ed2ffa33-329b-4673-b16f-90f53a8d8061', 'uuid': 'ed2ffa33-329b-4673-b16f-90f53a8d8061'}] before deletion
2021-03-31 08:01:44,179 - WARNING - Project ctest-TestFlowScale-02872984 still has VNs [{'to': ['default-domain', 'ctest-TestFlowScale-02872984', 'ctest-vn-44369398'], 'href': 'http://10.204.216.103:8082/virtual-network/ed2ffa33-329b-4673-b16f-90f53a8d8061', 'uuid': 'ed2ffa33-329b-4673-b16f-90f53a8d8061'}] before deletion
2021-03-31 08:01:46,264 - WARNING - Project ctest-TestFlowScale-02872984 still has VNs [{'to': ['default-domain', 'ctest-TestFlowScale-02872984', 'ctest-vn-44369398'], 'href': 'http://10.204.216.103:8082/virtual-network/ed2ffa33-329b-4673-b16f-90f53a8d8061', 'uuid': 'ed2ffa33-329b-4673-b16f-90f53a8d8061'}] before deletion
2021-03-31 08:01:46,264 - WARNING - One or more references still present, will not delete the project ctest-TestFlowScale-02872984
2021-03-31 08:02:36,232 - DEBUG - [10.204.216.103]: Running cmd : hostname
2021-03-31 08:02:36,703 - DEBUG - Output : nodem14
2021-03-31 08:02:36,703 - DEBUG - [10.204.216.103]: Running cmd : hostname -f
2021-03-31 08:02:36,828 - DEBUG - Output : nodem14.englab.juniper.net
2021-03-31 08:02:36,828 - DEBUG - [10.204.216.103]: Running cmd : docker ps -a 2>/dev/null | grep -v "/pause\|/usr/bin/pod\|nova_api_\|contrail.*init\|init.*contrail\|provisioner\|placement" | awk '{print $NF}'
2021-03-31 08:02:37,141 - DEBUG - Output : NAMES
nuthan_test
analytics_snmp_nodemgr_1
analytics_snmp_snmp-collector_1
analytics_snmp_topology_1
analytics_alarm_nodemgr_1
analytics_alarm_kafka_1
analytics_alarm_alarm-gen_1
analytics_collector_1
analytics_nodemgr_1
analytics_api_1
analytics_database_nodemgr_1
analytics_database_cassandra_1
analytics_database_query-engine_1
control_nodemgr_1
control_named_1
control_control_1
control_dns_1
webui_job_1
webui_web_1
config_devicemgr_1
config_nodemgr_1
config_api_1
config_svcmonitor_1
config_schema_1
config_dnsmasq_1
config_database_nodemgr_1
config_database_rabbitmq_1
config_database_cassandra_1
config_database_zookeeper_1
redis_redis_1
barbican_worker
barbican_keystone_listener
barbican_api
horizon
heat_engine
heat_api_cfn
heat_api
neutron_server
nova_novncproxy
nova_conductor
nova_api
nova_scheduler
glance_api
keystone_fernet
keystone_ssh
keystone
rabbitmq
memcached
mariadb
keepalived
haproxy
cron
kolla_toolbox
fluentd
2021-03-31 08:02:37,142 - DEBUG - [10.204.216.103]: Running cmd : getent hosts 10.204.216.103 | head -n 1 | awk '{print $2}'
2021-03-31 08:02:37,255 - DEBUG - Output : nodem14.englab.juniper.net
2021-03-31 08:02:37,256 - DEBUG - [10.204.216.103]: Running cmd : ip addr show | grep 'inet .*/.* brd ' | awk '{print $2}'
2021-03-31 08:02:37,358 - DEBUG - Output : 10.204.216.103/24
10.10.10.14/24
172.17.0.1/16
2021-03-31 08:02:37,359 - DEBUG - [10.204.216.103]: Running cmd : getent hosts 10.10.10.14 | head -n 1 | awk '{print $2}'
2021-03-31 08:02:37,474 - DEBUG - Output : nodem14
2021-03-31 08:02:37,475 - DEBUG - [10.204.216.95]: Running cmd : hostname
2021-03-31 08:02:37,984 - DEBUG - Output : nodem6
2021-03-31 08:02:37,984 - DEBUG - [10.204.216.95]: Running cmd : hostname -f
2021-03-31 08:02:38,101 - DEBUG - Output : nodem6.englab.juniper.net
2021-03-31 08:02:38,102 - DEBUG - [10.204.216.95]: Running cmd : docker ps -a 2>/dev/null | grep -v "/pause\|/usr/bin/pod\|nova_api_\|contrail.*init\|init.*contrail\|provisioner\|placement" | awk '{print $NF}'
2021-03-31 08:02:38,429 - DEBUG - Output : NAMES
analytics_snmp_nodemgr_1
analytics_snmp_snmp-collector_1
analytics_snmp_topology_1
analytics_alarm_nodemgr_1
analytics_alarm_kafka_1
analytics_alarm_alarm-gen_1
analytics_collector_1
analytics_nodemgr_1
analytics_api_1
analytics_database_nodemgr_1
analytics_database_cassandra_1
analytics_database_query-engine_1
control_nodemgr_1
control_named_1
control_dns_1
control_control_1
webui_job_1
webui_web_1
config_devicemgr_1
config_nodemgr_1
config_api_1
config_svcmonitor_1
config_schema_1
config_dnsmasq_1
config_database_nodemgr_1
config_database_rabbitmq_1
config_database_cassandra_1
config_database_zookeeper_1
redis_redis_1
barbican_worker
barbican_keystone_listener
barbican_api
horizon
heat_engine
heat_api_cfn
heat_api
neutron_server
nova_novncproxy
nova_conductor
nova_api
nova_scheduler
keystone_fernet
keystone_ssh
keystone
rabbitmq
memcached
mariadb
keepalived
haproxy
cron
kolla_toolbox
fluentd
2021-03-31 08:02:38,430 - DEBUG - [10.204.216.95]: Running cmd : getent hosts 10.204.216.95 | head -n 1 | awk '{print $2}'
2021-03-31 08:02:38,556 - DEBUG - Output : nodem6.englab.juniper.net
2021-03-31 08:02:38,557 - DEBUG - [10.204.216.95]: Running cmd : ip addr show | grep 'inet .*/.* brd ' | awk '{print $2}'
2021-03-31 08:02:38,675 - DEBUG - Output : 10.204.216.95/24
10.10.10.6/24
172.17.0.1/16
2021-03-31 08:02:38,675 - DEBUG - [10.204.216.95]: Running cmd : getent hosts 10.10.10.6 | head -n 1 | awk '{print $2}'
2021-03-31 08:02:38,800 - DEBUG - Output : nodem6
2021-03-31 08:02:38,801 - DEBUG - [10.204.216.96]: Running cmd : hostname
2021-03-31 08:02:39,279 - DEBUG - Output : nodem7
2021-03-31 08:02:39,280 - DEBUG - [10.204.216.96]: Running cmd : hostname -f
2021-03-31 08:02:39,402 - DEBUG - Output : nodem7.englab.juniper.net
2021-03-31 08:02:39,402 - DEBUG - [10.204.216.96]: Running cmd : docker ps -a 2>/dev/null | grep -v "/pause\|/usr/bin/pod\|nova_api_\|contrail.*init\|init.*contrail\|provisioner\|placement" | awk '{print $NF}'
2021-03-31 08:02:39,723 - DEBUG - Output : NAMES
analytics_snmp_nodemgr_1
analytics_snmp_snmp-collector_1
analytics_snmp_topology_1
analytics_alarm_nodemgr_1
analytics_alarm_kafka_1
analytics_alarm_alarm-gen_1
analytics_nodemgr_1
analytics_collector_1
analytics_api_1
analytics_database_nodemgr_1
analytics_database_cassandra_1
analytics_database_query-engine_1
control_nodemgr_1
control_named_1
control_dns_1
control_control_1
webui_web_1
webui_job_1
config_devicemgr_1
config_nodemgr_1
config_schema_1
config_api_1
config_svcmonitor_1
config_dnsmasq_1
config_database_nodemgr_1
config_database_rabbitmq_1
config_database_cassandra_1
config_database_zookeeper_1
redis_redis_1
barbican_worker
barbican_keystone_listener
barbican_api
horizon
heat_engine
heat_api_cfn
heat_api
neutron_server
nova_novncproxy
nova_conductor
nova_api
nova_scheduler
keystone_fernet
keystone_ssh
keystone
rabbitmq
memcached
mariadb
keepalived
haproxy
cron
kolla_toolbox
fluentd
2021-03-31 08:02:39,724 - DEBUG - [10.204.216.96]: Running cmd : getent hosts 10.204.216.96 | head -n 1 | awk '{print $2}'
2021-03-31 08:02:39,845 - DEBUG - Output : nodem7.englab.juniper.net
2021-03-31 08:02:39,846 - DEBUG - [10.204.216.96]: Running cmd : ip addr show | grep 'inet .*/.* brd ' | awk '{print $2}'
2021-03-31 08:02:39,969 - DEBUG - Output : 10.204.216.96/24
10.10.10.7/24
172.17.0.1/16
2021-03-31 08:02:39,970 - DEBUG - [10.204.216.96]: Running cmd : getent hosts 10.10.10.7 | head -n 1 | awk '{print $2}'
2021-03-31 08:02:40,092 - DEBUG - Output : nodem7
2021-03-31 08:02:40,092 - DEBUG - [10.204.216.99]: Running cmd : hostname
2021-03-31 08:02:40,612 - DEBUG - Output : nodem10
2021-03-31 08:02:40,612 - DEBUG - [10.204.216.99]: Running cmd : hostname -f
2021-03-31 08:02:40,739 - DEBUG - Output : nodem10.englab.juniper.net
2021-03-31 08:02:40,739 - DEBUG - [10.204.216.99]: Running cmd : docker ps -a 2>/dev/null | grep -v "/pause\|/usr/bin/pod\|nova_api_\|contrail.*init\|init.*contrail\|provisioner\|placement" | awk '{print $NF}'
2021-03-31 08:02:41,003 - DEBUG - Output : NAMES
vrouter_vrouter-agent_1
vrouter_nodemgr_1
rsyslogd_rsyslogd_1
nova_compute
nova_libvirt
nova_ssh
cron
kolla_toolbox
fluentd
2021-03-31 08:02:41,004 - DEBUG - [10.204.216.99]: Running cmd : ip addr show dev vhost0 | grep 'inet .*/.* brd ' | awk '{print $2}'
2021-03-31 08:02:41,122 - DEBUG - Output : 10.10.10.10/24
2021-03-31 08:02:41,123 - DEBUG - [10.204.216.99]: Running cmd : getent hosts 10.10.10.10 | head -n 1 | awk '{print $2}'
2021-03-31 08:02:41,250 - DEBUG - Output : nodem10
2021-03-31 08:02:41,250 - DEBUG - [10.204.216.110]: Running cmd : hostname
2021-03-31 08:02:41,662 - DEBUG - Output : server1-ae8275ae0eecf6c488b24302fe22dc9b
2021-03-31 08:02:41,662 - DEBUG - [10.204.216.110]: Running cmd : hostname -f
2021-03-31 08:02:41,758 - DEBUG - Output : server1-ae8275ae0eecf6c488b24302fe22dc9b.englab.juniper.net
2021-03-31 08:02:41,759 - DEBUG - [10.204.216.110]: Running cmd : docker ps -a 2>/dev/null | grep -v "/pause\|/usr/bin/pod\|nova_api_\|contrail.*init\|init.*contrail\|provisioner\|placement" | awk '{print $NF}'
2021-03-31 08:02:41,947 - DEBUG - Output : NAMES
ansible-player_20210329150718
contrail_command
contrail_psql
contrail_command_deployer
2021-03-31 08:02:45,922 - DEBUG - Not creating keypair since it exists
2021-03-31 08:02:46,040 - INFO - Domain Default found not creating
2021-03-31 08:02:47,122 - INFO - Project ctest-TestFlowScale-12476991 not found, creating it
2021-03-31 08:02:48,053 - INFO - Created Project:ctest-TestFlowScale-12476991, ID : 96e2f989-bb67-4ef8-9b0e-d006e5cd259a 
2021-03-31 08:02:51,598 - INFO - Reloading vrouter module on 10.204.216.99
2021-03-31 08:02:56,320 - INFO - Cmd output info: vrouter_vrouter-agent_1
              total        used        free      shared  buff/cache   available
Mem:      263855804     8038700   254748704       10940     1068400   254987500
Swap:             0           0           0
              total        used        free      shared  buff/cache   available
Mem:      263855804     8038792   255612780       10940      204232   255050480
Swap:             0           0           0
vrouter_vrouter-agent_1
2021-03-31 08:02:56,615 - INFO - 10.204.216.99
2021-03-31 08:02:56,615 - INFO -   vrouter
2021-03-31 08:02:56,628 - INFO -     vrouter-nodemgr:active
2021-03-31 08:02:56,635 - INFO -     agent:initializing
2021-03-31 08:03:06,878 - INFO - 10.204.216.99
2021-03-31 08:03:06,878 - INFO -   vrouter
2021-03-31 08:03:06,891 - INFO -     vrouter-nodemgr:active
2021-03-31 08:03:06,900 - INFO -     agent:active
2021-03-31 08:03:06,901 - INFO - All the contrail services are up on nodes ['10.204.216.99']
2021-03-31 08:03:07,625 - INFO - Flow Table limit                     6291456
2021-03-31 08:03:07,625 - INFO - Running docker cp vrouter_vrouter-agent_1:/actions.sh . on 10.204.216.99
2021-03-31 08:03:07,934 - INFO - Running awk 'BEGIN { section=0; doprint=1 } /\[DEFAULT\]/ { section=1 } /flow_cache_timeout/ { if (section) {doprint=0; section=0} } { if (doprint) {print} else {doprint=1} }'  actions.sh > actions.sh.modified on 10.204.216.99
2021-03-31 08:03:08,058 - INFO - Running mv actions.sh.modified actions.sh; chmod +x actions.sh on 10.204.216.99
2021-03-31 08:03:08,169 - INFO - Running grep -q -F 'flow_cache_timeout=120' actions.sh ||sed -i  '/\[DEFAULT\]/a flow_cache_timeout=120' actions.sh on 10.204.216.99
2021-03-31 08:03:08,293 - INFO - Running docker cp actions.sh vrouter_vrouter-agent_1:/actions.sh on 10.204.216.99
2021-03-31 08:03:09,120 - INFO - Running docker restart vrouter_vrouter-agent_1 -t 60 on 10.204.216.99
2021-03-31 08:03:18,177 - INFO - Flow_cache_timeout set to 120 on 10.204.216.99
2021-03-31 08:03:19,708 - INFO - Created VN ctest-vn-85810387
2021-03-31 08:03:23,568 - INFO - VM ([<Server: ctest-TestFlowScale-12476991-00517704>]) created on node: (nodem10), Zone: (nova:nodem10)
2021-03-31 08:03:23,568 - INFO - Waiting for VM ctest-TestFlowScale-12476991-00517704 to be up..
2021-03-31 08:03:55,027 - INFO - VM name : ctest-TestFlowScale-12476991-00517704
2021-03-31 08:04:01,385 - INFO - Ping to Metadata IP 169.254.0.3 of VM ctest-TestFlowScale-12476991-00517704 passed
2021-03-31 08:04:22,820 - INFO - ================================================================================
2021-03-31 08:04:22,820 - INFO - STARTING TEST    : test_flow_scale
2021-03-31 08:04:22,823 - INFO - TEST DESCRIPTION : 
        Description: Test to scale 1 million flows
         Test steps:
                1. Add PHYSICAL_INTERFACE in vrouter env if absent
                2. Set flow entries to 1 million in vrouter module
                3. Increase flow timeout to high value like 9999
                4. Send traffic through hping3 changing the source port with each iteration
                5. Check for flow count in flow table
         Pass criteria: Flow count greater than 1 million
         Maintainer : nuthanc@juniper.net 
        
2021-03-31 08:04:23,950 - WARNING - Test is running with cores: {'10.204.216.96': ['core.contrail-collec.1.nodem7.1617040979']}
2021-03-31 08:04:23,950 - INFO - Initial checks done. Running the testcase now
2021-03-31 08:04:23,950 - INFO - 
2021-03-31 08:04:23,951 - INFO - Starting hping3  on ctest-TestFlowScale-12476991-00517704, args:  --udp   --keep   --destport ++1000  --baseport 5001  --count 1048576  --interval u1 
2021-03-31 08:04:34,767 - INFO - Running command for 5s
2021-03-31 08:04:41,779 - INFO - Flow count: 124652
2021-03-31 08:04:42,194 - INFO - vrouter agent memory usage: top - 13:34:42 up 1 day, 23:26,  2 users,  load average: 0.70, 0.35, 0.22
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  1.7 us,  1.7 sy,  0.0 ni, 96.7 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385580+total, 25196000+free, 11469180 used,   426616 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 25156328+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
17300 root      20   0 3174576   1.6g 619976 S  46.7  0.6   0:38.74 contrail-vroute
1664880
              total        used        free      shared  buff/cache   available
Mem:           251G         10G        240G         10M        416M        239G
Swap:            0B          0B          0B
2021-03-31 08:04:42,195 - INFO - Starting hping3  on ctest-TestFlowScale-12476991-00517704, args:  --udp   --keep   --destport ++1000  --baseport 5002  --count 1048576  --interval u1 
2021-03-31 08:04:42,299 - INFO - Running command for 5s
2021-03-31 08:08:07,616 - DEBUG - [10.204.216.103]: Running cmd : hostname
2021-03-31 08:08:08,085 - DEBUG - Output : nodem14
2021-03-31 08:08:08,086 - DEBUG - [10.204.216.103]: Running cmd : hostname -f
2021-03-31 08:08:08,199 - DEBUG - Output : nodem14.englab.juniper.net
2021-03-31 08:08:08,199 - DEBUG - [10.204.216.103]: Running cmd : docker ps -a 2>/dev/null | grep -v "/pause\|/usr/bin/pod\|nova_api_\|contrail.*init\|init.*contrail\|provisioner\|placement" | awk '{print $NF}'
2021-03-31 08:08:08,537 - DEBUG - Output : NAMES
nuthan_test
analytics_snmp_nodemgr_1
analytics_snmp_snmp-collector_1
analytics_snmp_topology_1
analytics_alarm_nodemgr_1
analytics_alarm_kafka_1
analytics_alarm_alarm-gen_1
analytics_collector_1
analytics_nodemgr_1
analytics_api_1
analytics_database_nodemgr_1
analytics_database_cassandra_1
analytics_database_query-engine_1
control_nodemgr_1
control_named_1
control_control_1
control_dns_1
webui_job_1
webui_web_1
config_devicemgr_1
config_nodemgr_1
config_api_1
config_svcmonitor_1
config_schema_1
config_dnsmasq_1
config_database_nodemgr_1
config_database_rabbitmq_1
config_database_cassandra_1
config_database_zookeeper_1
redis_redis_1
barbican_worker
barbican_keystone_listener
barbican_api
horizon
heat_engine
heat_api_cfn
heat_api
neutron_server
nova_novncproxy
nova_conductor
nova_api
nova_scheduler
glance_api
keystone_fernet
keystone_ssh
keystone
rabbitmq
memcached
mariadb
keepalived
haproxy
cron
kolla_toolbox
fluentd
2021-03-31 08:08:08,538 - DEBUG - [10.204.216.103]: Running cmd : getent hosts 10.204.216.103 | head -n 1 | awk '{print $2}'
2021-03-31 08:08:08,654 - DEBUG - Output : nodem14.englab.juniper.net
2021-03-31 08:08:08,655 - DEBUG - [10.204.216.103]: Running cmd : ip addr show | grep 'inet .*/.* brd ' | awk '{print $2}'
2021-03-31 08:08:08,775 - DEBUG - Output : 10.204.216.103/24
10.10.10.14/24
172.17.0.1/16
2021-03-31 08:08:08,776 - DEBUG - [10.204.216.103]: Running cmd : getent hosts 10.10.10.14 | head -n 1 | awk '{print $2}'
2021-03-31 08:08:08,901 - DEBUG - Output : nodem14
2021-03-31 08:08:08,901 - DEBUG - [10.204.216.95]: Running cmd : hostname
2021-03-31 08:08:09,400 - DEBUG - Output : nodem6
2021-03-31 08:08:09,401 - DEBUG - [10.204.216.95]: Running cmd : hostname -f
2021-03-31 08:08:09,528 - DEBUG - Output : nodem6.englab.juniper.net
2021-03-31 08:08:09,528 - DEBUG - [10.204.216.95]: Running cmd : docker ps -a 2>/dev/null | grep -v "/pause\|/usr/bin/pod\|nova_api_\|contrail.*init\|init.*contrail\|provisioner\|placement" | awk '{print $NF}'
2021-03-31 08:08:09,839 - DEBUG - Output : NAMES
analytics_snmp_nodemgr_1
analytics_snmp_snmp-collector_1
analytics_snmp_topology_1
analytics_alarm_nodemgr_1
analytics_alarm_kafka_1
analytics_alarm_alarm-gen_1
analytics_collector_1
analytics_nodemgr_1
analytics_api_1
analytics_database_nodemgr_1
analytics_database_cassandra_1
analytics_database_query-engine_1
control_nodemgr_1
control_named_1
control_dns_1
control_control_1
webui_job_1
webui_web_1
config_devicemgr_1
config_nodemgr_1
config_api_1
config_svcmonitor_1
config_schema_1
config_dnsmasq_1
config_database_nodemgr_1
config_database_rabbitmq_1
config_database_cassandra_1
config_database_zookeeper_1
redis_redis_1
barbican_worker
barbican_keystone_listener
barbican_api
horizon
heat_engine
heat_api_cfn
heat_api
neutron_server
nova_novncproxy
nova_conductor
nova_api
nova_scheduler
keystone_fernet
keystone_ssh
keystone
rabbitmq
memcached
mariadb
keepalived
haproxy
cron
kolla_toolbox
fluentd
2021-03-31 08:08:09,840 - DEBUG - [10.204.216.95]: Running cmd : getent hosts 10.204.216.95 | head -n 1 | awk '{print $2}'
2021-03-31 08:08:09,957 - DEBUG - Output : nodem6.englab.juniper.net
2021-03-31 08:08:09,957 - DEBUG - [10.204.216.95]: Running cmd : ip addr show | grep 'inet .*/.* brd ' | awk '{print $2}'
2021-03-31 08:08:10,084 - DEBUG - Output : 10.204.216.95/24
10.10.10.6/24
172.17.0.1/16
2021-03-31 08:08:10,084 - DEBUG - [10.204.216.95]: Running cmd : getent hosts 10.10.10.6 | head -n 1 | awk '{print $2}'
2021-03-31 08:08:10,191 - DEBUG - Output : nodem6
2021-03-31 08:08:10,192 - DEBUG - [10.204.216.96]: Running cmd : hostname
2021-03-31 08:08:10,635 - DEBUG - Output : nodem7
2021-03-31 08:08:10,636 - DEBUG - [10.204.216.96]: Running cmd : hostname -f
2021-03-31 08:08:10,762 - DEBUG - Output : nodem7.englab.juniper.net
2021-03-31 08:08:10,763 - DEBUG - [10.204.216.96]: Running cmd : docker ps -a 2>/dev/null | grep -v "/pause\|/usr/bin/pod\|nova_api_\|contrail.*init\|init.*contrail\|provisioner\|placement" | awk '{print $NF}'
2021-03-31 08:08:11,087 - DEBUG - Output : NAMES
analytics_snmp_nodemgr_1
analytics_snmp_snmp-collector_1
analytics_snmp_topology_1
analytics_alarm_nodemgr_1
analytics_alarm_kafka_1
analytics_alarm_alarm-gen_1
analytics_nodemgr_1
analytics_collector_1
analytics_api_1
analytics_database_nodemgr_1
analytics_database_cassandra_1
analytics_database_query-engine_1
control_nodemgr_1
control_named_1
control_dns_1
control_control_1
webui_web_1
webui_job_1
config_devicemgr_1
config_nodemgr_1
config_schema_1
config_api_1
config_svcmonitor_1
config_dnsmasq_1
config_database_nodemgr_1
config_database_rabbitmq_1
config_database_cassandra_1
config_database_zookeeper_1
redis_redis_1
barbican_worker
barbican_keystone_listener
barbican_api
horizon
heat_engine
heat_api_cfn
heat_api
neutron_server
nova_novncproxy
nova_conductor
nova_api
nova_scheduler
keystone_fernet
keystone_ssh
keystone
rabbitmq
memcached
mariadb
keepalived
haproxy
cron
kolla_toolbox
fluentd
2021-03-31 08:08:11,087 - DEBUG - [10.204.216.96]: Running cmd : getent hosts 10.204.216.96 | head -n 1 | awk '{print $2}'
2021-03-31 08:08:11,209 - DEBUG - Output : nodem7.englab.juniper.net
2021-03-31 08:08:11,209 - DEBUG - [10.204.216.96]: Running cmd : ip addr show | grep 'inet .*/.* brd ' | awk '{print $2}'
2021-03-31 08:08:11,335 - DEBUG - Output : 10.204.216.96/24
10.10.10.7/24
172.17.0.1/16
2021-03-31 08:08:11,335 - DEBUG - [10.204.216.96]: Running cmd : getent hosts 10.10.10.7 | head -n 1 | awk '{print $2}'
2021-03-31 08:08:11,457 - DEBUG - Output : nodem7
2021-03-31 08:08:11,457 - DEBUG - [10.204.216.99]: Running cmd : hostname
2021-03-31 08:08:11,973 - DEBUG - Output : nodem10
2021-03-31 08:08:11,974 - DEBUG - [10.204.216.99]: Running cmd : hostname -f
2021-03-31 08:08:12,095 - DEBUG - Output : nodem10.englab.juniper.net
2021-03-31 08:08:12,096 - DEBUG - [10.204.216.99]: Running cmd : docker ps -a 2>/dev/null | grep -v "/pause\|/usr/bin/pod\|nova_api_\|contrail.*init\|init.*contrail\|provisioner\|placement" | awk '{print $NF}'
2021-03-31 08:08:12,365 - DEBUG - Output : NAMES
vrouter_vrouter-agent_1
vrouter_nodemgr_1
rsyslogd_rsyslogd_1
nova_compute
nova_libvirt
nova_ssh
cron
kolla_toolbox
fluentd
2021-03-31 08:08:12,366 - DEBUG - [10.204.216.99]: Running cmd : ip addr show dev vhost0 | grep 'inet .*/.* brd ' | awk '{print $2}'
2021-03-31 08:08:12,491 - DEBUG - Output : 10.10.10.10/24
2021-03-31 08:08:12,492 - DEBUG - [10.204.216.99]: Running cmd : getent hosts 10.10.10.10 | head -n 1 | awk '{print $2}'
2021-03-31 08:08:12,618 - DEBUG - Output : nodem10
2021-03-31 08:08:12,618 - DEBUG - [10.204.216.110]: Running cmd : hostname
2021-03-31 08:08:13,014 - DEBUG - Output : server1-ae8275ae0eecf6c488b24302fe22dc9b
2021-03-31 08:08:13,015 - DEBUG - [10.204.216.110]: Running cmd : hostname -f
2021-03-31 08:08:13,110 - DEBUG - Output : server1-ae8275ae0eecf6c488b24302fe22dc9b.englab.juniper.net
2021-03-31 08:08:13,110 - DEBUG - [10.204.216.110]: Running cmd : docker ps -a 2>/dev/null | grep -v "/pause\|/usr/bin/pod\|nova_api_\|contrail.*init\|init.*contrail\|provisioner\|placement" | awk '{print $NF}'
2021-03-31 08:08:13,322 - DEBUG - Output : NAMES
ansible-player_20210329150718
contrail_command
contrail_psql
contrail_command_deployer
2021-03-31 08:08:17,019 - DEBUG - Not creating keypair since it exists
2021-03-31 08:08:17,145 - INFO - Domain Default found not creating
2021-03-31 08:08:18,206 - INFO - Project ctest-TestFlowScale-77174799 not found, creating it
2021-03-31 08:08:19,131 - INFO - Created Project:ctest-TestFlowScale-77174799, ID : 9a98f18f-ced0-497e-8d60-8f39c3192853 
2021-03-31 08:08:22,193 - INFO - Reloading vrouter module on 10.204.216.99
2021-03-31 08:08:26,875 - INFO - Cmd output info: vrouter_vrouter-agent_1
              total        used        free      shared  buff/cache   available
Mem:      263855804     8387852   255038196       11048      429756   254644840
Swap:             0           0           0
              total        used        free      shared  buff/cache   available
Mem:      263855804     8385796   255257108       11048      212900   254699768
Swap:             0           0           0
vrouter_vrouter-agent_1
2021-03-31 08:08:27,144 - INFO - 10.204.216.99
2021-03-31 08:08:27,144 - INFO -   vrouter
2021-03-31 08:08:27,156 - INFO -     vrouter-nodemgr:active
2021-03-31 08:08:27,161 - INFO -     agent:initializing
2021-03-31 08:08:37,408 - INFO - 10.204.216.99
2021-03-31 08:08:37,408 - INFO -   vrouter
2021-03-31 08:08:37,420 - INFO -     vrouter-nodemgr:active
2021-03-31 08:08:37,431 - INFO -     agent:active
2021-03-31 08:08:37,432 - INFO - All the contrail services are up on nodes ['10.204.216.99']
2021-03-31 08:08:38,109 - INFO - Flow Table limit                     6291456
2021-03-31 08:08:38,109 - INFO - Running docker cp vrouter_vrouter-agent_1:/actions.sh . on 10.204.216.99
2021-03-31 08:08:38,456 - INFO - Running awk 'BEGIN { section=0; doprint=1 } /\[DEFAULT\]/ { section=1 } /flow_cache_timeout/ { if (section) {doprint=0; section=0} } { if (doprint) {print} else {doprint=1} }'  actions.sh > actions.sh.modified on 10.204.216.99
2021-03-31 08:08:38,582 - INFO - Running mv actions.sh.modified actions.sh; chmod +x actions.sh on 10.204.216.99
2021-03-31 08:08:38,701 - INFO - Running grep -q -F 'flow_cache_timeout=120' actions.sh ||sed -i  '/\[DEFAULT\]/a flow_cache_timeout=120' actions.sh on 10.204.216.99
2021-03-31 08:08:38,825 - INFO - Running docker cp actions.sh vrouter_vrouter-agent_1:/actions.sh on 10.204.216.99
2021-03-31 08:08:39,648 - INFO - Running docker restart vrouter_vrouter-agent_1 -t 60 on 10.204.216.99
2021-03-31 08:08:48,747 - INFO - Flow_cache_timeout set to 120 on 10.204.216.99
2021-03-31 08:08:50,276 - INFO - Created VN ctest-vn-19368773
2021-03-31 08:08:53,000 - INFO - VM ([<Server: ctest-TestFlowScale-77174799-43794118>]) created on node: (nodem10), Zone: (nova:nodem10)
2021-03-31 08:08:53,001 - INFO - Waiting for VM ctest-TestFlowScale-77174799-43794118 to be up..
2021-03-31 08:09:03,583 - INFO - VM name : ctest-TestFlowScale-77174799-43794118
2021-03-31 08:09:05,797 - INFO - Ping to Metadata IP 169.254.0.4 of VM ctest-TestFlowScale-77174799-43794118 passed
2021-03-31 08:09:32,493 - INFO - ================================================================================
2021-03-31 08:09:32,493 - INFO - STARTING TEST    : test_flow_scale
2021-03-31 08:09:32,495 - INFO - TEST DESCRIPTION : 
        Description: Test to scale 1 million flows
         Test steps:
                1. Add PHYSICAL_INTERFACE in vrouter env if absent
                2. Set flow entries to 1 million in vrouter module
                3. Increase flow timeout to high value like 9999
                4. Send traffic through hping3 changing the source port with each iteration
                5. Check for flow count in flow table
         Pass criteria: Flow count greater than 1 million
         Maintainer : nuthanc@juniper.net 
        
2021-03-31 08:09:33,669 - WARNING - Test is running with cores: {'10.204.216.96': ['core.contrail-collec.1.nodem7.1617040979']}
2021-03-31 08:09:33,670 - INFO - Initial checks done. Running the testcase now
2021-03-31 08:09:33,670 - INFO - 
2021-03-31 08:09:33,671 - INFO - Starting hping3  on ctest-TestFlowScale-77174799-43794118, args:  --udp   --keep   --destport ++1000  --baseport 5001  --count 1048576  --interval u1 
2021-03-31 08:09:44,517 - INFO - Running command for 5s
2021-03-31 08:09:51,490 - INFO - Flow count: 129018
2021-03-31 08:09:51,922 - INFO - vrouter agent memory usage: top - 13:39:51 up 1 day, 23:31,  2 users,  load average: 0.40, 0.30, 0.23
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.7 us,  0.3 sy,  0.0 ni, 99.0 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385580+total, 25171254+free, 11752632 used,   390620 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 25128163+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
21228 root      20   0 3189932   1.6g 563956 S  46.7  0.6   0:38.16 contrail-vroute
1633616
              total        used        free      shared  buff/cache   available
Mem:           251G         11G        240G         10M        381M        239G
Swap:            0B          0B          0B
2021-03-31 08:09:51,923 - INFO - Starting hping3  on ctest-TestFlowScale-77174799-43794118, args:  --udp   --keep   --destport ++1000  --baseport 5002  --count 1048576  --interval u1 
2021-03-31 08:09:52,017 - INFO - Running command for 5s
2021-03-31 08:09:58,845 - INFO - Flow count: 259032
2021-03-31 08:09:59,244 - INFO - vrouter agent memory usage: top - 13:39:59 up 1 day, 23:31,  2 users,  load average: 0.79, 0.38, 0.26
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.5 us,  0.5 sy,  0.0 ni, 99.0 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385580+total, 25112569+free, 12338252 used,   391852 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 25069598+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
21228 root      20   0 3779756   2.4g 883860 S  46.7  1.0   1:10.11 contrail-vroute
2535212
              total        used        free      shared  buff/cache   available
Mem:           251G         11G        239G         10M        382M        239G
Swap:            0B          0B          0B
2021-03-31 08:09:59,245 - INFO - Starting hping3  on ctest-TestFlowScale-77174799-43794118, args:  --udp   --keep   --destport ++1000  --baseport 5003  --count 1048576  --interval u1 
2021-03-31 08:09:59,364 - INFO - Running command for 5s
2021-03-31 08:10:06,229 - INFO - Flow count: 386488
2021-03-31 08:10:06,609 - INFO - vrouter agent memory usage: top - 13:40:06 up 1 day, 23:31,  2 users,  load average: 1.28, 0.49, 0.30
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.3 us,  0.3 sy,  0.0 ni, 99.3 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385580+total, 25055648+free, 12908372 used,   390956 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 25012588+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
21228 root      20   0 4343980   3.0g 921140 S  33.3  1.2   1:40.53 contrail-vroute
3142280
              total        used        free      shared  buff/cache   available
Mem:           251G         12G        238G         10M        381M        238G
Swap:            0B          0B          0B
2021-03-31 08:10:06,610 - INFO - Starting hping3  on ctest-TestFlowScale-77174799-43794118, args:  --udp   --keep   --destport ++1000  --baseport 5004  --count 1048576  --interval u1 
2021-03-31 08:10:06,706 - INFO - Running command for 5s
2021-03-31 08:10:13,554 - INFO - Flow count: 512036
2021-03-31 08:10:13,931 - INFO - vrouter agent memory usage: top - 13:40:13 up 1 day, 23:31,  2 users,  load average: 1.38, 0.54, 0.32
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.8 us,  0.3 sy,  0.0 ni, 98.8 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385580+total, 24999339+free, 13471148 used,   391264 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24956316+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
21228 root      20   0 4913332   3.8g   1.2g S  40.0  1.5   2:11.48 contrail-vroute
3993560
              total        used        free      shared  buff/cache   available
Mem:           251G         12G        238G         10M        382M        238G
Swap:            0B          0B          0B
2021-03-31 08:10:13,932 - INFO - Starting hping3  on ctest-TestFlowScale-77174799-43794118, args:  --udp   --keep   --destport ++1000  --baseport 5005  --count 1048576  --interval u1 
2021-03-31 08:10:14,035 - INFO - Running command for 5s
2021-03-31 08:10:20,867 - INFO - Flow count: 641200
2021-03-31 08:10:21,259 - INFO - vrouter agent memory usage: top - 13:40:21 up 1 day, 23:31,  1 user,  load average: 1.83, 0.65, 0.35
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.5 us,  0.5 sy,  0.0 ni, 99.0 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385580+total, 24943308+free, 14031332 used,   391388 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24900292+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
21228 root      20   0 5498036   4.5g   1.2g S  40.0  1.8   2:42.42 contrail-vroute
4669680
              total        used        free      shared  buff/cache   available
Mem:           251G         13G        237G         10M        382M        237G
Swap:            0B          0B          0B
2021-03-31 08:10:21,259 - INFO - Starting hping3  on ctest-TestFlowScale-77174799-43794118, args:  --udp   --keep   --destport ++1000  --baseport 5006  --count 1048576  --interval u1 
2021-03-31 08:10:21,359 - INFO - Running command for 5s
2021-03-31 08:10:28,234 - INFO - Flow count: 769380
2021-03-31 08:10:28,621 - INFO - vrouter agent memory usage: top - 13:40:28 up 1 day, 23:31,  1 user,  load average: 1.70, 0.66, 0.36
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.5 us,  0.5 sy,  0.0 ni, 99.0 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385580+total, 24885360+free, 14609400 used,   392812 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24842486+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
21228 root      20   0 6070452   5.0g   1.3g S  25.0  2.0   3:12.70 contrail-vroute
5268880
              total        used        free      shared  buff/cache   available
Mem:           251G         13G        237G         10M        383M        236G
Swap:            0B          0B          0B
2021-03-31 08:10:28,622 - INFO - Starting hping3  on ctest-TestFlowScale-77174799-43794118, args:  --udp   --keep   --destport ++1000  --baseport 5007  --count 1048576  --interval u1 
2021-03-31 08:10:28,718 - INFO - Running command for 5s
2021-03-31 08:10:35,544 - INFO - Flow count: 893382
2021-03-31 08:10:35,908 - INFO - vrouter agent memory usage: top - 13:40:35 up 1 day, 23:32,  1 user,  load average: 1.72, 0.68, 0.37
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.3 us,  0.2 sy,  0.0 ni, 99.5 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385580+total, 24829545+free, 15168116 used,   392228 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24786620+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
21228 root      20   0 6629556   5.6g   1.3g S  26.7  2.2   3:43.72 contrail-vroute
5867572
              total        used        free      shared  buff/cache   available
Mem:           251G         14G        236G         10M        383M        236G
Swap:            0B          0B          0B
2021-03-31 08:10:35,909 - INFO - Starting hping3  on ctest-TestFlowScale-77174799-43794118, args:  --udp   --keep   --destport ++1000  --baseport 5008  --count 1048576  --interval u1 
2021-03-31 08:10:36,012 - INFO - Running command for 5s
2021-03-31 08:10:42,854 - INFO - Flow count: 1024370
2021-03-31 08:10:43,209 - INFO - vrouter agent memory usage: top - 13:40:43 up 1 day, 23:32,  1 user,  load average: 2.20, 0.82, 0.42
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  1.7 us,  1.5 sy,  0.0 ni, 96.8 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385580+total, 24770486+free, 15759396 used,   391544 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24727491+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
21228 root      20   0 7214260   6.2g   1.4g S  25.0  2.5   4:16.18 contrail-vroute
6546380
              total        used        free      shared  buff/cache   available
Mem:           251G         15G        236G         10M        382M        235G
Swap:            0B          0B          0B
2021-03-31 08:10:43,209 - INFO - Starting hping3  on ctest-TestFlowScale-77174799-43794118, args:  --udp   --keep   --destport ++1000  --baseport 5009  --count 1048576  --interval u1 
2021-03-31 08:10:43,311 - INFO - Running command for 5s
2021-03-31 08:10:50,176 - INFO - Flow count: 1153890
2021-03-31 08:10:50,546 - INFO - vrouter agent memory usage: top - 13:40:50 up 1 day, 23:32,  1 user,  load average: 2.10, 0.83, 0.42
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.8 us,  0.3 sy,  0.0 ni, 98.8 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385580+total, 24712555+free, 16337248 used,   393004 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24669705+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
21228 root      20   0 7797940   6.9g   1.5g S  53.3  2.7   4:47.64 contrail-vroute
7191468
              total        used        free      shared  buff/cache   available
Mem:           251G         15G        235G         10M        383M        235G
Swap:            0B          0B          0B
2021-03-31 08:10:50,546 - INFO - Starting hping3  on ctest-TestFlowScale-77174799-43794118, args:  --udp   --keep   --destport ++1000  --baseport 5010  --count 1048576  --interval u1 
2021-03-31 08:10:50,648 - INFO - Running command for 5s
2021-03-31 08:10:57,480 - INFO - Flow count: 1279304
2021-03-31 08:10:57,861 - INFO - vrouter agent memory usage: top - 13:40:57 up 1 day, 23:32,  1 user,  load average: 2.50, 0.93, 0.46
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.7 us,  0.7 sy,  0.0 ni, 98.7 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385580+total, 24656240+free, 16899876 used,   393520 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24613440+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
21228 root      20   0 8359092   7.4g   1.5g S  46.7  2.9   5:18.52 contrail-vroute
7779716
              total        used        free      shared  buff/cache   available
Mem:           251G         16G        235G         10M        384M        234G
Swap:            0B          0B          0B
2021-03-31 08:10:57,861 - INFO - Starting hping3  on ctest-TestFlowScale-77174799-43794118, args:  --udp   --keep   --destport ++1000  --baseport 5011  --count 1048576  --interval u1 
2021-03-31 08:10:57,957 - INFO - Running command for 5s
2021-03-31 08:11:04,797 - INFO - Flow count: 1402452
2021-03-31 08:11:05,184 - INFO - vrouter agent memory usage: top - 13:41:05 up 1 day, 23:32,  1 user,  load average: 2.64, 1.01, 0.49
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  1.8 us,  0.7 sy,  0.0 ni, 97.5 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385580+total, 24600507+free, 17458024 used,   392712 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24557627+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
21228 root      20   0 8915124   8.0g   1.5g S 113.3  3.2   5:50.29 contrail-vroute
8340336
              total        used        free      shared  buff/cache   available
Mem:           251G         16G        234G         10M        383M        234G
Swap:            0B          0B          0B
2021-03-31 08:11:06,799 - INFO - Flow count: 1402452
2021-03-31 08:11:06,799 - INFO - Wait 120s for flows to get cleared
2021-03-31 08:13:06,801 - INFO - Checking flow_count and memory usage of vrouter: Taking 3 readings
2021-03-31 08:13:06,801 - INFO - Reading 1 after waiting is done
2021-03-31 08:13:08,391 - INFO - Flow count: 248578
2021-03-31 08:13:08,775 - INFO - vrouter agent memory usage: top - 13:43:08 up 1 day, 23:34,  1 user,  load average: 1.77, 1.19, 0.62
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.3 us,  0.2 sy,  0.0 ni, 99.5 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385580+total, 24601139+free, 17449584 used,   394820 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24558468+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
21228 root      20   0 8917172   8.0g   1.5g S  26.7  3.2   9:28.37 contrail-vroute
8368056
              total        used        free      shared  buff/cache   available
Mem:           251G         16G        234G         10M        385M        234G
Swap:            0B          0B          0B
2021-03-31 08:13:10,776 - INFO - Reading 2 after waiting is done
2021-03-31 08:13:12,399 - INFO - Flow count: 248578
2021-03-31 08:13:12,777 - INFO - vrouter agent memory usage: top - 13:43:12 up 1 day, 23:34,  1 user,  load average: 1.77, 1.19, 0.62
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.5 us,  0.3 sy,  0.0 ni, 99.2 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385580+total, 24600312+free, 17457864 used,   394820 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24557641+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
21228 root      20   0 8917172   8.0g   1.5g S  20.0  3.2   9:29.88 contrail-vroute
8368076
              total        used        free      shared  buff/cache   available
Mem:           251G         16G        234G         10M        385M        234G
Swap:            0B          0B          0B
2021-03-31 08:13:14,779 - INFO - Reading 3 after waiting is done
2021-03-31 08:13:16,390 - INFO - Flow count: 248576
2021-03-31 08:13:16,767 - INFO - vrouter agent memory usage: top - 13:43:16 up 1 day, 23:34,  1 user,  load average: 1.63, 1.17, 0.61
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.2 us,  0.2 sy,  0.0 ni, 99.7 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385580+total, 24600052+free, 17460452 used,   394820 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24557382+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
21228 root      20   0 8917172   8.0g   1.5g S  26.7  3.2   9:31.39 contrail-vroute
8368308
              total        used        free      shared  buff/cache   available
Mem:           251G         16G        234G         10M        385M        234G
Swap:            0B          0B          0B
2021-03-31 08:13:18,768 - INFO - Adding 100000 flows
2021-03-31 08:13:18,768 - INFO - Starting hping3  on ctest-TestFlowScale-77174799-43794118, args:  --udp   --keep   --destport ++1000  --baseport 6000  --count 1048576  --interval u1 
2021-03-31 08:13:18,836 - INFO - Running hping command for 5s
2021-03-31 08:13:25,659 - INFO - Checking flow_count and memory usage of vrouter: Taking 3 readings
2021-03-31 08:13:25,659 - INFO - Reading 1 after add
2021-03-31 08:13:27,191 - INFO - Flow count: 321318
2021-03-31 08:13:27,550 - INFO - vrouter agent memory usage: top - 13:43:27 up 1 day, 23:34,  1 user,  load average: 1.45, 1.15, 0.61
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  8.5 us,  3.8 sy,  0.0 ni, 87.6 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385580+total, 24600313+free, 17460260 used,   392412 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24557390+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
21228 root      20   0 8917172   8.0g   1.5g S 506.7  3.2  10:12.19 contrail-vroute
8374968
              total        used        free      shared  buff/cache   available
Mem:           251G         16G        234G         10M        384M        234G
Swap:            0B          0B          0B
2021-03-31 08:13:29,551 - INFO - Reading 2 after add
2021-03-31 08:13:31,078 - INFO - Flow count: 201510
2021-03-31 08:13:31,447 - INFO - vrouter agent memory usage: top - 13:43:31 up 1 day, 23:35,  1 user,  load average: 1.57, 1.18, 0.62
Tasks:   1 total,   1 running,   0 sleeping,   0 stopped,   0 zombie
%Cpu(s):  9.0 us,  3.8 sy,  0.0 ni, 87.1 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385580+total, 24600744+free, 17455492 used,   392872 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24557860+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
21228 root      20   0 8917172   8.0g   1.5g R 526.7  3.2  10:29.63 contrail-vroute
8374984
              total        used        free      shared  buff/cache   available
Mem:           251G         16G        234G         10M        383M        234G
Swap:            0B          0B          0B
2021-03-31 08:13:33,449 - INFO - Reading 3 after add
2021-03-31 08:13:35,031 - INFO - Flow count: 121900
2021-03-31 08:13:35,407 - INFO - vrouter agent memory usage: top - 13:43:35 up 1 day, 23:35,  1 user,  load average: 1.61, 1.19, 0.63
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.2 us,  0.3 sy,  0.0 ni, 99.5 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385580+total, 24600529+free, 17456664 used,   393848 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24557763+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
21228 root      20   0 8917172   8.0g   1.5g S  33.3  3.2  10:38.16 contrail-vroute
8374876
              total        used        free      shared  buff/cache   available
Mem:           251G         16G        234G         10M        384M        234G
Swap:            0B          0B          0B
2021-03-31 08:13:37,409 - INFO - Wait 120s for flows to get cleared
2021-03-31 08:15:37,410 - INFO - Checking flow_count and memory usage of vrouter: Taking 3 readings
2021-03-31 08:15:37,411 - INFO - Reading 1 after waiting is done
2021-03-31 08:15:38,948 - INFO - Flow count: 0
2021-03-31 08:15:39,318 - INFO - vrouter agent memory usage: top - 13:45:39 up 1 day, 23:37,  1 user,  load average: 0.29, 0.81, 0.56
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.0 us,  0.0 sy,  0.0 ni,100.0 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385580+total, 24600606+free, 17456052 used,   393688 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24557809+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
21228 root      20   0 8917172   8.0g   1.5g S   6.7  3.2  11:30.96 contrail-vroute
8380668
              total        used        free      shared  buff/cache   available
Mem:           251G         16G        234G         10M        384M        234G
Swap:            0B          0B          0B
2021-03-31 08:15:41,320 - INFO - Reading 2 after waiting is done
2021-03-31 08:15:42,925 - INFO - Flow count: 0
2021-03-31 08:15:43,290 - INFO - vrouter agent memory usage: top - 13:45:43 up 1 day, 23:37,  1 user,  load average: 0.35, 0.82, 0.56
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  1.2 us,  1.7 sy,  0.0 ni, 97.2 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385580+total, 24600414+free, 17457940 used,   393716 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24557635+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
21228 root      20   0 8917172   8.0g   1.5g S   0.0  3.2  11:31.23 contrail-vroute
8380748
              total        used        free      shared  buff/cache   available
Mem:           251G         16G        234G         10M        384M        234G
Swap:            0B          0B          0B
2021-03-31 08:15:45,292 - INFO - Reading 3 after waiting is done
2021-03-31 08:15:46,893 - INFO - Flow count: 0
2021-03-31 08:15:47,268 - INFO - vrouter agent memory usage: top - 13:45:47 up 1 day, 23:37,  1 user,  load average: 0.35, 0.82, 0.56
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.0 us,  0.0 sy,  0.0 ni,100.0 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385580+total, 24600328+free, 17458800 used,   393728 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24557548+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
21228 root      20   0 8917172   8.0g   1.5g S   6.7  3.2  11:31.60 contrail-vroute
8381072
              total        used        free      shared  buff/cache   available
Mem:           251G         16G        234G         10M        384M        234G
Swap:            0B          0B          0B
2021-03-31 08:15:49,269 - INFO - Adding 100000 flows
2021-03-31 08:15:49,270 - INFO - Starting hping3  on ctest-TestFlowScale-77174799-43794118, args:  --udp   --keep   --destport ++1000  --baseport 6001  --count 1048576  --interval u1 
2021-03-31 08:15:49,337 - INFO - Running hping command for 5s
2021-03-31 08:15:56,205 - INFO - Checking flow_count and memory usage of vrouter: Taking 3 readings
2021-03-31 08:15:56,205 - INFO - Reading 1 after add
2021-03-31 08:15:57,836 - INFO - Flow count: 123542
2021-03-31 08:15:58,208 - INFO - vrouter agent memory usage: top - 13:45:58 up 1 day, 23:37,  1 user,  load average: 0.27, 0.78, 0.56
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.7 us,  0.3 sy,  0.0 ni, 99.0 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385580+total, 24600120+free, 17459436 used,   395168 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24557483+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
21228 root      20   0 8917172   8.0g   1.5g S  40.0  3.2  12:01.02 contrail-vroute
8383896
              total        used        free      shared  buff/cache   available
Mem:           251G         16G        234G         10M        385M        234G
Swap:            0B          0B          0B
2021-03-31 08:16:00,209 - INFO - Reading 2 after add
2021-03-31 08:16:01,784 - INFO - Flow count: 123542
2021-03-31 08:16:02,168 - INFO - vrouter agent memory usage: top - 13:46:02 up 1 day, 23:37,  1 user,  load average: 0.27, 0.78, 0.56
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.7 us,  0.2 sy,  0.0 ni, 99.2 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385580+total, 24600068+free, 17459912 used,   395200 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24557435+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
21228 root      20   0 8917172   8.0g   1.5g S  31.2  3.2  12:02.07 contrail-vroute
8383988
              total        used        free      shared  buff/cache   available
Mem:           251G         16G        234G         10M        385M        234G
Swap:            0B          0B          0B
2021-03-31 08:16:04,170 - INFO - Reading 3 after add
2021-03-31 08:16:05,761 - INFO - Flow count: 123542
2021-03-31 08:16:06,135 - INFO - vrouter agent memory usage: top - 13:46:06 up 1 day, 23:37,  1 user,  load average: 0.25, 0.76, 0.55
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  1.7 us,  1.8 sy,  0.0 ni, 96.5 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385580+total, 24598390+free, 17476704 used,   395200 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24555756+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
21228 root      20   0 8917172   8.0g   1.5g S  40.0  3.2  12:03.11 contrail-vroute
8384212
              total        used        free      shared  buff/cache   available
Mem:           251G         16G        234G         10M        385M        234G
Swap:            0B          0B          0B
2021-03-31 08:16:08,136 - INFO - Wait 120s for flows to get cleared
2021-03-31 08:18:08,137 - INFO - Checking flow_count and memory usage of vrouter: Taking 3 readings
2021-03-31 08:18:08,137 - INFO - Reading 1 after waiting is done
2021-03-31 08:18:09,717 - INFO - Flow count: 0
2021-03-31 08:18:10,086 - INFO - vrouter agent memory usage: top - 13:48:10 up 1 day, 23:39,  1 user,  load average: 0.03, 0.50, 0.48
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.3 us,  0.2 sy,  0.0 ni, 99.5 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385580+total, 24600270+free, 17457476 used,   395620 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24557683+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
21228 root      20   0 8933572   8.0g   1.5g S  13.3  3.2  12:52.61 contrail-vroute
8391112
              total        used        free      shared  buff/cache   available
Mem:           251G         16G        234G         10M        386M        234G
Swap:            0B          0B          0B
2021-03-31 08:18:12,087 - INFO - Reading 2 after waiting is done
2021-03-31 08:18:13,669 - INFO - Flow count: 0
2021-03-31 08:18:14,050 - INFO - vrouter agent memory usage: top - 13:48:14 up 1 day, 23:39,  1 user,  load average: 0.03, 0.49, 0.48
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.7 us,  0.7 sy,  0.0 ni, 98.7 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385580+total, 24600076+free, 17459396 used,   395632 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24557491+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
21228 root      20   0 8933572   8.0g   1.5g S  26.7  3.2  12:52.95 contrail-vroute
8391056
              total        used        free      shared  buff/cache   available
Mem:           251G         16G        234G         10M        386M        234G
Swap:            0B          0B          0B
2021-03-31 08:18:16,051 - INFO - Reading 3 after waiting is done
2021-03-31 08:18:17,643 - INFO - Flow count: 0
2021-03-31 08:18:18,022 - INFO - vrouter agent memory usage: top - 13:48:17 up 1 day, 23:39,  1 user,  load average: 0.03, 0.49, 0.48
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.2 us,  0.2 sy,  0.0 ni, 99.7 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385580+total, 24600086+free, 17459252 used,   395692 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24557507+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
21228 root      20   0 8933572   8.0g   1.5g S   6.7  3.2  12:53.27 contrail-vroute
8391108
              total        used        free      shared  buff/cache   available
Mem:           251G         16G        234G         10M        386M        234G
Swap:            0B          0B          0B
2021-03-31 08:18:20,023 - INFO - Adding 100000 flows
2021-03-31 08:18:20,024 - INFO - Starting hping3  on ctest-TestFlowScale-77174799-43794118, args:  --udp   --keep   --destport ++1000  --baseport 6002  --count 1048576  --interval u1 
2021-03-31 08:18:20,092 - INFO - Running hping command for 5s
2021-03-31 08:18:26,959 - INFO - Checking flow_count and memory usage of vrouter: Taking 3 readings
2021-03-31 08:18:26,959 - INFO - Reading 1 after add
2021-03-31 08:18:28,591 - INFO - Flow count: 131074
2021-03-31 08:18:28,964 - INFO - vrouter agent memory usage: top - 13:48:28 up 1 day, 23:40,  1 user,  load average: 0.39, 0.55, 0.50
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.5 us,  0.3 sy,  0.0 ni, 99.2 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385580+total, 24600387+free, 17456932 used,   395004 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24557740+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
21228 root      20   0 8933572   8.0g   1.5g S  26.7  3.2  13:23.94 contrail-vroute
8392076
              total        used        free      shared  buff/cache   available
Mem:           251G         16G        234G         10M        385M        234G
Swap:            0B          0B          0B
2021-03-31 08:18:30,966 - INFO - Reading 2 after add
2021-03-31 08:18:32,552 - INFO - Flow count: 131074
2021-03-31 08:18:32,926 - INFO - vrouter agent memory usage: top - 13:48:32 up 1 day, 23:40,  1 user,  load average: 0.39, 0.55, 0.50
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.3 us,  0.2 sy,  0.0 ni, 99.5 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385580+total, 24600080+free, 17459964 used,   395036 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24557438+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
21228 root      20   0 8933572   8.0g   1.5g S  20.0  3.2  13:25.08 contrail-vroute
8392140
              total        used        free      shared  buff/cache   available
Mem:           251G         16G        234G         10M        385M        234G
Swap:            0B          0B          0B
2021-03-31 08:18:34,927 - INFO - Reading 3 after add
2021-03-31 08:18:36,512 - INFO - Flow count: 131074
2021-03-31 08:18:36,889 - INFO - vrouter agent memory usage: top - 13:48:36 up 1 day, 23:40,  1 user,  load average: 0.36, 0.54, 0.50
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.7 us,  0.5 sy,  0.0 ni, 98.8 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385580+total, 24600438+free, 17456332 used,   395088 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24557798+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
21228 root      20   0 8933572   8.0g   1.5g S  33.3  3.2  13:26.17 contrail-vroute
8392244
              total        used        free      shared  buff/cache   available
Mem:           251G         16G        234G         10M        385M        234G
Swap:            0B          0B          0B
2021-03-31 09:39:24,866 - INFO - Flows greater than 1 Million
2021-03-31 09:39:24,867 - INFO - Deleting VM ctest-TestFlowScale-77174799-43794118
2021-03-31 09:39:27,160 - INFO - END TEST : test_flow_scale : PASSED[1:29:55]
2021-03-31 09:39:27,160 - INFO - --------------------------------------------------------------------------------
2021-03-31 09:39:27,457 - WARNING - Project ctest-TestFlowScale-77174799 still has VNs [{'to': ['default-domain', 'ctest-TestFlowScale-77174799', 'ctest-vn-19368773'], 'href': 'http://10.204.216.103:8082/virtual-network/36b1c99f-2d0c-4ddf-980b-e3daa28d121a', 'uuid': '36b1c99f-2d0c-4ddf-980b-e3daa28d121a'}] before deletion
2021-03-31 09:39:29,535 - WARNING - Project ctest-TestFlowScale-77174799 still has VNs [{'to': ['default-domain', 'ctest-TestFlowScale-77174799', 'ctest-vn-19368773'], 'href': 'http://10.204.216.103:8082/virtual-network/36b1c99f-2d0c-4ddf-980b-e3daa28d121a', 'uuid': '36b1c99f-2d0c-4ddf-980b-e3daa28d121a'}] before deletion
2021-03-31 09:39:31,610 - WARNING - Project ctest-TestFlowScale-77174799 still has VNs [{'to': ['default-domain', 'ctest-TestFlowScale-77174799', 'ctest-vn-19368773'], 'href': 'http://10.204.216.103:8082/virtual-network/36b1c99f-2d0c-4ddf-980b-e3daa28d121a', 'uuid': '36b1c99f-2d0c-4ddf-980b-e3daa28d121a'}] before deletion
2021-03-31 09:39:33,705 - WARNING - Project ctest-TestFlowScale-77174799 still has VNs [{'to': ['default-domain', 'ctest-TestFlowScale-77174799', 'ctest-vn-19368773'], 'href': 'http://10.204.216.103:8082/virtual-network/36b1c99f-2d0c-4ddf-980b-e3daa28d121a', 'uuid': '36b1c99f-2d0c-4ddf-980b-e3daa28d121a'}] before deletion
