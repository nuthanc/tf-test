2021-03-31 11:47:24,152 - WARNING - Project ctest-TestFlowScale-33100271 still has VNs [{'to': ['default-domain', 'ctest-TestFlowScale-33100271', 'ctest-vn-07818326'], 'href': 'http://10.204.216.103:8082/virtual-network/d9b148ef-1cd8-4f92-8562-400a0decb39b', 'uuid': 'd9b148ef-1cd8-4f92-8562-400a0decb39b'}] before deletion
2021-03-31 11:47:26,238 - WARNING - Project ctest-TestFlowScale-33100271 still has VNs [{'to': ['default-domain', 'ctest-TestFlowScale-33100271', 'ctest-vn-07818326'], 'href': 'http://10.204.216.103:8082/virtual-network/d9b148ef-1cd8-4f92-8562-400a0decb39b', 'uuid': 'd9b148ef-1cd8-4f92-8562-400a0decb39b'}] before deletion
2021-03-31 11:47:28,330 - WARNING - Project ctest-TestFlowScale-33100271 still has VNs [{'to': ['default-domain', 'ctest-TestFlowScale-33100271', 'ctest-vn-07818326'], 'href': 'http://10.204.216.103:8082/virtual-network/d9b148ef-1cd8-4f92-8562-400a0decb39b', 'uuid': 'd9b148ef-1cd8-4f92-8562-400a0decb39b'}] before deletion
2021-03-31 11:47:30,412 - WARNING - Project ctest-TestFlowScale-33100271 still has VNs [{'to': ['default-domain', 'ctest-TestFlowScale-33100271', 'ctest-vn-07818326'], 'href': 'http://10.204.216.103:8082/virtual-network/d9b148ef-1cd8-4f92-8562-400a0decb39b', 'uuid': 'd9b148ef-1cd8-4f92-8562-400a0decb39b'}] before deletion
2021-03-31 11:47:32,481 - WARNING - Project ctest-TestFlowScale-33100271 still has VNs [{'to': ['default-domain', 'ctest-TestFlowScale-33100271', 'ctest-vn-07818326'], 'href': 'http://10.204.216.103:8082/virtual-network/d9b148ef-1cd8-4f92-8562-400a0decb39b', 'uuid': 'd9b148ef-1cd8-4f92-8562-400a0decb39b'}] before deletion
2021-03-31 11:47:34,578 - WARNING - Project ctest-TestFlowScale-33100271 still has VNs [{'to': ['default-domain', 'ctest-TestFlowScale-33100271', 'ctest-vn-07818326'], 'href': 'http://10.204.216.103:8082/virtual-network/d9b148ef-1cd8-4f92-8562-400a0decb39b', 'uuid': 'd9b148ef-1cd8-4f92-8562-400a0decb39b'}] before deletion
2021-03-31 11:47:36,659 - WARNING - Project ctest-TestFlowScale-33100271 still has VNs [{'to': ['default-domain', 'ctest-TestFlowScale-33100271', 'ctest-vn-07818326'], 'href': 'http://10.204.216.103:8082/virtual-network/d9b148ef-1cd8-4f92-8562-400a0decb39b', 'uuid': 'd9b148ef-1cd8-4f92-8562-400a0decb39b'}] before deletion
2021-03-31 11:47:36,659 - WARNING - One or more references still present, will not delete the project ctest-TestFlowScale-33100271
2021-03-31 11:48:09,868 - DEBUG - [10.204.216.103]: Running cmd : hostname
2021-03-31 11:48:10,335 - DEBUG - Output : nodem14
2021-03-31 11:48:10,335 - DEBUG - [10.204.216.103]: Running cmd : hostname -f
2021-03-31 11:48:10,446 - DEBUG - Output : nodem14.englab.juniper.net
2021-03-31 11:48:10,447 - DEBUG - [10.204.216.103]: Running cmd : docker ps -a 2>/dev/null | grep -v "/pause\|/usr/bin/pod\|nova_api_\|contrail.*init\|init.*contrail\|provisioner\|placement" | awk '{print $NF}'
2021-03-31 11:48:10,785 - DEBUG - Output : NAMES
nuthan_test
analytics_snmp_nodemgr_1
analytics_snmp_snmp-collector_1
analytics_snmp_topology_1
analytics_alarm_nodemgr_1
analytics_alarm_kafka_1
analytics_alarm_alarm-gen_1
analytics_collector_1
analytics_nodemgr_1
analytics_api_1
analytics_database_nodemgr_1
analytics_database_cassandra_1
analytics_database_query-engine_1
control_nodemgr_1
control_named_1
control_control_1
control_dns_1
webui_job_1
webui_web_1
config_devicemgr_1
config_nodemgr_1
config_api_1
config_svcmonitor_1
config_schema_1
config_dnsmasq_1
config_database_nodemgr_1
config_database_rabbitmq_1
config_database_cassandra_1
config_database_zookeeper_1
redis_redis_1
barbican_worker
barbican_keystone_listener
barbican_api
horizon
heat_engine
heat_api_cfn
heat_api
neutron_server
nova_novncproxy
nova_conductor
nova_api
nova_scheduler
glance_api
keystone_fernet
keystone_ssh
keystone
rabbitmq
memcached
mariadb
keepalived
haproxy
cron
kolla_toolbox
fluentd
2021-03-31 11:48:10,786 - DEBUG - [10.204.216.103]: Running cmd : getent hosts 10.204.216.103 | head -n 1 | awk '{print $2}'
2021-03-31 11:48:10,912 - DEBUG - Output : nodem14.englab.juniper.net
2021-03-31 11:48:10,913 - DEBUG - [10.204.216.103]: Running cmd : ip addr show | grep 'inet .*/.* brd ' | awk '{print $2}'
2021-03-31 11:48:11,031 - DEBUG - Output : 10.204.216.103/24
10.10.10.14/24
172.17.0.1/16
2021-03-31 11:48:11,031 - DEBUG - [10.204.216.103]: Running cmd : getent hosts 10.10.10.14 | head -n 1 | awk '{print $2}'
2021-03-31 11:48:11,150 - DEBUG - Output : nodem14
2021-03-31 11:48:11,151 - DEBUG - [10.204.216.95]: Running cmd : hostname
2021-03-31 11:48:11,671 - DEBUG - Output : nodem6
2021-03-31 11:48:11,672 - DEBUG - [10.204.216.95]: Running cmd : hostname -f
2021-03-31 11:48:11,792 - DEBUG - Output : nodem6.englab.juniper.net
2021-03-31 11:48:11,793 - DEBUG - [10.204.216.95]: Running cmd : docker ps -a 2>/dev/null | grep -v "/pause\|/usr/bin/pod\|nova_api_\|contrail.*init\|init.*contrail\|provisioner\|placement" | awk '{print $NF}'
2021-03-31 11:48:12,110 - DEBUG - Output : NAMES
analytics_snmp_nodemgr_1
analytics_snmp_snmp-collector_1
analytics_snmp_topology_1
analytics_alarm_nodemgr_1
analytics_alarm_kafka_1
analytics_alarm_alarm-gen_1
analytics_collector_1
analytics_nodemgr_1
analytics_api_1
analytics_database_nodemgr_1
analytics_database_cassandra_1
analytics_database_query-engine_1
control_nodemgr_1
control_named_1
control_dns_1
control_control_1
webui_job_1
webui_web_1
config_devicemgr_1
config_nodemgr_1
config_api_1
config_svcmonitor_1
config_schema_1
config_dnsmasq_1
config_database_nodemgr_1
config_database_rabbitmq_1
config_database_cassandra_1
config_database_zookeeper_1
redis_redis_1
barbican_worker
barbican_keystone_listener
barbican_api
horizon
heat_engine
heat_api_cfn
heat_api
neutron_server
nova_novncproxy
nova_conductor
nova_api
nova_scheduler
keystone_fernet
keystone_ssh
keystone
rabbitmq
memcached
mariadb
keepalived
haproxy
cron
kolla_toolbox
fluentd
2021-03-31 11:48:12,112 - DEBUG - [10.204.216.95]: Running cmd : getent hosts 10.204.216.95 | head -n 1 | awk '{print $2}'
2021-03-31 11:48:12,227 - DEBUG - Output : nodem6.englab.juniper.net
2021-03-31 11:48:12,227 - DEBUG - [10.204.216.95]: Running cmd : ip addr show | grep 'inet .*/.* brd ' | awk '{print $2}'
2021-03-31 11:48:12,353 - DEBUG - Output : 10.204.216.95/24
10.10.10.6/24
172.17.0.1/16
2021-03-31 11:48:12,354 - DEBUG - [10.204.216.95]: Running cmd : getent hosts 10.10.10.6 | head -n 1 | awk '{print $2}'
2021-03-31 11:48:12,474 - DEBUG - Output : nodem6
2021-03-31 11:48:12,475 - DEBUG - [10.204.216.96]: Running cmd : hostname
2021-03-31 11:48:12,969 - DEBUG - Output : nodem7
2021-03-31 11:48:12,969 - DEBUG - [10.204.216.96]: Running cmd : hostname -f
2021-03-31 11:48:13,087 - DEBUG - Output : nodem7.englab.juniper.net
2021-03-31 11:48:13,088 - DEBUG - [10.204.216.96]: Running cmd : docker ps -a 2>/dev/null | grep -v "/pause\|/usr/bin/pod\|nova_api_\|contrail.*init\|init.*contrail\|provisioner\|placement" | awk '{print $NF}'
2021-03-31 11:48:13,406 - DEBUG - Output : NAMES
analytics_snmp_nodemgr_1
analytics_snmp_snmp-collector_1
analytics_snmp_topology_1
analytics_alarm_nodemgr_1
analytics_alarm_kafka_1
analytics_alarm_alarm-gen_1
analytics_nodemgr_1
analytics_collector_1
analytics_api_1
analytics_database_nodemgr_1
analytics_database_cassandra_1
analytics_database_query-engine_1
control_nodemgr_1
control_named_1
control_dns_1
control_control_1
webui_web_1
webui_job_1
config_devicemgr_1
config_nodemgr_1
config_schema_1
config_api_1
config_svcmonitor_1
config_dnsmasq_1
config_database_nodemgr_1
config_database_rabbitmq_1
config_database_cassandra_1
config_database_zookeeper_1
redis_redis_1
barbican_worker
barbican_keystone_listener
barbican_api
horizon
heat_engine
heat_api_cfn
heat_api
neutron_server
nova_novncproxy
nova_conductor
nova_api
nova_scheduler
keystone_fernet
keystone_ssh
keystone
rabbitmq
memcached
mariadb
keepalived
haproxy
cron
kolla_toolbox
fluentd
2021-03-31 11:48:13,407 - DEBUG - [10.204.216.96]: Running cmd : getent hosts 10.204.216.96 | head -n 1 | awk '{print $2}'
2021-03-31 11:48:13,530 - DEBUG - Output : nodem7.englab.juniper.net
2021-03-31 11:48:13,531 - DEBUG - [10.204.216.96]: Running cmd : ip addr show | grep 'inet .*/.* brd ' | awk '{print $2}'
2021-03-31 11:48:13,657 - DEBUG - Output : 10.204.216.96/24
10.10.10.7/24
172.17.0.1/16
2021-03-31 11:48:13,657 - DEBUG - [10.204.216.96]: Running cmd : getent hosts 10.10.10.7 | head -n 1 | awk '{print $2}'
2021-03-31 11:48:13,790 - DEBUG - Output : nodem7
2021-03-31 11:48:13,790 - DEBUG - [10.204.216.97]: Running cmd : hostname
2021-03-31 11:48:14,289 - DEBUG - Output : nodem8
2021-03-31 11:48:14,290 - DEBUG - [10.204.216.97]: Running cmd : hostname -f
2021-03-31 11:48:14,416 - DEBUG - Output : nodem8.englab.juniper.net
2021-03-31 11:48:14,416 - DEBUG - [10.204.216.97]: Running cmd : docker ps -a 2>/dev/null | grep -v "/pause\|/usr/bin/pod\|nova_api_\|contrail.*init\|init.*contrail\|provisioner\|placement" | awk '{print $NF}'
2021-03-31 11:48:14,690 - DEBUG - Output : NAMES
contrail-tools_0grgzlfnwb6bj
contrail-tools_zf26qpm8lqt9s
contrail-tools_iiyw3v36ka0hi
contrail-tools_a3exj5ypfmh09
contrail-tools_dghobozfqpea5
contrail-tools_n5t7qsoo8gqzh
contrail-tools_mv8u75e50wjdv
contrail-tools_y86eefep4gfr2
contrail-tools_oaapwzdv3twph
contrail-tools_vnlncvlbsixje
contrail-tools_2xhok8ykqu4no
contrail-tools_oqmymx6evn11b
contrail-tools_le1u4khk23n3b
contrail-tools_b2uwqg3xdkiq2
contrail-tools_x8h8q9u3ij353
contrail-tools_gy47z6sz7pkoc
contrail-tools_85u2e0zysmdgh
contrail-tools_ykc1a65dvx9gz
contrail-tools_rhh8ddykgnys2
contrail-tools_nqvojljr6ermc
contrail-tools_wcbfagbi85lc0
contrail-tools_92k8fw9dsa6ht
contrail-tools_f8v71r37cf77v
contrail-tools_scrtia9yw0ngm
contrail-tools_g1h63xlgxnhcb
contrail-tools_cz44qzi41a8oo
contrail-tools_qseize8tjt5xg
contrail-tools_oph2nzxro8zpw
contrail-tools_xubctivvzpl05
contrail-tools_g72lcmvs8sve4
contrail-tools_bcmys4f4z224d
contrail-tools_uw1s1nurhyt75
contrail-tools_a1uwotr4xsl8f
contrail-tools_0jyqo3duh5f1r
contrail-tools_4mqhi8hjifr7q
contrail-tools_j769rvuj0eqj3
contrail-tools_8xz9n2udgrbmf
vrouter_vrouter-agent_1
vrouter_nodemgr_1
rsyslogd_rsyslogd_1
nova_compute
nova_libvirt
nova_ssh
cron
kolla_toolbox
fluentd
2021-03-31 11:48:14,691 - DEBUG - [10.204.216.97]: Running cmd : ip addr show dev vhost0 | grep 'inet .*/.* brd ' | awk '{print $2}'
2021-03-31 11:48:14,826 - DEBUG - Output : 10.10.10.8/24
2021-03-31 11:48:14,826 - DEBUG - [10.204.216.97]: Running cmd : getent hosts 10.10.10.8 | head -n 1 | awk '{print $2}'
2021-03-31 11:48:14,951 - DEBUG - Output : nodem8
2021-03-31 11:48:14,952 - DEBUG - [10.204.216.110]: Running cmd : hostname
2021-03-31 11:48:15,328 - DEBUG - Output : server1-ae8275ae0eecf6c488b24302fe22dc9b
2021-03-31 11:48:15,329 - DEBUG - [10.204.216.110]: Running cmd : hostname -f
2021-03-31 11:48:15,422 - DEBUG - Output : server1-ae8275ae0eecf6c488b24302fe22dc9b.englab.juniper.net
2021-03-31 11:48:15,423 - DEBUG - [10.204.216.110]: Running cmd : docker ps -a 2>/dev/null | grep -v "/pause\|/usr/bin/pod\|nova_api_\|contrail.*init\|init.*contrail\|provisioner\|placement" | awk '{print $NF}'
2021-03-31 11:48:15,602 - DEBUG - Output : NAMES
ansible-player_20210329150718
contrail_command
contrail_psql
contrail_command_deployer
2021-03-31 11:48:19,542 - DEBUG - Not creating keypair since it exists
2021-03-31 11:48:19,688 - INFO - Domain Default found not creating
2021-03-31 11:48:20,867 - INFO - Project ctest-TestFlowScale-54758789 not found, creating it
2021-03-31 11:48:21,699 - INFO - Created Project:ctest-TestFlowScale-54758789, ID : 3f5e420c-060a-404f-b01b-f6c1a88b0bb1 
2021-03-31 11:48:24,771 - INFO - Reloading vrouter module on 10.204.216.97
2021-03-31 11:48:28,814 - INFO - Cmd output info: vrouter_vrouter-agent_1
rmmod: ERROR: Module vrouter is in use
              total        used        free      shared  buff/cache   available
Mem:      263855804    10324464   252901256       37380      630084   252675876
Swap:             0           0           0
              total        used        free      shared  buff/cache   available
Mem:      263855804    10321148   253275076       37380      259580   252727376
Swap:             0           0           0
vrouter_vrouter-agent_1
2021-03-31 11:48:29,134 - INFO - 10.204.216.97
2021-03-31 11:48:29,135 - INFO -   vrouter
2021-03-31 11:48:29,152 - INFO -     vrouter-nodemgr:active
2021-03-31 11:48:29,161 - INFO -     agent:initializing
2021-03-31 11:48:39,408 - INFO - 10.204.216.97
2021-03-31 11:48:39,409 - INFO -   vrouter
2021-03-31 11:48:39,421 - INFO -     vrouter-nodemgr:active
2021-03-31 11:48:39,433 - INFO -     agent:active
2021-03-31 11:48:39,434 - INFO - All the contrail services are up on nodes ['10.204.216.97']
2021-03-31 11:48:40,115 - INFO - Flow Table limit                     6291456
2021-03-31 11:48:40,115 - INFO - Running docker cp vrouter_vrouter-agent_1:/actions.sh . on 10.204.216.97
2021-03-31 11:48:40,509 - INFO - Running awk 'BEGIN { section=0; doprint=1 } /\[DEFAULT\]/ { section=1 } /flow_cache_timeout/ { if (section) {doprint=0; section=0} } { if (doprint) {print} else {doprint=1} }'  actions.sh > actions.sh.modified on 10.204.216.97
2021-03-31 11:48:40,630 - INFO - Running mv actions.sh.modified actions.sh; chmod +x actions.sh on 10.204.216.97
2021-03-31 11:48:40,763 - INFO - Running grep -q -F 'flow_cache_timeout=120' actions.sh ||sed -i  '/\[DEFAULT\]/a flow_cache_timeout=120' actions.sh on 10.204.216.97
2021-03-31 11:48:40,894 - INFO - Running docker cp actions.sh vrouter_vrouter-agent_1:/actions.sh on 10.204.216.97
2021-03-31 11:48:41,827 - INFO - Running docker restart vrouter_vrouter-agent_1 -t 60 on 10.204.216.97
2021-03-31 11:48:50,968 - INFO - Flow_cache_timeout set to 120 on 10.204.216.97
2021-03-31 11:48:52,490 - INFO - Created VN ctest-vn-92742970
2021-03-31 11:48:54,880 - INFO - VM ([<Server: ctest-TestFlowScale-54758789-89131947>]) created on node: (nodem8), Zone: (nova:nodem8)
2021-03-31 11:48:54,881 - INFO - Waiting for VM ctest-TestFlowScale-54758789-89131947 to be up..
2021-03-31 11:49:05,490 - INFO - VM name : ctest-TestFlowScale-54758789-89131947
2021-03-31 11:49:07,682 - INFO - Ping to Metadata IP 169.254.0.3 of VM ctest-TestFlowScale-54758789-89131947 passed
2021-03-31 11:49:34,428 - INFO - ================================================================================
2021-03-31 11:49:34,429 - INFO - STARTING TEST    : test_flow_scale
2021-03-31 11:49:34,436 - INFO - TEST DESCRIPTION : 
        Description: Test to scale 1 million flows
         Test steps:
                1. Add PHYSICAL_INTERFACE in vrouter env if absent
                2. Set flow entries to 1 million in vrouter module
                3. Increase flow timeout to high value like 9999
                4. Send traffic through hping3 changing the source port with each iteration
                5. Check for flow count in flow table
         Pass criteria: Flow count greater than 1 million
         Maintainer : nuthanc@juniper.net 
        
2021-03-31 11:49:35,640 - WARNING - Test is running with cores: {'10.204.216.96': ['core.contrail-collec.1.nodem7.1617040979']}
2021-03-31 11:49:35,641 - INFO - Initial checks done. Running the testcase now
2021-03-31 11:49:35,641 - INFO - 
2021-03-31 11:49:36,008 - INFO - vrouter agent memory usage: top - 17:19:35 up 2 days,  3:15,  3 users,  load average: 0.39, 0.43, 0.44
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.2 us,  0.0 sy,  0.0 ni, 99.8 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385580+total, 25238208+free, 11067020 used,   406708 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 25193307+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
 7860 root      20   0 2621612 644004 148868 S   0.0  0.2   0:05.44 contrail-vroute
644004
              total        used        free      shared  buff/cache   available
Mem:           251G         10G        240G         36M        397M        240G
Swap:            0B          0B          0B
2021-03-31 11:49:36,010 - INFO - Starting hping3  on ctest-TestFlowScale-54758789-89131947, args:  --udp   --keep   --destport ++1000  --baseport 5001  --count 1048576  --interval u1 
2021-03-31 11:49:46,801 - INFO - Running command for 5s
2021-03-31 11:49:53,785 - INFO - Flow count: 117464
2021-03-31 11:49:54,222 - INFO - vrouter agent memory usage: top - 17:19:54 up 2 days,  3:15,  3 users,  load average: 0.62, 0.48, 0.46
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.7 us,  0.3 sy,  0.0 ni, 99.0 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385580+total, 25181817+free, 11608748 used,   428888 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 25139136+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
 7860 root      20   0 3133612   1.5g 548768 S  33.3  0.6   0:36.92 contrail-vroute
1566488
              total        used        free      shared  buff/cache   available
Mem:           251G         11G        240G         36M        418M        239G
Swap:            0B          0B          0B
2021-03-31 11:49:54,222 - INFO - Starting hping3  on ctest-TestFlowScale-54758789-89131947, args:  --udp   --keep   --destport ++1000  --baseport 5002  --count 1048576  --interval u1 
2021-03-31 11:49:54,319 - INFO - Running command for 5s
2021-03-31 11:50:01,180 - INFO - Flow count: 239260
2021-03-31 11:50:01,569 - INFO - vrouter agent memory usage: top - 17:20:01 up 2 days,  3:15,  3 users,  load average: 0.68, 0.49, 0.46
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.5 us,  0.3 sy,  0.0 ni, 99.2 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385580+total, 25126931+free, 12155712 used,   430788 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 25084480+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
 7860 root      20   0 3679404   2.3g 815236 S  46.7  0.9   1:08.66 contrail-vroute
2372556
              total        used        free      shared  buff/cache   available
Mem:           251G         11G        239G         36M        420M        239G
Swap:            0B          0B          0B
2021-03-31 11:50:01,569 - INFO - Starting hping3  on ctest-TestFlowScale-54758789-89131947, args:  --udp   --keep   --destport ++1000  --baseport 5003  --count 1048576  --interval u1 
2021-03-31 11:50:01,670 - INFO - Running command for 5s
2021-03-31 11:50:08,542 - INFO - Flow count: 362176
2021-03-31 11:50:08,938 - INFO - vrouter agent memory usage: top - 17:20:08 up 2 days,  3:15,  3 users,  load average: 0.71, 0.50, 0.47
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.2 us,  0.2 sy,  0.0 ni, 99.7 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385580+total, 25070899+free, 12715928 used,   430876 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 25028414+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
 7860 root      20   0 4237484   2.9g 924096 S  18.8  1.2   1:40.30 contrail-vroute
3040552
              total        used        free      shared  buff/cache   available
Mem:           251G         12G        239G         36M        420M        238G
Swap:            0B          0B          0B
2021-03-31 11:50:08,938 - INFO - Starting hping3  on ctest-TestFlowScale-54758789-89131947, args:  --udp   --keep   --destport ++1000  --baseport 5004  --count 1048576  --interval u1 
2021-03-31 11:50:09,034 - INFO - Running command for 5s
2021-03-31 11:50:15,887 - INFO - Flow count: 487998
2021-03-31 11:50:16,281 - INFO - vrouter agent memory usage: top - 17:20:16 up 2 days,  3:15,  3 users,  load average: 0.67, 0.50, 0.47
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  2.0 us,  1.3 sy,  0.0 ni, 96.7 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385580+total, 25015294+free, 13272328 used,   430528 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24972785+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
 7860 root      20   0 4794540   3.6g   1.1g S  93.3  1.4   2:12.39 contrail-vroute
3809396
              total        used        free      shared  buff/cache   available
Mem:           251G         12G        238G         36M        420M        238G
Swap:            0B          0B          0B
2021-03-31 11:50:16,282 - INFO - Starting hping3  on ctest-TestFlowScale-54758789-89131947, args:  --udp   --keep   --destport ++1000  --baseport 5005  --count 1048576  --interval u1 
2021-03-31 11:50:16,378 - INFO - Running command for 5s
2021-03-31 11:50:23,218 - INFO - Flow count: 606348
2021-03-31 11:50:23,608 - INFO - vrouter agent memory usage: top - 17:20:23 up 2 days,  3:15,  3 users,  load average: 0.94, 0.56, 0.49
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.3 us,  0.2 sy,  0.0 ni, 99.5 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385580+total, 24961809+free, 13805968 used,   431744 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24919424+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
 7860 root      20   0 5338292   4.3g   1.3g S  26.7  1.7   2:43.74 contrail-vroute
4521388
              total        used        free      shared  buff/cache   available
Mem:           251G         13G        238G         36M        421M        237G
Swap:            0B          0B          0B
2021-03-31 11:50:23,609 - INFO - Starting hping3  on ctest-TestFlowScale-54758789-89131947, args:  --udp   --keep   --destport ++1000  --baseport 5006  --count 1048576  --interval u1 
2021-03-31 11:50:23,704 - INFO - Running command for 5s
2021-03-31 11:50:30,528 - INFO - Flow count: 726812
2021-03-31 11:50:30,912 - INFO - vrouter agent memory usage: top - 17:20:30 up 2 days,  3:15,  3 users,  load average: 0.94, 0.57, 0.49
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.5 us,  0.3 sy,  0.0 ni, 99.2 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385580+total, 24907641+free, 14347184 used,   432212 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24865302+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
 7860 root      20   0 5877940   4.8g   1.3g S  26.7  1.9   3:15.13 contrail-vroute
5079056
              total        used        free      shared  buff/cache   available
Mem:           251G         13G        237G         36M        423M        237G
Swap:            0B          0B          0B
2021-03-31 11:50:30,913 - INFO - Starting hping3  on ctest-TestFlowScale-54758789-89131947, args:  --udp   --keep   --destport ++1000  --baseport 5007  --count 1048576  --interval u1 
2021-03-31 11:50:31,012 - INFO - Running command for 5s
2021-03-31 11:50:37,875 - INFO - Flow count: 846724
2021-03-31 11:50:38,268 - INFO - vrouter agent memory usage: top - 17:20:38 up 2 days,  3:16,  3 users,  load average: 1.03, 0.60, 0.50
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  1.7 us,  0.2 sy,  0.0 ni, 98.2 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385580+total, 24853571+free, 14887840 used,   432244 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24811232+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
 7860 root      20   0 6419636   5.4g   1.3g S  86.7  2.1   3:46.46 contrail-vroute
5654012
              total        used        free      shared  buff/cache   available
Mem:           251G         14G        237G         36M        422M        236G
Swap:            0B          0B          0B
2021-03-31 11:50:38,269 - INFO - Starting hping3  on ctest-TestFlowScale-54758789-89131947, args:  --udp   --keep   --destport ++1000  --baseport 5008  --count 1048576  --interval u1 
2021-03-31 11:50:38,365 - INFO - Running command for 5s
2021-03-31 11:50:45,229 - INFO - Flow count: 961090
2021-03-31 11:50:45,609 - INFO - vrouter agent memory usage: top - 17:20:45 up 2 days,  3:16,  3 users,  load average: 1.19, 0.64, 0.51
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.7 us,  0.5 sy,  0.0 ni, 98.8 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385580+total, 24801912+free, 15404228 used,   432456 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24759598+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
 7860 root      20   0 6930612   5.9g   1.4g S  46.7  2.4   4:17.48 contrail-vroute
6223084
              total        used        free      shared  buff/cache   available
Mem:           251G         14G        236G         36M        422M        236G
Swap:            0B          0B          0B
2021-03-31 11:50:45,610 - INFO - Starting hping3  on ctest-TestFlowScale-54758789-89131947, args:  --udp   --keep   --destport ++1000  --baseport 5009  --count 1048576  --interval u1 
2021-03-31 11:50:45,714 - INFO - Running command for 5s
2021-03-31 11:50:52,571 - INFO - Flow count: 1076176
2021-03-31 11:50:52,949 - INFO - vrouter agent memory usage: top - 17:20:52 up 2 days,  3:16,  3 users,  load average: 1.45, 0.71, 0.54
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.8 us,  0.8 sy,  0.0 ni, 98.4 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385580+total, 24750364+free, 15919104 used,   433056 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24708110+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
 7860 root      20   0 7444660   6.5g   1.4g S  33.3  2.6   4:49.05 contrail-vroute
6813412
              total        used        free      shared  buff/cache   available
Mem:           251G         15G        236G         36M        422M        235G
Swap:            0B          0B          0B
2021-03-31 11:50:52,950 - INFO - Starting hping3  on ctest-TestFlowScale-54758789-89131947, args:  --udp   --keep   --destport ++1000  --baseport 5010  --count 1048576  --interval u1 
2021-03-31 11:50:53,045 - INFO - Running command for 5s
2021-03-31 11:50:59,915 - INFO - Flow count: 1193260
2021-03-31 11:51:00,301 - INFO - vrouter agent memory usage: top - 17:21:00 up 2 days,  3:16,  3 users,  load average: 1.66, 0.77, 0.56
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  2.1 us,  1.2 sy,  0.0 ni, 96.7 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385580+total, 24697633+free, 16446464 used,   433008 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24655363+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
 7860 root      20   0 7974068   7.0g   1.5g S 133.3  2.8   5:20.96 contrail-vroute
7384532
              total        used        free      shared  buff/cache   available
Mem:           251G         15G        235G         36M        422M        235G
Swap:            0B          0B          0B
2021-03-31 11:51:00,302 - INFO - Starting hping3  on ctest-TestFlowScale-54758789-89131947, args:  --udp   --keep   --destport ++1000  --baseport 5011  --count 1048576  --interval u1 
2021-03-31 11:51:00,397 - INFO - Running command for 5s
2021-03-31 11:51:07,266 - INFO - Flow count: 1308260
2021-03-31 11:51:07,648 - INFO - vrouter agent memory usage: top - 17:21:07 up 2 days,  3:16,  3 users,  load average: 2.00, 0.87, 0.60
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.5 us,  0.2 sy,  0.0 ni, 99.3 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385580+total, 24645686+free, 16965356 used,   433592 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24603481+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
 7860 root      20   0 8489140   7.5g   1.5g S  26.7  3.0   5:53.14 contrail-vroute
7908796
              total        used        free      shared  buff/cache   available
Mem:           251G         16G        235G         36M        423M        234G
Swap:            0B          0B          0B
2021-03-31 11:51:07,649 - INFO - Starting hping3  on ctest-TestFlowScale-54758789-89131947, args:  --udp   --keep   --destport ++1000  --baseport 5012  --count 1048576  --interval u1 
2021-03-31 11:51:07,744 - INFO - Running command for 5s
2021-03-31 11:51:14,644 - INFO - Flow count: 1427592
2021-03-31 11:51:15,067 - INFO - vrouter agent memory usage: top - 17:21:15 up 2 days,  3:16,  3 users,  load average: 2.16, 0.93, 0.61
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.3 us,  0.5 sy,  0.0 ni, 99.2 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385580+total, 24593796+free, 17483600 used,   434240 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24551664+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
 7860 root      20   0 9025716   8.1g   1.5g S  40.0  3.2   6:25.53 contrail-vroute
8445484
              total        used        free      shared  buff/cache   available
Mem:           251G         16G        234G         36M        424M        234G
Swap:            0B          0B          0B
2021-03-31 11:51:15,068 - INFO - Starting hping3  on ctest-TestFlowScale-54758789-89131947, args:  --udp   --keep   --destport ++1000  --baseport 5013  --count 1048576  --interval u1 
2021-03-31 11:51:15,172 - INFO - Running command for 5s
2021-03-31 11:51:22,035 - INFO - Flow count: 1546648
2021-03-31 11:51:22,430 - INFO - vrouter agent memory usage: top - 17:21:22 up 2 days,  3:16,  3 users,  load average: 1.98, 0.93, 0.62
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  1.3 us,  0.7 sy,  0.0 ni, 98.0 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385580+total, 24540091+free, 18021964 used,   432924 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24497833+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
 7860 root      20   0 9556148   8.6g   1.5g S  80.0  3.4   6:57.94 contrail-vroute
8989036
              total        used        free      shared  buff/cache   available
Mem:           251G         17G        234G         36M        422M        233G
Swap:            0B          0B          0B
2021-03-31 11:51:22,430 - INFO - Starting hping3  on ctest-TestFlowScale-54758789-89131947, args:  --udp   --keep   --destport ++1000  --baseport 5014  --count 1048576  --interval u1 
2021-03-31 11:51:22,534 - INFO - Running command for 5s
2021-03-31 11:51:29,388 - INFO - Flow count: 1668188
2021-03-31 11:51:29,775 - INFO - vrouter agent memory usage: top - 17:21:29 up 2 days,  3:16,  3 users,  load average: 2.23, 1.00, 0.64
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.7 us,  0.7 sy,  0.0 ni, 98.5 id,  0.0 wa,  0.0 hi,  0.2 si,  0.0 st
KiB Mem : 26385580+total, 24485462+free, 18568164 used,   433012 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24443212+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
 7860 root      20   0 9863.2m   9.1g   1.5g S  40.0  3.6   7:30.86 contrail-vroute
9556964
              total        used        free      shared  buff/cache   available
Mem:           251G         17G        233G         36M        422M        233G
Swap:            0B          0B          0B
2021-03-31 11:51:29,775 - INFO - Starting hping3  on ctest-TestFlowScale-54758789-89131947, args:  --udp   --keep   --destport ++1000  --baseport 5015  --count 1048576  --interval u1 
2021-03-31 11:51:29,875 - INFO - Running command for 5s
2021-03-31 11:51:36,752 - INFO - Flow count: 1786490
2021-03-31 11:51:37,146 - INFO - vrouter agent memory usage: top - 17:21:37 up 2 days,  3:17,  3 users,  load average: 2.10, 1.01, 0.65
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  1.0 us,  0.5 sy,  0.0 ni, 98.5 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385580+total, 24432438+free, 19098068 used,   433356 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24390220+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
 7860 root      20   0   10.1g   9.6g   1.5g S  66.7  3.8   8:03.83 contrail-vroute
10096840
              total        used        free      shared  buff/cache   available
Mem:           251G         18G        233G         36M        423M        232G
Swap:            0B          0B          0B
2021-03-31 11:51:37,147 - INFO - Starting hping3  on ctest-TestFlowScale-54758789-89131947, args:  --udp   --keep   --destport ++1000  --baseport 5016  --count 1048576  --interval u1 
2021-03-31 11:51:37,252 - INFO - Running command for 5s
2021-03-31 11:51:44,122 - INFO - Flow count: 1905968
2021-03-31 11:51:44,495 - INFO - vrouter agent memory usage: top - 17:21:44 up 2 days,  3:17,  3 users,  load average: 2.02, 1.01, 0.65
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.5 us,  0.2 sy,  0.0 ni, 99.3 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385580+total, 24376665+free, 19655036 used,   434108 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24334521+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
 7860 root      20   0   10.6g  10.1g   1.5g S  33.3  4.0   8:36.95 contrail-vroute
10636308
              total        used        free      shared  buff/cache   available
Mem:           251G         18G        232G         36M        423M        232G
Swap:            0B          0B          0B
2021-03-31 11:51:44,496 - INFO - Starting hping3  on ctest-TestFlowScale-54758789-89131947, args:  --udp   --keep   --destport ++1000  --baseport 5017  --count 1048576  --interval u1 
2021-03-31 11:51:44,591 - INFO - Running command for 5s
2021-03-31 11:51:51,466 - INFO - Flow count: 2023938
2021-03-31 11:51:51,853 - INFO - vrouter agent memory usage: top - 17:21:51 up 2 days,  3:17,  3 users,  load average: 1.78, 1.00, 0.65
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  1.0 us,  1.0 sy,  0.0 ni, 98.0 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385580+total, 24323923+free, 20181632 used,   434932 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24281860+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
 7860 root      20   0   11.1g  10.6g   1.5g S  80.0  4.2   9:09.73 contrail-vroute
11164828
              total        used        free      shared  buff/cache   available
Mem:           251G         19G        231G         36M        424M        231G
Swap:            0B          0B          0B
2021-03-31 11:51:51,854 - INFO - Starting hping3  on ctest-TestFlowScale-54758789-89131947, args:  --udp   --keep   --destport ++1000  --baseport 5018  --count 1048576  --interval u1 
2021-03-31 11:51:51,949 - INFO - Running command for 5s
2021-03-31 11:51:58,851 - INFO - Flow count: 2138838
2021-03-31 11:51:59,242 - INFO - vrouter agent memory usage: top - 17:21:59 up 2 days,  3:17,  3 users,  load average: 1.64, 0.98, 0.65
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  2.0 us,  0.7 sy,  0.0 ni, 97.4 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385580+total, 24271979+free, 20700564 used,   435448 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24229976+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
 7860 root      20   0   11.6g  11.1g   1.5g S 106.7  4.4   9:42.23 contrail-vroute
11683144
              total        used        free      shared  buff/cache   available
Mem:           251G         19G        231G         36M        425M        231G
Swap:            0B          0B          0B
2021-03-31 11:52:00,883 - INFO - Flow count: 2138838
2021-03-31 11:52:00,883 - INFO - Wait 120s for flows to get cleared
2021-03-31 11:54:00,884 - INFO - Checking flow_count and memory usage of vrouter: Taking 3 readings
2021-03-31 11:54:00,884 - INFO - Reading 1 after waiting is done
2021-03-31 11:54:02,492 - INFO - Flow count: 470660
2021-03-31 11:54:02,890 - INFO - vrouter agent memory usage: top - 17:24:02 up 2 days,  3:19,  3 users,  load average: 1.65, 1.26, 0.80
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.5 us,  0.3 sy,  0.0 ni, 99.2 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385580+total, 23230444+free, 20697088 used, 10854268 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24223715+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
 7860 root      20   0   11.6g  11.1g   1.5g S  40.0  4.4  14:34.30 contrail-vroute
11686148
              total        used        free      shared  buff/cache   available
Mem:           251G         19G        221G         36M         10G        231G
Swap:            0B          0B          0B
2021-03-31 11:54:04,891 - INFO - Reading 2 after waiting is done
2021-03-31 11:54:06,429 - INFO - Flow count: 406148
2021-03-31 11:54:06,788 - INFO - vrouter agent memory usage: top - 17:24:06 up 2 days,  3:19,  3 users,  load average: 1.76, 1.29, 0.81
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  8.6 us,  3.8 sy,  0.0 ni, 87.5 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385580+total, 23230372+free, 20699580 used, 10852500 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24223432+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
 7860 root      20   0   11.6g  11.1g   1.5g S 473.3  4.4  14:48.38 contrail-vroute
11685904
              total        used        free      shared  buff/cache   available
Mem:           251G         19G        221G         36M         10G        231G
Swap:            0B          0B          0B
2021-03-31 11:54:08,789 - INFO - Reading 3 after waiting is done
2021-03-31 11:54:10,333 - INFO - Flow count: 288770
2021-03-31 11:54:10,698 - INFO - vrouter agent memory usage: top - 17:24:10 up 2 days,  3:19,  3 users,  load average: 1.76, 1.29, 0.81
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  8.9 us,  3.4 sy,  0.0 ni, 87.8 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385580+total, 23230320+free, 20699608 used, 10852988 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24223299+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
 7860 root      20   0   11.6g  11.1g   1.5g S 520.0  4.4  15:05.91 contrail-vroute
11685320
              total        used        free      shared  buff/cache   available
Mem:           251G         19G        221G         36M         10G        231G
Swap:            0B          0B          0B
2021-03-31 11:54:12,700 - INFO - Generate gcore of agent process
2021-03-31 11:54:23,199 - INFO - Output of gcore cmd: [?1034h[New LWP 9314]
[New LWP 9313]
[New LWP 7876]
[New LWP 7874]
[New LWP 7875]
[New LWP 7873]
[New LWP 7871]
[New LWP 7872]
[New LWP 7870]
[New LWP 7869]
[Thread debugging using libthread_db enabled]
Using host libthread_db library "/lib64/libthread_db.so.1".
0x00007f3ca9b90f43 in epoll_wait () from /lib64/libc.so.6
Saved corefile core.7860
[Inferior 1 (process 7860) detached]
2021-03-31 11:54:23,199 - INFO - Adding 100000 flows
2021-03-31 11:54:23,200 - INFO - Starting hping3  on ctest-TestFlowScale-54758789-89131947, args:  --udp   --keep   --destport ++1000  --baseport 6000  --count 1048576  --interval u1 
2021-03-31 11:54:23,302 - INFO - Running hping command for 5s
2021-03-31 11:54:30,153 - INFO - Checking flow_count and memory usage of vrouter: Taking 3 readings
2021-03-31 11:54:30,153 - INFO - Reading 1 after add
2021-03-31 11:54:31,724 - INFO - Flow count: 102526
2021-03-31 11:54:32,124 - INFO - vrouter agent memory usage: top - 17:24:32 up 2 days,  3:19,  3 users,  load average: 1.59, 1.30, 0.82
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.7 us,  0.7 sy,  0.0 ni, 96.5 id,  2.2 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385580+total, 23229689+free, 20702576 used, 10856336 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24223161+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
 7860 root      20   0   11.6g  11.1g   1.5g S  40.0  4.4  15:57.09 contrail-vroute
11685160
              total        used        free      shared  buff/cache   available
Mem:           251G         19G        221G         36M         10G        231G
Swap:            0B          0B          0B
2021-03-31 11:54:34,125 - INFO - Reading 2 after add
2021-03-31 11:54:35,983 - INFO - Flow count: 102526
2021-03-31 11:54:36,378 - INFO - vrouter agent memory usage: top - 17:24:36 up 2 days,  3:20,  3 users,  load average: 1.87, 1.36, 0.85
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.8 us,  0.7 sy,  0.0 ni, 94.2 id,  4.3 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385580+total, 23229720+free, 20701964 used, 10856636 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24223228+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
 7860 root      20   0   11.6g  11.1g   1.5g S  26.7  4.4  15:58.44 contrail-vroute
11685592
              total        used        free      shared  buff/cache   available
Mem:           251G         19G        221G         36M         10G        231G
Swap:            0B          0B          0B
2021-03-31 11:54:38,379 - INFO - Reading 3 after add
2021-03-31 11:54:39,993 - INFO - Flow count: 102526
2021-03-31 11:54:40,374 - INFO - vrouter agent memory usage: top - 17:24:40 up 2 days,  3:20,  3 users,  load average: 1.87, 1.36, 0.85
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.2 us,  0.8 sy,  0.0 ni, 94.6 id,  4.3 wa,  0.0 hi,  0.2 si,  0.0 st
KiB Mem : 26385580+total, 23229801+free, 20700992 used, 10856804 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24223324+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
 7860 root      20   0   11.6g  11.1g   1.5g S  20.0  4.4  15:59.71 contrail-vroute
11685340
              total        used        free      shared  buff/cache   available
Mem:           251G         19G        221G         36M         10G        231G
Swap:            0B          0B          0B
2021-03-31 11:54:42,376 - INFO - Wait 120s for flows to get cleared
2021-03-31 11:56:42,377 - INFO - Checking flow_count and memory usage of vrouter: Taking 3 readings
2021-03-31 11:56:42,377 - INFO - Reading 1 after waiting is done
2021-03-31 11:56:43,991 - INFO - Flow count: 0
2021-03-31 11:56:44,366 - INFO - vrouter agent memory usage: top - 17:26:44 up 2 days,  3:22,  3 users,  load average: 0.76, 1.19, 0.86
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.2 us,  0.2 sy,  0.0 ni, 99.7 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385580+total, 23230704+free, 20690724 used, 10858040 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24224350+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
 7860 root      20   0   11.6g  11.1g   1.5g S   6.7  4.4  16:45.39 contrail-vroute
11685748
              total        used        free      shared  buff/cache   available
Mem:           251G         19G        221G         36M         10G        231G
Swap:            0B          0B          0B
2021-03-31 11:56:46,368 - INFO - Reading 2 after waiting is done
2021-03-31 11:56:47,987 - INFO - Flow count: 0
2021-03-31 11:56:48,374 - INFO - vrouter agent memory usage: top - 17:26:48 up 2 days,  3:22,  3 users,  load average: 0.78, 1.19, 0.86
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.3 us,  0.3 sy,  0.0 ni, 99.3 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385580+total, 23230606+free, 20691660 used, 10858076 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24224259+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
 7860 root      20   0   11.6g  11.1g   1.5g S  13.3  4.4  16:45.70 contrail-vroute
11685764
              total        used        free      shared  buff/cache   available
Mem:           251G         19G        221G         36M         10G        231G
Swap:            0B          0B          0B
2021-03-31 11:56:50,375 - INFO - Reading 3 after waiting is done
2021-03-31 11:56:51,998 - INFO - Flow count: 0
2021-03-31 11:56:52,386 - INFO - vrouter agent memory usage: top - 17:26:52 up 2 days,  3:22,  3 users,  load average: 0.80, 1.18, 0.86
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.2 us,  0.0 sy,  0.0 ni, 99.8 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385580+total, 23230604+free, 20691648 used, 10858100 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24224259+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
 7860 root      20   0   11.6g  11.1g   1.5g S   6.7  4.4  16:45.99 contrail-vroute
11685820
              total        used        free      shared  buff/cache   available
Mem:           251G         19G        221G         36M         10G        231G
Swap:            0B          0B          0B
2021-03-31 11:56:54,388 - INFO - Generate gcore of agent process
2021-03-31 11:57:06,603 - INFO - Output of gcore cmd: [?1034h[New LWP 9314]
[New LWP 9313]
[New LWP 7876]
[New LWP 7874]
[New LWP 7875]
[New LWP 7873]
[New LWP 7871]
[New LWP 7872]
[New LWP 7870]
[New LWP 7869]
[Thread debugging using libthread_db enabled]
Using host libthread_db library "/lib64/libthread_db.so.1".
0x00007f3ca9b90f43 in epoll_wait () from /lib64/libc.so.6
Saved corefile core.7860
[Inferior 1 (process 7860) detached]
2021-03-31 11:57:06,603 - INFO - Adding 100000 flows
2021-03-31 11:57:06,604 - INFO - Starting hping3  on ctest-TestFlowScale-54758789-89131947, args:  --udp   --keep   --destport ++1000  --baseport 6001  --count 1048576  --interval u1 
2021-03-31 11:57:06,705 - INFO - Running hping command for 5s
2021-03-31 11:57:22,953 - INFO - Checking flow_count and memory usage of vrouter: Taking 3 readings
2021-03-31 11:57:22,953 - INFO - Reading 1 after add
2021-03-31 11:57:24,614 - INFO - Flow count: 131074
2021-03-31 11:57:25,011 - INFO - vrouter agent memory usage: top - 17:27:24 up 2 days,  3:22,  3 users,  load average: 2.32, 1.49, 0.97
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  1.5 us,  0.5 sy,  0.0 ni, 98.0 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385580+total, 23230088+free, 20697140 used, 10857784 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24223712+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
 7860 root      20   0   11.6g  11.1g   1.5g S  20.0  4.4  17:49.09 contrail-vroute
11686376
              total        used        free      shared  buff/cache   available
Mem:           251G         19G        221G         36M         10G        231G
Swap:            0B          0B          0B
2021-03-31 11:57:27,013 - INFO - Reading 2 after add
2021-03-31 11:57:32,362 - INFO - Flow count: 131074
2021-03-31 11:57:32,758 - INFO - vrouter agent memory usage: top - 17:27:32 up 2 days,  3:22,  3 users,  load average: 2.27, 1.51, 0.98
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.7 us,  1.2 sy,  0.0 ni, 93.9 id,  4.3 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385580+total, 23230163+free, 20696180 used, 10857992 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24223808+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
 7860 root      20   0   11.6g  11.1g   1.5g S  43.8  4.4  17:51.12 contrail-vroute
11686420
              total        used        free      shared  buff/cache   available
Mem:           251G         19G        221G         36M         10G        231G
Swap:            0B          0B          0B
2021-03-31 11:57:34,759 - INFO - Reading 3 after add
2021-03-31 11:57:36,492 - INFO - Flow count: 131074
2021-03-31 11:57:36,881 - INFO - vrouter agent memory usage: top - 17:27:36 up 2 days,  3:23,  3 users,  load average: 2.09, 1.48, 0.97
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.7 us,  0.3 sy,  0.0 ni, 99.0 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385580+total, 23230336+free, 20694132 used, 10858304 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24224012+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
 7860 root      20   0   11.6g  11.1g   1.5g S  40.0  4.4  17:52.24 contrail-vroute
11686452
              total        used        free      shared  buff/cache   available
Mem:           251G         19G        221G         36M         10G        231G
Swap:            0B          0B          0B
2021-03-31 11:57:38,883 - INFO - Wait 120s for flows to get cleared
2021-03-31 11:59:38,884 - INFO - Checking flow_count and memory usage of vrouter: Taking 3 readings
2021-03-31 11:59:38,884 - INFO - Reading 1 after waiting is done
2021-03-31 11:59:40,568 - INFO - Flow count: 0
2021-03-31 11:59:40,993 - INFO - vrouter agent memory usage: top - 17:29:40 up 2 days,  3:25,  4 users,  load average: 0.31, 1.00, 0.86
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.2 us,  0.2 sy,  0.0 ni, 99.7 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385580+total, 23230507+free, 20689624 used, 10861112 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24224457+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
 7860 root      20   0   11.6g  11.2g   1.6g S   6.7  4.4  18:40.76 contrail-vroute
11699048
              total        used        free      shared  buff/cache   available
Mem:           251G         19G        221G         36M         10G        231G
Swap:            0B          0B          0B
2021-03-31 11:59:42,994 - INFO - Reading 2 after waiting is done
2021-03-31 11:59:44,624 - INFO - Flow count: 0
2021-03-31 11:59:45,019 - INFO - vrouter agent memory usage: top - 17:29:44 up 2 days,  3:25,  4 users,  load average: 0.31, 1.00, 0.86
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.2 us,  0.3 sy,  0.0 ni, 99.5 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385580+total, 23230356+free, 20691084 used, 10861148 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24224310+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
 7860 root      20   0   11.6g  11.2g   1.6g S   6.7  4.4  18:41.13 contrail-vroute
11709492
              total        used        free      shared  buff/cache   available
Mem:           251G         19G        221G         36M         10G        231G
Swap:            0B          0B          0B
2021-03-31 11:59:47,021 - INFO - Reading 3 after waiting is done
2021-03-31 11:59:48,639 - INFO - Flow count: 0
2021-03-31 11:59:49,029 - INFO - vrouter agent memory usage: top - 17:29:48 up 2 days,  3:25,  4 users,  load average: 0.29, 0.99, 0.86
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.2 us,  0.0 sy,  0.0 ni, 99.8 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385580+total, 23230209+free, 20692536 used, 10861168 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24224168+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
 7860 root      20   0   11.6g  11.2g   1.6g S  13.3  4.4  18:41.50 contrail-vroute
11719088
              total        used        free      shared  buff/cache   available
Mem:           251G         19G        221G         36M         10G        231G
Swap:            0B          0B          0B
2021-03-31 11:59:51,031 - INFO - Generate gcore of agent process
2021-03-31 12:00:02,540 - INFO - Output of gcore cmd: [?1034h[New LWP 9314]
[New LWP 9313]
[New LWP 7876]
[New LWP 7874]
[New LWP 7875]
[New LWP 7873]
[New LWP 7871]
[New LWP 7872]
[New LWP 7870]
[New LWP 7869]
[Thread debugging using libthread_db enabled]
Using host libthread_db library "/lib64/libthread_db.so.1".
0x00007f3ca9b90f43 in epoll_wait () from /lib64/libc.so.6
Saved corefile core.7860
[Inferior 1 (process 7860) detached]
2021-03-31 12:00:02,540 - INFO - Adding 100000 flows
2021-03-31 12:00:02,541 - INFO - Starting hping3  on ctest-TestFlowScale-54758789-89131947, args:  --udp   --keep   --destport ++1000  --baseport 6002  --count 1048576  --interval u1 
2021-03-31 12:00:02,636 - INFO - Running hping command for 5s
2021-03-31 12:00:18,525 - INFO - Checking flow_count and memory usage of vrouter: Taking 3 readings
2021-03-31 12:00:18,526 - INFO - Reading 1 after add
2021-03-31 12:00:20,221 - INFO - Flow count: 131074
2021-03-31 12:00:20,605 - INFO - vrouter agent memory usage: top - 17:30:20 up 2 days,  3:25,  4 users,  load average: 1.74, 1.25, 0.95
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  1.5 us,  2.1 sy,  0.0 ni, 89.3 id,  7.1 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385580+total, 23229942+free, 20695768 used, 10860616 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24223840+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
 7860 root      20   0   11.6g  11.2g   1.6g S  33.3  4.5  19:46.69 contrail-vroute
11771612
              total        used        free      shared  buff/cache   available
Mem:           251G         19G        221G         36M         10G        231G
Swap:            0B          0B          0B
2021-03-31 12:00:22,606 - INFO - Reading 2 after add
2021-03-31 12:00:28,110 - INFO - Flow count: 131074
2021-03-31 12:00:28,506 - INFO - vrouter agent memory usage: top - 17:30:28 up 2 days,  3:25,  4 users,  load average: 2.47, 1.42, 1.01
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.3 us,  0.5 sy,  0.0 ni, 92.2 id,  7.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385580+total, 23230030+free, 20694564 used, 10860932 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24223958+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
 7860 root      20   0   11.6g  11.2g   1.6g S  26.7  4.5  19:48.89 contrail-vroute
11791952
              total        used        free      shared  buff/cache   available
Mem:           251G         19G        221G         36M         10G        231G
Swap:            0B          0B          0B
2021-03-31 12:00:30,507 - INFO - Reading 3 after add
2021-03-31 12:00:33,038 - INFO - Flow count: 131074
2021-03-31 12:00:33,437 - INFO - vrouter agent memory usage: top - 17:30:33 up 2 days,  3:25,  4 users,  load average: 2.84, 1.52, 1.04
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.3 us,  0.2 sy,  0.0 ni, 99.5 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385580+total, 23230073+free, 20693932 used, 10861128 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24224027+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
 7860 root      20   0   11.6g  11.3g   1.7g S  20.0  4.5  19:50.37 contrail-vroute
11804544
              total        used        free      shared  buff/cache   available
Mem:           251G         19G        221G         36M         10G        231G
Swap:            0B          0B          0B
2021-03-31 12:02:40,820 - INFO - Flows greater than 1 Million
2021-03-31 12:02:40,821 - INFO - Deleting VM ctest-TestFlowScale-54758789-89131947
2021-03-31 12:02:43,116 - INFO - END TEST : test_flow_scale : PASSED[0:13:09]
2021-03-31 12:02:43,117 - INFO - --------------------------------------------------------------------------------
2021-03-31 12:02:43,352 - WARNING - Project ctest-TestFlowScale-54758789 still has VNs [{'to': ['default-domain', 'ctest-TestFlowScale-54758789', 'ctest-vn-92742970'], 'href': 'http://10.204.216.103:8082/virtual-network/b9082ffe-480d-4f83-b9a3-c5637f8a4a92', 'uuid': 'b9082ffe-480d-4f83-b9a3-c5637f8a4a92'}] before deletion
2021-03-31 12:02:45,483 - WARNING - Project ctest-TestFlowScale-54758789 still has VNs [{'to': ['default-domain', 'ctest-TestFlowScale-54758789', 'ctest-vn-92742970'], 'href': 'http://10.204.216.103:8082/virtual-network/b9082ffe-480d-4f83-b9a3-c5637f8a4a92', 'uuid': 'b9082ffe-480d-4f83-b9a3-c5637f8a4a92'}] before deletion
2021-03-31 12:02:47,575 - WARNING - Project ctest-TestFlowScale-54758789 still has VNs [{'to': ['default-domain', 'ctest-TestFlowScale-54758789', 'ctest-vn-92742970'], 'href': 'http://10.204.216.103:8082/virtual-network/b9082ffe-480d-4f83-b9a3-c5637f8a4a92', 'uuid': 'b9082ffe-480d-4f83-b9a3-c5637f8a4a92'}] before deletion
2021-03-31 12:02:49,657 - WARNING - Project ctest-TestFlowScale-54758789 still has VNs [{'to': ['default-domain', 'ctest-TestFlowScale-54758789', 'ctest-vn-92742970'], 'href': 'http://10.204.216.103:8082/virtual-network/b9082ffe-480d-4f83-b9a3-c5637f8a4a92', 'uuid': 'b9082ffe-480d-4f83-b9a3-c5637f8a4a92'}] before deletion
2021-03-31 12:02:51,743 - WARNING - Project ctest-TestFlowScale-54758789 still has VNs [{'to': ['default-domain', 'ctest-TestFlowScale-54758789', 'ctest-vn-92742970'], 'href': 'http://10.204.216.103:8082/virtual-network/b9082ffe-480d-4f83-b9a3-c5637f8a4a92', 'uuid': 'b9082ffe-480d-4f83-b9a3-c5637f8a4a92'}] before deletion
2021-03-31 12:02:53,842 - WARNING - Project ctest-TestFlowScale-54758789 still has VNs [{'to': ['default-domain', 'ctest-TestFlowScale-54758789', 'ctest-vn-92742970'], 'href': 'http://10.204.216.103:8082/virtual-network/b9082ffe-480d-4f83-b9a3-c5637f8a4a92', 'uuid': 'b9082ffe-480d-4f83-b9a3-c5637f8a4a92'}] before deletion
2021-03-31 12:02:55,932 - WARNING - Project ctest-TestFlowScale-54758789 still has VNs [{'to': ['default-domain', 'ctest-TestFlowScale-54758789', 'ctest-vn-92742970'], 'href': 'http://10.204.216.103:8082/virtual-network/b9082ffe-480d-4f83-b9a3-c5637f8a4a92', 'uuid': 'b9082ffe-480d-4f83-b9a3-c5637f8a4a92'}] before deletion
2021-03-31 12:02:58,022 - WARNING - Project ctest-TestFlowScale-54758789 still has VNs [{'to': ['default-domain', 'ctest-TestFlowScale-54758789', 'ctest-vn-92742970'], 'href': 'http://10.204.216.103:8082/virtual-network/b9082ffe-480d-4f83-b9a3-c5637f8a4a92', 'uuid': 'b9082ffe-480d-4f83-b9a3-c5637f8a4a92'}] before deletion
