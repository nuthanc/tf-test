2021-04-01 06:40:13,139 - DEBUG - [10.204.216.103]: Running cmd : hostname
2021-04-01 06:40:13,627 - DEBUG - Output : nodem14
2021-04-01 06:40:13,628 - DEBUG - [10.204.216.103]: Running cmd : hostname -f
2021-04-01 06:40:13,743 - DEBUG - Output : nodem14.englab.juniper.net
2021-04-01 06:40:13,743 - DEBUG - [10.204.216.103]: Running cmd : docker ps -a 2>/dev/null | grep -v "/pause\|/usr/bin/pod\|nova_api_\|contrail.*init\|init.*contrail\|provisioner\|placement" | awk '{print $NF}'
2021-04-01 06:40:14,054 - DEBUG - Output : NAMES
nuthan_test
analytics_snmp_nodemgr_1
analytics_snmp_snmp-collector_1
analytics_snmp_topology_1
analytics_alarm_nodemgr_1
analytics_alarm_kafka_1
analytics_alarm_alarm-gen_1
analytics_collector_1
analytics_nodemgr_1
analytics_api_1
analytics_database_nodemgr_1
analytics_database_cassandra_1
analytics_database_query-engine_1
control_nodemgr_1
control_named_1
control_control_1
control_dns_1
webui_job_1
webui_web_1
config_devicemgr_1
config_nodemgr_1
config_api_1
config_svcmonitor_1
config_schema_1
config_dnsmasq_1
config_database_nodemgr_1
config_database_rabbitmq_1
config_database_cassandra_1
config_database_zookeeper_1
redis_redis_1
barbican_worker
barbican_keystone_listener
barbican_api
horizon
heat_engine
heat_api_cfn
heat_api
neutron_server
nova_novncproxy
nova_conductor
nova_api
nova_scheduler
glance_api
keystone_fernet
keystone_ssh
keystone
rabbitmq
memcached
mariadb
keepalived
haproxy
cron
kolla_toolbox
fluentd
2021-04-01 06:40:14,054 - DEBUG - [10.204.216.103]: Running cmd : getent hosts 10.204.216.103 | head -n 1 | awk '{print $2}'
2021-04-01 06:40:14,168 - DEBUG - Output : nodem14.englab.juniper.net
2021-04-01 06:40:14,169 - DEBUG - [10.204.216.103]: Running cmd : ip addr show | grep 'inet .*/.* brd ' | awk '{print $2}'
2021-04-01 06:40:14,284 - DEBUG - Output : 10.204.216.103/24
10.10.10.14/24
172.17.0.1/16
2021-04-01 06:40:14,285 - DEBUG - [10.204.216.103]: Running cmd : getent hosts 10.10.10.14 | head -n 1 | awk '{print $2}'
2021-04-01 06:40:14,402 - DEBUG - Output : nodem14
2021-04-01 06:40:14,403 - DEBUG - [10.204.216.95]: Running cmd : hostname
2021-04-01 06:40:14,933 - DEBUG - Output : nodem6
2021-04-01 06:40:14,933 - DEBUG - [10.204.216.95]: Running cmd : hostname -f
2021-04-01 06:40:15,051 - DEBUG - Output : nodem6.englab.juniper.net
2021-04-01 06:40:15,051 - DEBUG - [10.204.216.95]: Running cmd : docker ps -a 2>/dev/null | grep -v "/pause\|/usr/bin/pod\|nova_api_\|contrail.*init\|init.*contrail\|provisioner\|placement" | awk '{print $NF}'
2021-04-01 06:40:15,362 - DEBUG - Output : NAMES
analytics_snmp_nodemgr_1
analytics_snmp_snmp-collector_1
analytics_snmp_topology_1
analytics_alarm_nodemgr_1
analytics_alarm_kafka_1
analytics_alarm_alarm-gen_1
analytics_collector_1
analytics_nodemgr_1
analytics_api_1
analytics_database_nodemgr_1
analytics_database_cassandra_1
analytics_database_query-engine_1
control_nodemgr_1
control_named_1
control_dns_1
control_control_1
webui_job_1
webui_web_1
config_devicemgr_1
config_nodemgr_1
config_api_1
config_svcmonitor_1
config_schema_1
config_dnsmasq_1
config_database_nodemgr_1
config_database_rabbitmq_1
config_database_cassandra_1
config_database_zookeeper_1
redis_redis_1
barbican_worker
barbican_keystone_listener
barbican_api
horizon
heat_engine
heat_api_cfn
heat_api
neutron_server
nova_novncproxy
nova_conductor
nova_api
nova_scheduler
keystone_fernet
keystone_ssh
keystone
rabbitmq
memcached
mariadb
keepalived
haproxy
cron
kolla_toolbox
fluentd
2021-04-01 06:40:15,363 - DEBUG - [10.204.216.95]: Running cmd : getent hosts 10.204.216.95 | head -n 1 | awk '{print $2}'
2021-04-01 06:40:15,490 - DEBUG - Output : nodem6.englab.juniper.net
2021-04-01 06:40:15,491 - DEBUG - [10.204.216.95]: Running cmd : ip addr show | grep 'inet .*/.* brd ' | awk '{print $2}'
2021-04-01 06:40:15,599 - DEBUG - Output : 10.204.216.95/24
10.10.10.6/24
172.17.0.1/16
2021-04-01 06:40:15,600 - DEBUG - [10.204.216.95]: Running cmd : getent hosts 10.10.10.6 | head -n 1 | awk '{print $2}'
2021-04-01 06:40:15,724 - DEBUG - Output : nodem6
2021-04-01 06:40:15,724 - DEBUG - [10.204.216.96]: Running cmd : hostname
2021-04-01 06:40:16,218 - DEBUG - Output : nodem7
2021-04-01 06:40:16,219 - DEBUG - [10.204.216.96]: Running cmd : hostname -f
2021-04-01 06:40:16,343 - DEBUG - Output : nodem7.englab.juniper.net
2021-04-01 06:40:16,344 - DEBUG - [10.204.216.96]: Running cmd : docker ps -a 2>/dev/null | grep -v "/pause\|/usr/bin/pod\|nova_api_\|contrail.*init\|init.*contrail\|provisioner\|placement" | awk '{print $NF}'
2021-04-01 06:40:16,638 - DEBUG - Output : NAMES
analytics_snmp_nodemgr_1
analytics_snmp_snmp-collector_1
analytics_snmp_topology_1
analytics_alarm_nodemgr_1
analytics_alarm_kafka_1
analytics_alarm_alarm-gen_1
analytics_nodemgr_1
analytics_collector_1
analytics_api_1
analytics_database_nodemgr_1
analytics_database_cassandra_1
analytics_database_query-engine_1
control_nodemgr_1
control_named_1
control_dns_1
control_control_1
webui_web_1
webui_job_1
config_devicemgr_1
config_nodemgr_1
config_schema_1
config_api_1
config_svcmonitor_1
config_dnsmasq_1
config_database_nodemgr_1
config_database_rabbitmq_1
config_database_cassandra_1
config_database_zookeeper_1
redis_redis_1
barbican_worker
barbican_keystone_listener
barbican_api
horizon
heat_engine
heat_api_cfn
heat_api
neutron_server
nova_novncproxy
nova_conductor
nova_api
nova_scheduler
keystone_fernet
keystone_ssh
keystone
rabbitmq
memcached
mariadb
keepalived
haproxy
cron
kolla_toolbox
fluentd
2021-04-01 06:40:16,639 - DEBUG - [10.204.216.96]: Running cmd : getent hosts 10.204.216.96 | head -n 1 | awk '{print $2}'
2021-04-01 06:40:16,756 - DEBUG - Output : nodem7.englab.juniper.net
2021-04-01 06:40:16,757 - DEBUG - [10.204.216.96]: Running cmd : ip addr show | grep 'inet .*/.* brd ' | awk '{print $2}'
2021-04-01 06:40:16,884 - DEBUG - Output : 10.204.216.96/24
10.10.10.7/24
172.17.0.1/16
2021-04-01 06:40:16,885 - DEBUG - [10.204.216.96]: Running cmd : getent hosts 10.10.10.7 | head -n 1 | awk '{print $2}'
2021-04-01 06:40:17,004 - DEBUG - Output : nodem7
2021-04-01 06:40:17,004 - DEBUG - [10.204.216.97]: Running cmd : hostname
2021-04-01 06:40:17,514 - DEBUG - Output : nodem8
2021-04-01 06:40:17,514 - DEBUG - [10.204.216.97]: Running cmd : hostname -f
2021-04-01 06:40:17,634 - DEBUG - Output : nodem8.englab.juniper.net
2021-04-01 06:40:17,635 - DEBUG - [10.204.216.97]: Running cmd : docker ps -a 2>/dev/null | grep -v "/pause\|/usr/bin/pod\|nova_api_\|contrail.*init\|init.*contrail\|provisioner\|placement" | awk '{print $NF}'
2021-04-01 06:40:17,938 - DEBUG - Output : NAMES
contrail-tools_zf26qpm8lqt9s
contrail-tools_iiyw3v36ka0hi
contrail-tools_a3exj5ypfmh09
contrail-tools_dghobozfqpea5
contrail-tools_n5t7qsoo8gqzh
contrail-tools_mv8u75e50wjdv
contrail-tools_y86eefep4gfr2
contrail-tools_oaapwzdv3twph
contrail-tools_vnlncvlbsixje
contrail-tools_2xhok8ykqu4no
contrail-tools_oqmymx6evn11b
contrail-tools_le1u4khk23n3b
contrail-tools_b2uwqg3xdkiq2
contrail-tools_x8h8q9u3ij353
contrail-tools_gy47z6sz7pkoc
contrail-tools_85u2e0zysmdgh
contrail-tools_ykc1a65dvx9gz
contrail-tools_rhh8ddykgnys2
contrail-tools_nqvojljr6ermc
contrail-tools_wcbfagbi85lc0
contrail-tools_92k8fw9dsa6ht
contrail-tools_f8v71r37cf77v
contrail-tools_scrtia9yw0ngm
contrail-tools_g1h63xlgxnhcb
contrail-tools_cz44qzi41a8oo
contrail-tools_qseize8tjt5xg
contrail-tools_oph2nzxro8zpw
contrail-tools_xubctivvzpl05
contrail-tools_g72lcmvs8sve4
contrail-tools_bcmys4f4z224d
contrail-tools_uw1s1nurhyt75
contrail-tools_a1uwotr4xsl8f
contrail-tools_0jyqo3duh5f1r
contrail-tools_4mqhi8hjifr7q
contrail-tools_j769rvuj0eqj3
contrail-tools_8xz9n2udgrbmf
vrouter_vrouter-agent_1
vrouter_nodemgr_1
rsyslogd_rsyslogd_1
nova_compute
nova_libvirt
nova_ssh
cron
kolla_toolbox
fluentd
2021-04-01 06:40:17,939 - DEBUG - [10.204.216.97]: Running cmd : ip addr show dev vhost0 | grep 'inet .*/.* brd ' | awk '{print $2}'
2021-04-01 06:40:18,067 - DEBUG - Output : 10.10.10.8/24
2021-04-01 06:40:18,068 - DEBUG - [10.204.216.97]: Running cmd : getent hosts 10.10.10.8 | head -n 1 | awk '{print $2}'
2021-04-01 06:40:18,187 - DEBUG - Output : nodem8
2021-04-01 06:40:18,187 - DEBUG - [10.204.216.110]: Running cmd : hostname
2021-04-01 06:40:18,569 - DEBUG - Output : server1-ae8275ae0eecf6c488b24302fe22dc9b
2021-04-01 06:40:18,570 - DEBUG - [10.204.216.110]: Running cmd : hostname -f
2021-04-01 06:40:18,665 - DEBUG - Output : server1-ae8275ae0eecf6c488b24302fe22dc9b.englab.juniper.net
2021-04-01 06:40:18,666 - DEBUG - [10.204.216.110]: Running cmd : docker ps -a 2>/dev/null | grep -v "/pause\|/usr/bin/pod\|nova_api_\|contrail.*init\|init.*contrail\|provisioner\|placement" | awk '{print $NF}'
2021-04-01 06:40:18,860 - DEBUG - Output : NAMES
ansible-player_20210329150718
contrail_command
contrail_psql
contrail_command_deployer
2021-04-01 06:40:22,970 - DEBUG - Not creating keypair since it exists
2021-04-01 06:40:23,083 - INFO - Domain Default found not creating
2021-04-01 06:40:24,171 - INFO - Project ctest-TestFlowScale-67934259 not found, creating it
2021-04-01 06:40:25,175 - INFO - Created Project:ctest-TestFlowScale-67934259, ID : 91944e82-250e-46ad-83a1-e05cf45cd4fa 
2021-04-01 06:40:28,457 - INFO - Reloading vrouter module on 10.204.216.97
2021-04-01 06:40:40,013 - INFO - Cmd output info: vrouter_vrouter-agent_1
rmmod: ERROR: Module vrouter is in use
              total        used        free      shared  buff/cache   available
Mem:      263855804    10294212   211133856       37200    42427736   252640328
Swap:             0           0           0
              total        used        free      shared  buff/cache   available
Mem:      263855804    10291096   253315636       37152      249072   252762404
Swap:             0           0           0
vrouter_vrouter-agent_1
2021-04-01 06:40:40,316 - INFO - 10.204.216.97
2021-04-01 06:40:40,316 - INFO -   vrouter
2021-04-01 06:40:40,331 - INFO -     vrouter-nodemgr:active
2021-04-01 06:40:40,339 - INFO -     agent:initializing
2021-04-01 06:40:50,588 - INFO - 10.204.216.97
2021-04-01 06:40:50,588 - INFO -   vrouter
2021-04-01 06:40:50,599 - INFO -     vrouter-nodemgr:active
2021-04-01 06:40:50,610 - INFO -     agent:active
2021-04-01 06:40:50,610 - INFO - All the contrail services are up on nodes ['10.204.216.97']
2021-04-01 06:40:51,320 - INFO - Flow Table limit                     6291456
2021-04-01 06:40:51,320 - INFO - Running docker cp vrouter_vrouter-agent_1:/actions.sh . on 10.204.216.97
2021-04-01 06:40:51,710 - INFO - Running awk 'BEGIN { section=0; doprint=1 } /\[DEFAULT\]/ { section=1 } /flow_cache_timeout/ { if (section) {doprint=0; section=0} } { if (doprint) {print} else {doprint=1} }'  actions.sh > actions.sh.modified on 10.204.216.97
2021-04-01 06:40:51,842 - INFO - Running mv actions.sh.modified actions.sh; chmod +x actions.sh on 10.204.216.97
2021-04-01 06:40:51,973 - INFO - Running grep -q -F 'flow_cache_timeout=120' actions.sh ||sed -i  '/\[DEFAULT\]/a flow_cache_timeout=120' actions.sh on 10.204.216.97
2021-04-01 06:40:52,104 - INFO - Running docker cp actions.sh vrouter_vrouter-agent_1:/actions.sh on 10.204.216.97
2021-04-01 06:40:53,019 - INFO - Running docker restart vrouter_vrouter-agent_1 -t 60 on 10.204.216.97
2021-04-01 06:41:02,189 - INFO - Flow_cache_timeout set to 120 on 10.204.216.97
2021-04-01 06:41:03,690 - INFO - Created VN ctest-vn-98569201
2021-04-01 06:41:06,584 - INFO - VM ([<Server: ctest-TestFlowScale-67934259-61181757>]) created on node: (nodem8), Zone: (nova:nodem8)
2021-04-01 06:41:06,584 - INFO - Waiting for VM ctest-TestFlowScale-67934259-61181757 to be up..
2021-04-01 06:41:17,535 - INFO - VM name : ctest-TestFlowScale-67934259-61181757
2021-04-01 06:41:19,793 - INFO - Ping to Metadata IP 169.254.0.3 of VM ctest-TestFlowScale-67934259-61181757 passed
2021-04-01 06:41:41,275 - INFO - ================================================================================
2021-04-01 06:41:41,276 - INFO - STARTING TEST    : test_flow_scale
2021-04-01 06:41:41,278 - INFO - TEST DESCRIPTION : 
        Description: Test to scale 1 million flows
         Test steps:
                1. Add PHYSICAL_INTERFACE in vrouter env if absent
                2. Set flow entries to 1 million in vrouter module
                3. Increase flow timeout to high value like 9999
                4. Send traffic through hping3 changing the source port with each iteration
                5. Check for flow count in flow table
         Pass criteria: Flow count greater than 1 million
         Maintainer : nuthanc@juniper.net 
        
2021-04-01 06:41:42,532 - WARNING - Test is running with cores: {'10.204.216.96': ['core.contrail-collec.1.nodem7.1617040979']}
2021-04-01 06:41:42,533 - INFO - Initial checks done. Running the testcase now
2021-04-01 06:41:42,533 - INFO - 
2021-04-01 06:41:42,881 - INFO - vrouter agent memory usage: top - 12:11:42 up 2 days, 22:07,  2 users,  load average: 0.54, 0.58, 0.77
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.2 us,  0.2 sy,  0.0 ni, 99.7 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385580+total, 25239192+free, 11044380 used,   419508 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 25195552+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
 2071 root      20   0 2621608 636940 136876 S   0.0  0.2   0:06.27 contrail-vroute
637196
              total        used        free      shared  buff/cache   available
Mem:           251G         10G        240G         36M        409M        240G
Swap:            0B          0B          0B
2021-04-01 06:41:42,882 - INFO - Before creation gcore
2021-04-01 06:41:44,615 - INFO - Output of gcore cmd: [?1034h[New LWP 2086]
[New LWP 2087]
[New LWP 2084]
[New LWP 2085]
[New LWP 2082]
[New LWP 2083]
[New LWP 2081]
[New LWP 2080]
[Thread debugging using libthread_db enabled]
Using host libthread_db library "/lib64/libthread_db.so.1".
0x00007f6f22051f43 in epoll_wait () from /lib64/libc.so.6
Saved corefile core.4.2071
[Inferior 1 (process 2071) detached]
-rw-r--r--. 1 root root 520M Apr  1 12:11 core.4.2071
2021-04-01 06:41:44,616 - INFO - Starting hping3  on ctest-TestFlowScale-67934259-61181757, args:  --udp   --keep   --destport ++1000  --baseport 5001  --count 1048576  --interval u1 
2021-04-01 06:41:55,405 - INFO - Running command for 5s
2021-04-01 06:42:02,391 - INFO - Flow count: 126636
2021-04-01 06:42:02,820 - INFO - vrouter agent memory usage: top - 12:12:02 up 2 days, 22:07,  2 users,  load average: 1.24, 0.72, 0.81
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.3 us,  0.2 sy,  0.0 ni, 99.5 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385580+total, 25122411+free, 11629028 used,  1002660 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 25136502+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
 2071 root      20   0 3183792   1.6g 576740 S  33.3  0.6   0:39.06 contrail-vroute
1632804
              total        used        free      shared  buff/cache   available
Mem:           251G         11G        239G         36M        980M        239G
Swap:            0B          0B          0B
2021-04-01 06:42:02,820 - INFO - Starting hping3  on ctest-TestFlowScale-67934259-61181757, args:  --udp   --keep   --destport ++1000  --baseport 5002  --count 1048576  --interval u1 
2021-04-01 06:42:02,916 - INFO - Running command for 5s
2021-04-01 06:42:09,812 - INFO - Flow count: 253672
2021-04-01 06:42:10,200 - INFO - vrouter agent memory usage: top - 12:12:10 up 2 days, 22:07,  2 users,  load average: 1.34, 0.77, 0.82
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.5 us,  0.3 sy,  0.0 ni, 99.2 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385580+total, 25065728+free, 12195824 used,  1002700 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 25079795+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
 2071 root      20   0 3759280   2.4g 869152 S  26.7  0.9   1:11.24 contrail-vroute
2493628
              total        used        free      shared  buff/cache   available
Mem:           251G         11G        239G         36M        979M        239G
Swap:            0B          0B          0B
2021-04-01 06:42:10,201 - INFO - Starting hping3  on ctest-TestFlowScale-67934259-61181757, args:  --udp   --keep   --destport ++1000  --baseport 5003  --count 1048576  --interval u1 
2021-04-01 06:42:10,304 - INFO - Running command for 5s
2021-04-01 06:42:17,158 - INFO - Flow count: 380264
2021-04-01 06:42:17,554 - INFO - vrouter agent memory usage: top - 12:12:17 up 2 days, 22:07,  2 users,  load average: 1.87, 0.89, 0.86
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.7 us,  0.2 sy,  0.0 ni, 99.0 id,  0.0 wa,  0.0 hi,  0.2 si,  0.0 st
KiB Mem : 26385580+total, 25008294+free, 12769796 used,  1003072 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 25022392+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
 2071 root      20   0 4325552   3.0g 903068 S  40.0  1.2   1:42.45 contrail-vroute
3097880
              total        used        free      shared  buff/cache   available
Mem:           251G         12G        238G         36M        979M        238G
Swap:            0B          0B          0B
2021-04-01 06:42:17,555 - INFO - Starting hping3  on ctest-TestFlowScale-67934259-61181757, args:  --udp   --keep   --destport ++1000  --baseport 5004  --count 1048576  --interval u1 
2021-04-01 06:42:17,652 - INFO - Running command for 5s
2021-04-01 06:42:24,509 - INFO - Flow count: 505942
2021-04-01 06:42:24,901 - INFO - vrouter agent memory usage: top - 12:12:24 up 2 days, 22:07,  2 users,  load average: 1.81, 0.91, 0.87
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.3 us,  0.0 sy,  0.0 ni, 99.7 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385580+total, 24951547+free, 13336088 used,  1004244 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24965769+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
 2071 root      20   0 4887728   3.8g   1.1g S  26.7  1.5   2:14.37 contrail-vroute
3953728
              total        used        free      shared  buff/cache   available
Mem:           251G         12G        237G         36M        980M        238G
Swap:            0B          0B          0B
2021-04-01 06:42:24,902 - INFO - Starting hping3  on ctest-TestFlowScale-67934259-61181757, args:  --udp   --keep   --destport ++1000  --baseport 5005  --count 1048576  --interval u1 
2021-04-01 06:42:24,995 - INFO - Running command for 5s
2021-04-01 06:42:31,859 - INFO - Flow count: 629878
2021-04-01 06:42:32,245 - INFO - vrouter agent memory usage: top - 12:12:32 up 2 days, 22:07,  2 users,  load average: 1.74, 0.91, 0.87
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.5 us,  0.3 sy,  0.0 ni, 99.2 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385580+total, 24895627+free, 13895964 used,  1003564 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24909787+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
 2071 root      20   0 5448880   4.4g   1.2g S  26.7  1.8   2:45.30 contrail-vroute
4619848
              total        used        free      shared  buff/cache   available
Mem:           251G         13G        237G         36M        980M        237G
Swap:            0B          0B          0B
2021-04-01 06:42:32,246 - INFO - Starting hping3  on ctest-TestFlowScale-67934259-61181757, args:  --udp   --keep   --destport ++1000  --baseport 5006  --count 1048576  --interval u1 
2021-04-01 06:42:32,347 - INFO - Running command for 5s
2021-04-01 06:42:39,250 - INFO - Flow count: 751040
2021-04-01 06:42:39,635 - INFO - vrouter agent memory usage: top - 12:12:39 up 2 days, 22:08,  2 users,  load average: 1.77, 0.94, 0.88
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.7 us,  0.3 sy,  0.0 ni, 99.0 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385580+total, 24840761+free, 14442744 used,  1005440 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24855097+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
 2071 root      20   0 5990576   4.9g   1.3g S  46.7  2.0   3:15.74 contrail-vroute
5191240
              total        used        free      shared  buff/cache   available
Mem:           251G         13G        236G         36M        981M        237G
Swap:            0B          0B          0B
2021-04-01 06:42:39,635 - INFO - Starting hping3  on ctest-TestFlowScale-67934259-61181757, args:  --udp   --keep   --destport ++1000  --baseport 5007  --count 1048576  --interval u1 
2021-04-01 06:42:39,735 - INFO - Running command for 5s
2021-04-01 06:42:46,550 - INFO - Flow count: 877780
2021-04-01 06:42:46,940 - INFO - vrouter agent memory usage: top - 12:12:46 up 2 days, 22:08,  2 users,  load average: 1.71, 0.94, 0.88
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.5 us,  0.3 sy,  0.0 ni, 99.2 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385580+total, 24784576+free, 15006312 used,  1003740 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24798742+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
 2071 root      20   0 6561968   5.5g   1.3g S  13.3  2.2   3:47.44 contrail-vroute
5800124
              total        used        free      shared  buff/cache   available
Mem:           251G         14G        236G         36M        980M        236G
Swap:            0B          0B          0B
2021-04-01 06:42:46,941 - INFO - Starting hping3  on ctest-TestFlowScale-67934259-61181757, args:  --udp   --keep   --destport ++1000  --baseport 5008  --count 1048576  --interval u1 
2021-04-01 06:42:47,037 - INFO - Running command for 5s
2021-04-01 06:42:53,930 - INFO - Flow count: 996466
2021-04-01 06:42:54,308 - INFO - vrouter agent memory usage: top - 12:12:54 up 2 days, 22:08,  2 users,  load average: 1.98, 1.01, 0.90
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.7 us,  0.5 sy,  0.0 ni, 98.8 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385580+total, 24730726+free, 15544352 used,  1004184 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24744940+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
 2071 root      20   0 7092400   6.1g   1.4g S  40.0  2.4   4:17.98 contrail-vroute
6418988
              total        used        free      shared  buff/cache   available
Mem:           251G         14G        235G         36M        980M        235G
Swap:            0B          0B          0B
2021-04-01 06:42:54,309 - INFO - Starting hping3  on ctest-TestFlowScale-67934259-61181757, args:  --udp   --keep   --destport ++1000  --baseport 5009  --count 1048576  --interval u1 
2021-04-01 06:42:54,409 - INFO - Running command for 5s
2021-04-01 06:43:01,260 - INFO - Flow count: 1117472
2021-04-01 06:43:01,647 - INFO - vrouter agent memory usage: top - 12:13:01 up 2 days, 22:08,  2 users,  load average: 1.67, 0.98, 0.89
Tasks:   1 total,   0 running,   1 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.8 us,  0.5 sy,  0.0 ni, 98.7 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem : 26385580+total, 24676953+free, 16082300 used,  1003960 buff/cache
KiB Swap:        0 total,        0 free,        0 used. 24691140+avail Mem 

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
 2071 root      20   0 7638192   6.7g   1.5g S  60.0  2.7   4:49.86 contrail-vroute
7027760
              total        used        free      shared  buff/cache   available
Mem:           251G         15G        235G         36M        980M        235G
Swap:            0B          0B          0B
2021-04-01 06:43:01,647 - INFO - Gcore after 1 Million creation
2021-04-01 06:43:07,293 - INFO - Output of gcore cmd: [?1034h[New LWP 2851]
[New LWP 2850]
[New LWP 2086]
[New LWP 2087]
[New LWP 2084]
[New LWP 2085]
[New LWP 2082]
[New LWP 2083]
[New LWP 2081]
[New LWP 2080]
[Thread debugging using libthread_db enabled]
Using host libthread_db library "/lib64/libthread_db.so.1".
0x00007f6f22051f43 in epoll_wait () from /lib64/libc.so.6
Saved corefile core.5.2071
[Inferior 1 (process 2071) detached]
-rw-r--r--. 1 root root 5.3G Apr  1 12:13 core.5.2071
2021-04-01 06:43:08,924 - INFO - Flow count: 1117474
2021-04-01 06:43:08,925 - INFO - Sleeping for 2m
2021-04-01 06:45:52,266 - INFO - Flow count: 6
2021-04-01 06:45:52,267 - INFO - Generate gcore of agent process
2021-04-01 06:45:58,242 - INFO - Output of gcore cmd: [?1034h[New LWP 2851]
[New LWP 2850]
[New LWP 2086]
[New LWP 2087]
[New LWP 2084]
[New LWP 2085]
[New LWP 2082]
[New LWP 2083]
[New LWP 2081]
[New LWP 2080]
[Thread debugging using libthread_db enabled]
Using host libthread_db library "/lib64/libthread_db.so.1".
0x00007f6f22051f43 in epoll_wait () from /lib64/libc.so.6
Saved corefile core.6.2071
[Inferior 1 (process 2071) detached]
-rw-r--r--. 1 root root 5.3G Apr  1 12:15 core.6.2071
2021-04-01 06:45:58,243 - INFO - Flows greater than 1 Million
2021-04-01 06:45:58,243 - INFO - Deleting VM ctest-TestFlowScale-67934259-61181757
2021-04-01 06:46:00,318 - INFO - END TEST : test_flow_scale : PASSED[0:04:19]
2021-04-01 06:46:00,318 - INFO - --------------------------------------------------------------------------------
